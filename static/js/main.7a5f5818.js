/*! For license information please see main.7a5f5818.js.LICENSE.txt */
!function(){var e={472:function(e){e.exports="object"==typeof self?self.FormData:window.FormData},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function q(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function j(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 1:return e=q(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case b:return"Portal";case E:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,xe=null,Ie=null;function Ee(e){if(e=ki(e)){if("function"!==typeof be)throw Error(a(280));var t=e.stateNode;t&&(t=_i(t),be(e.stateNode,e.type,t))}}function Se(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ie)&&(Ne(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,qe={onError:function(e){Me=!0,Fe=e}};function je(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(qe,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ht(u):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,bt,xt,It,Et,St=!1,Tt=[],Ct=null,Nt=null,At=null,Rt=new Map,Pt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&bt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function qt(){St=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Rt.forEach(Vt),Pt.forEach(Vt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,qt)))}function Bt(e){function t(t){return jt(t,e)}if(0<Tt.length){jt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&jt(Ct,e),null!==Nt&&jt(Nt,e),null!==At&&jt(At,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var zt=w.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Ht(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Gt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&_t(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=F({},cn,{view:0,detail:0}),fn=an(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},hn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),wn=an(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return In}var Sn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Rn),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function qn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Kn(e,t,n,r){Se(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Qn(e){Ur(e,0)}function Yn(e){if(G(wi(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Kn(t,Gn,e,_e(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},xr={},Ir={};function Er(e){if(xr[e])return xr[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Nr=Er("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),s(t,[e])}for(var Dr=0;Dr<Rr.length;Dr++){var Or=Rr[Dr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Sr,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(je.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function qr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[jr]){e[jr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||qr(t,!1,e),qr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,qr("selectionchange",!1,t))}}function zr(e,t,n,r){switch($t(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Re((function(){var r=a,i=_e(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Sr:case Tr:case Cr:s=mn;break;case Nr:s=An;break;case"scroll":s=fn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Pe(p,f))&&l.push(Kr(p,v,d)))),h)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==s?u:wi(s),d=null==c?u:wi(c),(u=new l(v,p+"leave",s,n,i)).target=h,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,s&&c)e:{for(f=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=f;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)f=Gr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Gr(l),f=Gr(f)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==h&&Qr(o,h,c,l,!0)}if("select"===(s=(u=r?wi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=$n;else if(Wn(u))if(Jn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Kn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?wi(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,wr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?qn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(m=Hr(r,k)).length&&(k=new wn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=jn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&qn(e,t)?(e=en(),Zt=Xt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,yi="__reactListeners$"+hi,mi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function _i(e){return e[di]||null}var bi=[],xi=-1;function Ii(e){return{current:e}}function Ei(e){0>xi||(e.current=bi[xi],bi[xi]=null,xi--)}function Si(e,t){xi++,bi[xi]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ni=Ii(!1),Ai=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ei(Ni),Ei(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Si(Ci,e),Si(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ci),Si(Ci,e)):Ei(Ni),Si(Ni,n)}var Ui=null,Vi=!1,qi=!1;function ji(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!qi&&null!==Ui){qi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,Bi),i}finally{kt=t,qi=!1}}return null}var zi=[],Wi=0,Ki=null,Hi=0,Gi=[],Qi=0,Yi=null,$i=1,Ji="";function Xi(e,t){zi[Wi++]=Hi,zi[Wi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Gi[Qi++]=$i,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Yi=e;var r=$i;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else $i=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=zi[--Wi],zi[Wi]=null,Hi=zi[--Wi],zi[Wi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=w.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ii(null),ga=null,ka=null,wa=null;function _a(){wa=ka=ga=null}function ba(e){var t=ma.current;Ei(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,wa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(wa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var h=i.baseState;for(o=0,l=c=s=null,u=a;;){var f=u.lane,d=u.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[u]:f.push(u))}else d={eventTime:d,lane:f,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=h):l=l.next=d,o|=f;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(f=u).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(s=h),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=h}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function qa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ja={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Da(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Da(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Da(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function za(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Pi(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ja,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ja.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Pi(t)?Ai:Ci.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(qa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ja.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case b:return(t=Uc(t,e.mode,n)).return=e,t;case P:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case b:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case b:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,h=a,v=a=0,y=null;null!==h&&v<u.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var m=d(i,h,u[v],s);if(null===m){null===h&&(h=y);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,h=y}if(v===u.length)return n(i,h),ia&&Xi(i,v),c;if(null===h){for(;v<u.length;v++)null!==(h=f(i,u[v],s))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return ia&&Xi(i,v),c}for(h=r(i,h);v<u.length;v++)null!==(y=p(h,i,v,u[v],s))&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var h=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===h?l=k:h.sibling=k,h=k,v=m}if(g.done)return n(i,v),ia&&Xi(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=f(i,g.value,c))&&(u=o(g,u,y),null===h?l=g:h.sibling=g,h=g);return ia&&Xi(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Oc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case b:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Ya(!0),Ja=Ya(!1),Xa={},Za=Ii(Xa),eo=Ii(Xa),to=Ii(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Si(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Si(eo,e),Si(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=w.ReactCurrentDispatcher,fo=w.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,wo=0,_o=0;function bo(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,wo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,ho.current=cu,e=n(r,i)}while(ko)}if(ho.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==wo;return wo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var h=l.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=f,u=r):c=c.next=f,vo.lanes|=h,Ms|=h}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Po(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Vo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function qo(){return To().memoizedState}function jo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function zo(e,t){return jo(8390656,8,e,t)}function Wo(e,t){return Bo(2048,8,e,t)}function Ko(e,t){return Bo(4,2,e,t)}function Ho(e,t){return Bo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Go.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useInsertionEffect:bo,useLayoutEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useMutableSource:bo,useSyncExternalStore:bo,useId:bo,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=Ns.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:$o,useContext:Ea,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Jo,useReducer:No,useRef:qo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(To(),yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:$o,useContext:Ea,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Jo,useReducer:Ao,useRef:qo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===yo?t.memoizedState=e:Xo(t,yo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Da(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ws||(Ws=!0,Ks=r),fu(0,t)},n}function vu(e,t,n){(n=Da(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Da(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=w.ReactCurrentOwner,wu=!1;function _u(e,t,n,r){t.child=null===e?Ja(t,null,n,r):$a(t,e.child,n,r)}function bu(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=Eo(),null===e||wu?(ia&&n&&ea(t),t.flags|=1,_u(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Wu(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wu(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Tu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Ds,Ps),Ps|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Ds,Ps),Ps|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Ds,Ps),Ps|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Ds,Ps),Ps|=r;return _u(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Pi(n)?Ai:Ci.current;return a=Ri(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=Eo(),null===e||wu?(ia&&r&&ea(t),t.flags|=1,_u(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Cu(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)zu(e,t),za(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Ri(t,c=Pi(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Wa(t,o,r,c),Aa=!1;var f=t.memoizedState;o.state=f,Fa(t,r,o,i),s=t.memoizedState,u!==r||f!==s||Ni.current||Aa?("function"===typeof l&&(qa(t,n,l,r),s=t.memoizedState),(u=Aa||Ba(t,n,u,r,f,s,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Ri(t,s=Pi(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==h||f!==s)&&Wa(t,o,r,s),Aa=!1,f=t.memoizedState,o.state=f,Fa(t,r,o,i);var p=t.memoizedState;u!==h||f!==p||Ni.current||Aa?("function"===typeof d&&(qa(t,n,d,r),p=t.memoizedState),(c=Aa||Ba(t,n,c,r,f,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):_u(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Ru(e,t,n,r,i){return da(),pa(i),t.flags|=256,_u(e,t,n,r),t.child}var Pu,Du,Ou,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=hu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=hu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),wu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nc(r,e,i,-1))}return vc(),Vu(e,t,u,r=hu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=$i,Gi[Qi++]=Ji,Gi[Qi++]=Yi,$i=e.id,Ji=e.overflow,Yi=t),t=Uu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Dc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Dc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function ju(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(_u(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qu(e,n,t);else if(19===e.tag)qu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ju(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ju(t,!0,n,null,a);break;case"together":ju(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ku(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Pi(t.type)&&Di(),Hu(t),null;case 3:return r=t.stateNode,io(),Ei(Ni),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Du(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[fi]=t,e[di]=r,Pu(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Os&&(Os=3):vc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),null===e&&Br(t.stateNode.containerInfo),Hu(t),null;case 10:return ba(t.type._context),Hu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Ku(o,!1);else{if(0!==Os||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Ku(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Bs&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ku(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Je()-o.renderingStartTime>Bs&&1073741824!==n&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=uo.current,Si(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ps)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ni),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return ba(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Du=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,$u=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Xu=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,hs=!1;function fs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:$u||Zu(n,t);case 6:var r=ls,i=hs;ls=null,fs(e,t,n),hs=i,null!==(ls=r)&&(hs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(hs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=hs,ls=n.stateNode.containerInfo,hs=!0,fs(e,t,n),ls=r,hs=i;break;case 0:case 11:case 14:case 15:if(!$u&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}fs(e,t,n);break;case 1:if(!$u&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}fs(e,t,n);break;case 21:fs(e,t,n);break;case 22:1&n.mode?($u=(r=$u)||null!==n.memoizedState,fs(e,t,n),$u=r):fs(e,t,n);break;default:fs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,hs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ms(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(y){Ic(e,e.return,y)}try{ns(5,e,e.return)}catch(y){Ic(e,e.return,y)}}break;case 1:vs(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(vs(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(y){Ic(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var h=c[u],f=c[u+1];"style"===h?ye(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Ic(e,e.return,y)}}break;case 6:if(vs(t,e),ms(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Ic(e,e.return,y)}}break;case 3:if(vs(t,e),ms(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(y){Ic(e,e.return,y)}break;case 4:default:vs(t,e),ms(e);break;case 13:vs(t,e),ms(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(js=Je())),4&r&&ps(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($u=(l=$u)||h,vs(t,e),$u=l):vs(t,e),ms(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Xu=e,h=e.child;null!==h;){for(f=Xu=h;null!==Xu;){switch(p=(d=Xu).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ic(r,n,y)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){_s(f);continue}}null!==p?(p.return=d,Xu=p):_s(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=f.stateNode,u=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Ic(e,e.return,y)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(y){Ic(e,e.return,y)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vs(t,e),ms(e),4&r&&ps(e);case 21:}}function ms(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Xu=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Xu;){var i=Xu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||$u;u=Yu;var c=$u;if(Yu=o,($u=s)&&!c)for(Xu=i;null!==Xu;)s=(o=Xu).child,22===o.tag&&null!==o.memoizedState?bs(i):null!==s?(s.return=o,Xu=s):bs(i);for(;null!==a;)Xu=a,ks(a,t,n),a=a.sibling;Xu=i,Yu=u,$u=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xu=a):ws(e)}}function ws(e){for(;null!==Xu;){var t=Xu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$u||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$u)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&Bt(f)}}}break;default:throw Error(a(163))}$u||512&t.flags&&is(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Xu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xu=n;break}Xu=t.return}}function _s(e){for(;null!==Xu;){var t=Xu;if(t===e){Xu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xu=n;break}Xu=t.return}}function bs(e){for(;null!==Xu;){var t=Xu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{is(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Xu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Xu=u;break}Xu=t.return}}var xs,Is=Math.ceil,Es=w.ReactCurrentDispatcher,Ss=w.ReactCurrentOwner,Ts=w.ReactCurrentBatchConfig,Cs=0,Ns=null,As=null,Rs=0,Ps=0,Ds=Ii(0),Os=0,Ls=null,Ms=0,Fs=0,Us=0,Vs=null,qs=null,js=0,Bs=1/0,zs=null,Ws=!1,Ks=null,Hs=null,Gs=!1,Qs=null,Ys=0,$s=0,Js=null,Xs=-1,Zs=0;function ec(){return 0!==(6&Cs)?Je():-1!==Xs?Xs:Xs=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Rs?Rs&-Rs:null!==va.transition?(0===Zs&&(Zs=vt()),Zs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nc(e,t,n,r){if(50<$s)throw $s=0,Js=null,Error(a(185));mt(e,n,r),0!==(2&Cs)&&e===Ns||(e===Ns&&(0===(2&Cs)&&(Fs|=n),4===Os&&uc(e,Rs)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(Bs=Je()+500,Vi&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ft(e,e===Ns?Rs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,ji(e)}(sc.bind(null,e)):ji(sc.bind(null,e)),oi((function(){0===(6&Cs)&&Bi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xs=-1,Zs=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(bc()&&e.callbackNode!==n)return null;var r=ft(e,e===Ns?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Cs;Cs|=2;var o=pc();for(Ns===e&&Rs===t||(zs=null,Bs=Je()+500,fc(e,t));;)try{gc();break}catch(s){dc(e,s)}_a(),Es.current=o,Cs=i,null!==As?t=0:(Ns=null,Rs=0,t=Os)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,fc(e,0),uc(e,r),rc(e,Je()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,fc(e,0),uc(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,qs,zs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=js+500-Je())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,qs,zs),t);break}_c(e,qs,zs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,qs,zs),r);break}_c(e,qs,zs);break;default:throw Error(a(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=qs,qs=n,null!==t&&oc(t)),e}function oc(e){null===qs?qs=e:qs.push.apply(qs,e)}function uc(e,t){for(t&=~Us,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));bc();var t=ft(e,0);if(0===(1&t))return rc(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,fc(e,0),uc(e,t),rc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,qs,zs),rc(e,Je()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(Bs=Je()+500,Vi&&Bi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&bc();var t=Cs;Cs|=1;var n=Ts.transition,r=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=r,Ts.transition=n,0===(6&(Cs=t))&&Bi()}}function hc(){Ps=Ds.current,Ei(Ds)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Ei(Ni),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:ba(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ns=e,As=e=Dc(e.current,null),Rs=Ps=t,Os=0,Ls=null,Us=Fs=Ms=0,qs=Vs=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function dc(e,t){for(;;){var n=As;try{if(_a(),ho.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,wo=0,Ss.current=null,null===n||null===n.return){Os=1,Ls=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=s,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Os&&(Os=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(w){t=w,As===n&&null!==n&&(As=n=n.return);continue}break}}function pc(){var e=Es.current;return Es.current=ou,null===e?ou:e}function vc(){0!==Os&&3!==Os&&2!==Os||(Os=4),null===Ns||0===(268435455&Ms)&&0===(268435455&Fs)||uc(Ns,Rs)}function yc(e,t){var n=Cs;Cs|=2;var r=pc();for(Ns===e&&Rs===t||(zs=null,fc(e,t));;)try{mc();break}catch(i){dc(e,i)}if(_a(),Cs=n,Es.current=r,null!==As)throw Error(a(261));return Ns=null,Rs=0,Os}function mc(){for(;null!==As;)kc(As)}function gc(){for(;null!==As&&!Ye();)kc(As)}function kc(e){var t=xs(e.alternate,e,Ps);e.memoizedProps=e.pendingProps,null===t?wc(e):As=t,Ss.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gu(n,t,Ps)))return void(As=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Os=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Os&&(Os=5)}function _c(e,t,n){var r=kt,i=Ts.transition;try{Ts.transition=null,kt=1,function(e,t,n,r){do{bc()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(As=Ns=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gs||(Gs=!0,Nc(tt,(function(){return bc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Ss.current=null,function(e,t){if(ei=Wt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var u=0,s=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(s=u+i),f!==o||0!==r&&3!==f.nodeType||(c=u+r),3===f.nodeType&&(u+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++h===r&&(c=u),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Xu=t;null!==Xu;)if(e=(t=Xu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xu=e;else for(;null!==Xu;){t=Xu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(_){Ic(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Xu=e;break}Xu=t.return}v=ts,ts=!1}(e,n),ys(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),$e(),Cs=s,kt=u,Ts.transition=o}else e.current=n;if(Gs&&(Gs=!1,Qs=e,Ys=i),o=e.pendingLanes,0===o&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Ws)throw Ws=!1,e=Ks,Ks=null,e;0!==(1&Ys)&&0!==e.tag&&bc(),o=e.pendingLanes,0!==(1&o)?e===Js?$s++:($s=0,Js=e):$s=0,Bi()}(e,t,n,r)}finally{Ts.transition=i,kt=r}return null}function bc(){if(null!==Qs){var e=wt(Ys),t=Ts.transition,n=kt;try{if(Ts.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,Ys=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Xu=e.current;null!==Xu;){var o=Xu,u=o.child;if(0!==(16&Xu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Xu=l;null!==Xu;){var h=Xu;switch(h.tag){case 0:case 11:case 15:ns(8,h,o)}var f=h.child;if(null!==f)f.return=h,Xu=f;else for(;null!==Xu;){var d=(h=Xu).sibling,p=h.return;if(as(h),h===l){Xu=null;break}if(null!==d){d.return=p,Xu=d;break}Xu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Xu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Xu=u;else e:for(;null!==Xu;){if(0!==(2048&(o=Xu).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Xu=g;break e}Xu=o.return}}var k=e.current;for(Xu=k;null!==Xu;){var w=(u=Xu).child;if(0!==(2064&u.subtreeFlags)&&null!==w)w.return=u,Xu=w;else e:for(u=k;null!==Xu;){if(0!==(2048&(s=Xu).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(b){Ic(s,s.return,b)}if(s===u){Xu=null;break e}var _=s.sibling;if(null!==_){_.return=s.return,Xu=_;break e}Xu=s.return}}if(Cs=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(b){}r=!0}return r}finally{kt=n,Ts.transition=t}}return!1}function xc(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(mt(e,1,t),rc(e,t))}function Ic(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(mt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Rs&n)===n&&(4===Os||3===Os&&(130023424&Rs)===Rs&&500>Je()-js?fc(e,0):Us|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Na(e,t))&&(mt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function Nc(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Ac(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Lc(n.children,i,o,t);case I:u=8,i|=8;break;case E:return(e=Rc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=Rc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Rc(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case C:u=11;break e;case R:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function jc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:b,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,a,o,u,s){return(e=qc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=Da(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,mt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Da(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}xs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Si(uo,1&uo.current),null!==(e=Wu(e,t,n))?e.sibling:null);Si(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Wu(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zu(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=ja,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),_u(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=bu(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ru(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Ru(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Wu(e,t,n);break e}_u(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Su(e,t),_u(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):_u(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,bu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return _u(e,t,t.pendingProps,n),t.child;case 8:case 12:return _u(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Wu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Da(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}_u(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Ea(i)),t.flags|=1,_u(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xu(e,t,r,i=ya(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),zu(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),za(t,r,i),Ka(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return Bu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=qc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),lc((function(){Wc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Wc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Je()),0===(6&Cs)&&(Bs=Je()+500,Bi()))}break;case 13:lc((function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},bt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},xt=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},It=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},be=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(a(90));G(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[ki,wi,_i,Se,Te,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return jc(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=qc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var w=k.prototype=new g;w.constructor=k,v(w,m.prototype),w.isPureReactComponent=!0;var _=Array.isArray,b=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,_(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",_(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)b.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function _(e){if(y=!1,w(e),!v)if(null!==r(c))v=!0,D(b);else{var t=r(l);null!==t&&O(_,t.startTime-e)}}function b(e,n){v=!1,y&&(y=!1,g(S),S=-1),p=!0;var a=d;try{for(w(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!N());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var u=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?f.callback=u:f===r(c)&&i(c),w(n)}else i(c);f=r(c)}if(null!==f)var s=!0;else{var h=r(l);null!==h&&O(_,h.startTime-n),s=!1}return s}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,E=null,S=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?x():(I=!1,E=null)}}else I=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=A,x=function(){P.postMessage(null)}}else x=function(){m(A,0)};function D(e){E=e,I||(I=!0,x())}function O(e,n){S=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(S),S=-1):y=!0,O(_,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,D(b))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".440c4889.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="netflix-clone:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var h=c[l];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){u=h;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var f=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=f.bind(null,u.onerror),u.onload=f.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/netflixclone9449/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunknetflix_clone=self.webpackChunknetflix_clone||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ht},SDK_VERSION:function(){return yr},_DEFAULT_ENTRY_NAME:function(){return rr},_addComponent:function(){return ur},_addOrOverwriteComponent:function(){return sr},_apps:function(){return ar},_clearComponents:function(){return fr},_components:function(){return or},_getProvider:function(){return lr},_registerComponent:function(){return cr},_removeServiceInstance:function(){return hr},deleteApp:function(){return wr},getApp:function(){return gr},getApps:function(){return kr},initializeApp:function(){return mr},onLog:function(){return xr},registerVersion:function(){return br},setLogLevel:function(){return Ir}});var t=n(791),r=n.t(t,2),i=n(250);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||u(e,t)||s()}var l=n(184);var h=function(){var e=c((0,t.useState)(!1),2),n=e[0],r=e[1],i=function(){window.scrollY>100?r(!0):r(!1)};return(0,t.useEffect)((function(){return window.addEventListener("scroll",i),function(){return window.removeEventListener("scroll",i)}}),[]),(0,l.jsx)("div",{className:"navbar ".concat(n&&"navbar-black"),children:(0,l.jsxs)("div",{className:"navbar-contents",children:[(0,l.jsx)("img",{className:"navbar-logo",src:"https://assets.stickpng.com/images/580b57fcd9996e24bc43c529.png",alt:""}),(0,l.jsx)("img",{className:"navbar-pro",src:"https://www.pngfind.com/pngs/m/676-6764065_default-profile-picture-transparent-hd-png-download.png",alt:""})]})})};function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(){d=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(A){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof p?t:p,o=Object.create(a.prototype),u=new T(i||[]);return r(o,"_invoke",{value:x(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var h={};function p(){}function v(){}function y(){}var m={};s(m,a,(function(){return this}));var g=Object.getPrototypeOf,k=g&&g(g(C([])));k&&k!==t&&n.call(k,a)&&(m=k);var w=y.prototype=p.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==f(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=I(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function I(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,I(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function C(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:N}}function N(){return{value:void 0,done:!0}}return v.prototype=y,r(w,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:v,configurable:!0}),v.displayName=s(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(b.prototype),s(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function p(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(Ch){return void n(Ch)}u.done?t(s):Promise.resolve(s).then(r,i)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){p(a,r,i,o,u,"next",e)}function u(e){p(a,r,i,o,u,"throw",e)}o(void 0)}))}}function y(e,t){return function(){return e.apply(t,arguments)}}var m,g=Object.prototype.toString,k=Object.getPrototypeOf,w=(m=Object.create(null),function(e){var t=g.call(e);return m[t]||(m[t]=t.slice(8,-1).toLowerCase())}),_=function(e){return e=e.toLowerCase(),function(t){return w(t)===e}},b=function(e){return function(t){return typeof t===e}},x=Array.isArray,I=b("undefined");var E=_("ArrayBuffer");var S=b("string"),T=b("function"),C=b("number"),N=function(e){return null!==e&&"object"===typeof e},A=function(e){if("object"!==w(e))return!1;var t=k(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},R=_("Date"),P=_("File"),D=_("Blob"),O=_("FileList"),L=_("URLSearchParams");function M(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.allOwnKeys,o=void 0!==a&&a;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),x(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var u,s=o?Object.getOwnPropertyNames(e):Object.keys(e),c=s.length;for(n=0;n<c;n++)u=s[n],t.call(null,e[u],u,e)}}function F(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}var U="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,V=function(e){return!I(e)&&e!==U};var q,j=(q="undefined"!==typeof Uint8Array&&k(Uint8Array),function(e){return q&&e instanceof q}),B=_("HTMLFormElement"),z=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),W=_("RegExp"),K=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};M(n,(function(n,i){!1!==t(n,i,e)&&(r[i]=n)})),Object.defineProperties(e,r)},H={isArray:x,isArrayBuffer:E,isBuffer:function(e){return null!==e&&!I(e)&&null!==e.constructor&&!I(e.constructor)&&T(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||g.call(e)===t||T(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&E(e.buffer)},isString:S,isNumber:C,isBoolean:function(e){return!0===e||!1===e},isObject:N,isPlainObject:A,isUndefined:I,isDate:R,isFile:P,isBlob:D,isRegExp:W,isFunction:T,isStream:function(e){return N(e)&&T(e.pipe)},isURLSearchParams:L,isTypedArray:j,isFileList:O,forEach:M,merge:function e(){for(var t=V(this)&&this||{},n=t.caseless,r={},i=function(t,i){var a=n&&F(r,i)||i;A(r[a])&&A(t)?r[a]=e(r[a],t):A(t)?r[a]=e({},t):x(t)?r[a]=t.slice():r[a]=t},a=0,o=arguments.length;a<o;a++)arguments[a]&&M(arguments[a],i);return r},extend:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.allOwnKeys;return M(t,(function(t,r){n&&T(t)?e[r]=y(t,n):e[r]=t}),{allOwnKeys:i}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,a,o,u={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],r&&!r(o,e,t)||u[o]||(t[o]=e[o],u[o]=!0);e=!1!==n&&k(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:w,kindOfTest:_,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(x(e))return e;var t=e.length;if(!C(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:B,hasOwnProperty:z,hasOwnProp:z,reduceDescriptors:K,freezeMethods:function(e){K(e,(function(t,n){if(T(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];T(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return x(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:F,global:U,isContextDefined:V,toJSONObject:function(e){var t=new Array(10);return function e(n,r){if(N(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;var i=x(n)?[]:{};return M(n,(function(t,n){var a=e(t,r+1);!I(a)&&(i[n]=a)})),t[r]=void 0,i}}return n}(e,0)}};function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Q(r.key),r)}}function $(e,t,n){return t&&Y(e.prototype,t),n&&Y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function J(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}H.inherits(J,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var X=J.prototype,Z={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){Z[e]={value:e}})),Object.defineProperties(J,Z),Object.defineProperty(X,"isAxiosError",{value:!0}),J.from=function(e,t,n,r,i,a){var o=Object.create(X);return H.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),J.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var ee=J,te=n(472);function ne(e){return H.isPlainObject(e)||H.isArray(e)}function re(e){return H.endsWith(e,"[]")?e.slice(0,-2):e}function ie(e,t,n){return e?e.concat(t).map((function(e,t){return e=re(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var ae=H.toFlatObject(H,{},null,(function(e){return/^is[A-Z]/.test(e)}));var oe=function(e,t,n){if(!H.isObject(e))throw new TypeError("target must be an object");t=t||new(te||FormData);var r,i=(n=H.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!H.isUndefined(t[e])}))).metaTokens,a=n.visitor||l,o=n.dots,u=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&((r=t)&&H.isFunction(r.append)&&"FormData"===r[Symbol.toStringTag]&&r[Symbol.iterator]);if(!H.isFunction(a))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(H.isDate(e))return e.toISOString();if(!s&&H.isBlob(e))throw new ee("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(e)||H.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,r){var a=e;if(e&&!r&&"object"===typeof e)if(H.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(H.isArray(e)&&function(e){return H.isArray(e)&&!e.some(ne)}(e)||H.isFileList(e)||H.endsWith(n,"[]")&&(a=H.toArray(e)))return n=re(n),a.forEach((function(e,r){!H.isUndefined(e)&&null!==e&&t.append(!0===u?ie([n],r,o):null===u?n:n+"[]",c(e))})),!1;return!!ne(e)||(t.append(ie(r,n,o),c(e)),!1)}var h=[],f=Object.assign(ae,{defaultVisitor:l,convertValue:c,isVisitable:ne});if(!H.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!H.isUndefined(n)){if(-1!==h.indexOf(n))throw Error("Circular reference detected in "+r.join("."));h.push(n),H.forEach(n,(function(n,i){!0===(!(H.isUndefined(n)||null===n)&&a.call(t,n,H.isString(i)?i.trim():i,r,f))&&e(n,r?r.concat(i):[i])})),h.pop()}}(e),t};function ue(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function se(e,t){this._pairs=[],e&&oe(e,this,t)}var ce=se.prototype;ce.append=function(e,t){this._pairs.push([e,t])},ce.toString=function(e){var t=e?function(t){return e.call(this,t,ue)}:ue;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var le=se;function he(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function fe(e,t,n){if(!t)return e;var r,i=n&&n.encode||he,a=n&&n.serialize;if(r=a?a(t,n):H.isURLSearchParams(t)?t.toString():new le(t,n).toString(i)){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var de=function(){function e(){G(this,e),this.handlers=[]}return $(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){H.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),pe=de,ve={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ye="undefined"!==typeof URLSearchParams?URLSearchParams:le,me=FormData,ge=function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),ke="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,we={isBrowser:!0,classes:{URLSearchParams:ye,FormData:me,Blob:Blob},isStandardBrowserEnv:ge,isStandardBrowserWebWorkerEnv:ke,protocols:["http","https","file","blob","url","data"]};var _e=function(e){function t(e,n,r,i){var a=e[i++],o=Number.isFinite(+a),u=i>=e.length;return a=!a&&H.isArray(r)?r.length:a,u?(H.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):(r[a]&&H.isObject(r[a])||(r[a]=[]),t(e,n,r[a],i)&&H.isArray(r[a])&&(r[a]=function(e){var t,n,r={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)r[n=i[t]]=e[n];return r}(r[a])),!o)}if(H.isFormData(e)&&H.isFunction(e.entries)){var n={};return H.forEachEntry(e,(function(e,r){t(function(e){return H.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null},be={"Content-Type":void 0};var xe={transitional:ve,adapter:["xhr","http"],transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=H.isObject(e);if(a&&H.isHTMLForm(e)&&(e=new FormData(e)),H.isFormData(e))return i&&i?JSON.stringify(_e(e)):e;if(H.isArrayBuffer(e)||H.isBuffer(e)||H.isStream(e)||H.isFile(e)||H.isBlob(e))return e;if(H.isArrayBufferView(e))return e.buffer;if(H.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return oe(e,new we.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return we.isNode&&H.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=H.isFileList(e))||r.indexOf("multipart/form-data")>-1){var o=this.env&&this.env.FormData;return oe(n?{"files[]":e}:e,o&&new o,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),function(e,t,n){if(H.isString(e))try{return(t||JSON.parse)(e),H.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||xe.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&H.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(i){if("SyntaxError"===a.name)throw ee.from(a,ee.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:we.classes.FormData,Blob:we.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};H.forEach(["delete","get","head"],(function(e){xe.headers[e]={}})),H.forEach(["post","put","patch"],(function(e){xe.headers[e]=H.merge(be)}));var Ie=xe,Ee=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Se=Symbol("internals");function Te(e){return e&&String(e).trim().toLowerCase()}function Ce(e){return!1===e||null==e?e:H.isArray(e)?e.map(Ce):String(e)}function Ne(e,t,n,r){return H.isFunction(r)?r.call(this,t,n):H.isString(t)?H.isString(r)?-1!==t.indexOf(r):H.isRegExp(r)?r.test(t):void 0:void 0}var Ae=function(e,t){function n(e){G(this,n),e&&this.set(e)}return $(n,[{key:"set",value:function(e,t,n){var r=this;function i(e,t,n){var i=Te(t);if(!i)throw new Error("header name must be a non-empty string");var a=H.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=Ce(e))}var a=function(e,t){return H.forEach(e,(function(e,n){return i(e,n,t)}))};return H.isPlainObject(e)||e instanceof this.constructor?a(e,t):H.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z]+$/.test(e.trim())?a(function(e){var t,n,r,i={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&Ee[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)})),i}(e),t):null!=e&&i(t,e,n),this}},{key:"get",value:function(e,t){if(e=Te(e)){var n=H.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(H.isFunction(t))return t.call(this,r,n);if(H.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=Te(e)){var n=H.findKey(this,e);return!(!n||t&&!Ne(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function i(e){if(e=Te(e)){var i=H.findKey(n,e);!i||t&&!Ne(0,n[i],i,t)||(delete n[i],r=!0)}}return H.isArray(e)?e.forEach(i):i(e),r}},{key:"clear",value:function(){return Object.keys(this).forEach(this.delete.bind(this))}},{key:"normalize",value:function(e){var t=this,n={};return H.forEach(this,(function(r,i){var a=H.findKey(n,i);if(a)return t[a]=Ce(r),void delete t[i];var o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();o!==i&&delete t[i],t[o]=Ce(r),n[o]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.constructor).concat.apply(e,[this].concat(n))}},{key:"toJSON",value:function(e){var t=Object.create(null);return H.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&H.isArray(n)?n.join(", "):n)})),t}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=c(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[Se]=this[Se]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=Te(e);t[r]||(!function(e,t){var n=H.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return H.isArray(e)?e.forEach(r):r(e),this}}]),n}();Ae.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]),H.freezeMethods(Ae.prototype),H.freezeMethods(Ae);var Re=Ae;function Pe(e,t){var n=this||Ie,r=t||n,i=Re.from(r.headers),a=r.data;return H.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function De(e){return!(!e||!e.__CANCEL__)}function Oe(e,t,n){ee.call(this,null==e?"canceled":e,ee.ERR_CANCELED,t,n),this.name="CanceledError"}H.inherits(Oe,ee,{__CANCEL__:!0});var Le=Oe;var Me=we.isStandardBrowserEnv?{write:function(e,t,n,r,i,a){var o=[];o.push(e+"="+encodeURIComponent(t)),H.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),H.isString(r)&&o.push("path="+r),H.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Fe(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var Ue=we.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=H.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};var Ve=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(u){var s=Date.now(),c=i[o];n||(n=s),r[a]=u,i[a]=s;for(var l=o,h=0;l!==a;)h+=r[l++],l%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),!(s-n<t)){var f=c&&s-c;return f?Math.round(1e3*h/f):void 0}}};function qe(e,t){var n=0,r=Ve(50,250);return function(i){var a=i.loaded,o=i.lengthComputable?i.total:void 0,u=a-n,s=r(u);n=a;var c={loaded:a,total:o,progress:o?a/o:void 0,bytes:u,rate:s||void 0,estimated:s&&o&&a<=o?(o-a)/s:void 0,event:i};c[t?"download":"upload"]=!0,e(c)}}var je="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,i=e.data,a=Re.from(e.headers).normalize(),o=e.responseType;function u(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}H.isFormData(i)&&(we.isStandardBrowserEnv||we.isStandardBrowserWebWorkerEnv)&&a.setContentType(!1);var s=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(c+":"+l))}var h=Fe(e.baseURL,e.url);function f(){if(s){var r=Re.from("getAllResponseHeaders"in s&&s.getAllResponseHeaders());!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new ee("Request failed with status code "+n.status,[ee.ERR_BAD_REQUEST,ee.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),u()}),(function(e){n(e),u()}),{data:o&&"text"!==o&&"json"!==o?s.response:s.responseText,status:s.status,statusText:s.statusText,headers:r,config:e,request:s}),s=null}}if(s.open(e.method.toUpperCase(),fe(h,e.params,e.paramsSerializer),!0),s.timeout=e.timeout,"onloadend"in s?s.onloadend=f:s.onreadystatechange=function(){s&&4===s.readyState&&(0!==s.status||s.responseURL&&0===s.responseURL.indexOf("file:"))&&setTimeout(f)},s.onabort=function(){s&&(n(new ee("Request aborted",ee.ECONNABORTED,e,s)),s=null)},s.onerror=function(){n(new ee("Network Error",ee.ERR_NETWORK,e,s)),s=null},s.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||ve;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new ee(t,r.clarifyTimeoutError?ee.ETIMEDOUT:ee.ECONNABORTED,e,s)),s=null},we.isStandardBrowserEnv){var d=(e.withCredentials||Ue(h))&&e.xsrfCookieName&&Me.read(e.xsrfCookieName);d&&a.set(e.xsrfHeaderName,d)}void 0===i&&a.setContentType(null),"setRequestHeader"in s&&H.forEach(a.toJSON(),(function(e,t){s.setRequestHeader(t,e)})),H.isUndefined(e.withCredentials)||(s.withCredentials=!!e.withCredentials),o&&"json"!==o&&(s.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&s.addEventListener("progress",qe(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&s.upload&&s.upload.addEventListener("progress",qe(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){s&&(n(!t||t.type?new Le(null,e,s):t),s.abort(),s=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var p=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(h);p&&-1===we.protocols.indexOf(p)?n(new ee("Unsupported protocol "+p+":",ee.ERR_BAD_REQUEST,e)):s.send(i||null)}))},Be={http:null,xhr:je};H.forEach(Be,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));var ze=function(e){for(var t,n,r=(e=H.isArray(e)?e:[e]).length,i=0;i<r&&(t=e[i],!(n=H.isString(t)?Be[t.toLowerCase()]:t));i++);if(!n){if(!1===n)throw new ee("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(H.hasOwnProp(Be,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"))}if(!H.isFunction(n))throw new TypeError("adapter is not a function");return n};function We(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Le(null,e)}function Ke(e){return We(e),e.headers=Re.from(e.headers),e.data=Pe.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ze(e.adapter||Ie.adapter)(e).then((function(t){return We(e),t.data=Pe.call(e,e.transformResponse,t),t.headers=Re.from(t.headers),t}),(function(t){return De(t)||(We(e),t&&t.response&&(t.response.data=Pe.call(e,e.transformResponse,t.response),t.response.headers=Re.from(t.response.headers))),Promise.reject(t)}))}var He=function(e){return e instanceof Re?e.toJSON():e};function Ge(e,t){t=t||{};var n={};function r(e,t,n){return H.isPlainObject(e)&&H.isPlainObject(t)?H.merge.call({caseless:n},e,t):H.isPlainObject(t)?H.merge({},t):H.isArray(t)?t.slice():t}function i(e,t,n){return H.isUndefined(t)?H.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function a(e,t){if(!H.isUndefined(t))return r(void 0,t)}function o(e,t){return H.isUndefined(t)?H.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function u(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}var s={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:function(e,t){return i(He(e),He(t),!0)}};return H.forEach(Object.keys(e).concat(Object.keys(t)),(function(r){var a=s[r]||i,o=a(e[r],t[r],r);H.isUndefined(o)&&a!==u||(n[r]=o)})),n}var Qe="1.2.2",Ye={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){Ye[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var $e={};Ye.transitional=function(e,t,n){function r(e,t){return"[Axios v1.2.2] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,a){if(!1===e)throw new ee(r(i," has been removed"+(t?" in "+t:"")),ee.ERR_DEPRECATED);return t&&!$e[i]&&($e[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};var Je={assertOptions:function(e,t,n){if("object"!==typeof e)throw new ee("options must be an object",ee.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=t[a];if(o){var u=e[a],s=void 0===u||o(u,a,e);if(!0!==s)throw new ee("option "+a+" must be "+s,ee.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new ee("Unknown option "+a,ee.ERR_BAD_OPTION)}},validators:Ye},Xe=Je.validators,Ze=function(){function e(t){G(this,e),this.defaults=t,this.interceptors={request:new pe,response:new pe}}return $(e,[{key:"request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n,r=t=Ge(this.defaults,t),i=r.transitional,a=r.paramsSerializer,o=r.headers;void 0!==i&&Je.assertOptions(i,{silentJSONParsing:Xe.transitional(Xe.boolean),forcedJSONParsing:Xe.transitional(Xe.boolean),clarifyTimeoutError:Xe.transitional(Xe.boolean)},!1),void 0!==a&&Je.assertOptions(a,{encode:Xe.function,serialize:Xe.function},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase(),(n=o&&H.merge(o.common,o[t.method]))&&H.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete o[e]})),t.headers=Re.concat(n,o);var u=[],s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,u.unshift(e.fulfilled,e.rejected))}));var c,l=[];this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));var h,f=0;if(!s){var d=[Ke.bind(this),void 0];for(d.unshift.apply(d,u),d.push.apply(d,l),h=d.length,c=Promise.resolve(t);f<h;)c=c.then(d[f++],d[f++]);return c}h=u.length;var p=t;for(f=0;f<h;){var v=u[f++],y=u[f++];try{p=v(p)}catch(Ch){y.call(this,Ch);break}}try{c=Ke.call(this,p)}catch(Ch){return Promise.reject(Ch)}for(f=0,h=l.length;f<h;)c=c.then(l[f++],l[f++]);return c}},{key:"getUri",value:function(e){return fe(Fe((e=Ge(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();H.forEach(["delete","get","head","options"],(function(e){Ze.prototype[e]=function(t,n){return this.request(Ge(n||{},{method:e,url:t,data:(n||{}).data}))}})),H.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Ge(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Ze.prototype[e]=t(),Ze.prototype[e+"Form"]=t(!0)}));var et=Ze,tt=function(){function e(t){if(G(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,i){r.reason||(r.reason=new Le(e,t,i),n(r.reason))}))}return $(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t;return{token:new e((function(e){t=e})),cancel:t}}}]),e}();var nt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(nt).forEach((function(e){var t=c(e,2),n=t[0],r=t[1];nt[r]=n}));var rt=nt;var it=function e(t){var n=new et(t),r=y(et.prototype.request,n);return H.extend(r,et.prototype,n,{allOwnKeys:!0}),H.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Ge(t,n))},r}(Ie);it.Axios=et,it.CanceledError=Le,it.CancelToken=tt,it.isCancel=De,it.VERSION=Qe,it.toFormData=oe,it.AxiosError=ee,it.Cancel=it.CanceledError,it.all=function(e){return Promise.all(e)},it.spread=function(e){return function(t){return e.apply(null,t)}},it.isAxiosError=function(e){return H.isObject(e)&&!0===e.isAxiosError},it.mergeConfig=Ge,it.AxiosHeaders=Re,it.formToJSON=function(e){return _e(H.isHTMLForm(e)?new FormData(e):e)},it.HttpStatusCode=rt,it.default=it;var at=it.create({baseURL:"https://api.themoviedb.org/3"}),ot="b399250662d8a83531acda6fcf1cbbd6",ut={fetchTrending:"/trending/all/week?api_key=".concat(ot,"&language=en-US"),fetchNetflixOriginals:"/discover/tv?api_key=".concat(ot,"&with_networks=213"),fetchTopRated:"/movie/top_rated?api_key=".concat(ot,"&language=en-US"),fetchActionMovies:"/discover/movie?api_key=".concat(ot,"&with_genres=28"),fetchComedyMovies:"/discover/movie?api_key=".concat(ot,"&with_genres=35"),fetchHorrorMovies:"/discover/movie?api_key=".concat(ot,"&with_genres=27"),fetchRomanceMovies:"/discover/movie?api_key=".concat(ot,"&with_genres=10749"),fetchDocumentaries:"/discover/movie?api_key=".concat(ot,"&with_genres=99")};var st=function(){var e,n,r=c((0,t.useState)([]),2),i=r[0],a=r[1];return(0,t.useEffect)((function(){function e(){return(e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at.get(ut.fetchNetflixOriginals);case 2:return t=e.sent,a(t.data.results[Math.floor(Math.random()*t.data.results.length-1)]),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,l.jsxs)("header",{className:"banner",style:{backgroundSize:"cover",backgroundImage:'url("https://image.tmdb.org/t/p/original/'.concat(null===i||void 0===i?void 0:i.backdrop_path,'")'),backgroundPosition:"center center"},children:[(0,l.jsxs)("div",{className:"banner-contents",children:[(0,l.jsx)("h1",{className:"banner-title",children:(null===i||void 0===i?void 0:i.title)||(null===i||void 0===i?void 0:i.name)||(null===i||void 0===i?void 0:i.original_name)}),(0,l.jsxs)("div",{className:"banner-buttons",children:[(0,l.jsx)("button",{className:"banner-button",children:"Play"}),(0,l.jsx)("button",{className:"banner-button",children:"My List"})]}),(0,l.jsx)("h2",{className:"banner-description",children:(e=null===i||void 0===i?void 0:i.overview,n=150,(null===e||void 0===e?void 0:e.length)>n?e.substr(0,n-1)+"...":e)})]}),(0,l.jsx)("div",{className:"banner-fadebutton"})]})};var ct=function(e){var n=e.title,r=e.fetchUrl,i=e.isLargeRow,a=void 0!==i&&i,o=c((0,t.useState)([]),2),u=o[0],s=o[1];return(0,t.useEffect)((function(){function e(){return(e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at.get(r);case 2:return t=e.sent,s(t.data.results),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r]),(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("h2",{children:n}),(0,l.jsx)("div",{className:"row-posters",children:u.map((function(e){return(a&&e.poster_path||!a&&e.backdrop_path)&&(0,l.jsx)("img",{className:"row-poster ".concat(a&&"row-posterlarge"),src:"".concat("https://image.tmdb.org/t/p/original/").concat(a?e.poster_path:e.backdrop_path),alt:e.name},e.id)}))})]})};var lt=function(){return(0,l.jsxs)("div",{className:"homescreen",children:[(0,l.jsx)(h,{}),(0,l.jsx)(st,{}),(0,l.jsx)(ct,{title:"NETFLIX ORIGINALS",fetchUrl:ut.fetchNetflixOriginals,isLargeRow:!0}),(0,l.jsx)(ct,{title:"Trending Now ",fetchUrl:ut.fetchTrending}),(0,l.jsx)(ct,{title:"Top Rated",fetchUrl:ut.fetchTopRated}),(0,l.jsx)(ct,{title:"Action Movies",fetchUrl:ut.fetchActionMovies}),(0,l.jsx)(ct,{title:"Comedy Movies",fetchUrl:ut.fetchComedyMovies}),(0,l.jsx)(ct,{title:"Horror Movies",fetchUrl:ut.fetchHorrorMovies}),(0,l.jsx)(ct,{title:"Romance Movies",fetchUrl:ut.fetchRomanceMovies}),(0,l.jsx)(ct,{title:"Documentaries",fetchUrl:ut.fetchDocumentaries})]})};function ht(e,t,n){return(t=Q(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ft(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pt(e,t){return pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pt(e,t)}function vt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pt(e,t)}function yt(e){return yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yt(e)}function mt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function gt(e,t){if(t&&("object"===f(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return dt(e)}function kt(e){var t=mt();return function(){var n,r=yt(e);if(t){var i=yt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return gt(this,n)}}function wt(e,t,n){return wt=mt()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&pt(i,n.prototype),i},wt.apply(null,arguments)}function _t(e){var t="function"===typeof Map?new Map:void 0;return _t=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return wt(e,arguments,yt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),pt(n,e)},_t(e)}var bt=!1,xt=!1,It="${JSCORE_VERSION}",Et=function(e,t){if(!e)throw St(t)},St=function(e){return new Error("Firebase Database ("+It+") INTERNAL ASSERT FAILED: "+e)},Tt=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ct={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,h=(3&a)<<4|u>>4,f=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Tt(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var h=u<<6&192|s;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Nt=function(e){var t=Tt(e);return Ct.encodeByteArray(t,!0)},At=function(e){return Nt(e).replace(/\./g,"")},Rt=function(e){try{return Ct.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Pt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Pt(e[n],t[n]));return e}function Dt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ot(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function Lt(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Mt(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ft(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ut(){var e=Dt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Vt(){return!0===bt||!0===xt}function qt(){try{return"object"===typeof indexedDB}catch(e){return!1}}var jt=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Bt=function(){try{return jt()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/netflixclone9449",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&Rt(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},zt=function(){var e;return null===(e=Bt())||void 0===e?void 0:e.config},Wt=function(){function e(){var t=this;G(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return $(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Kt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[At(JSON.stringify({alg:"none",type:"JWT"})),At(JSON.stringify(a)),""].join(".")}var Ht=function(e){vt(n,e);var t=kt(n);function n(e,r,i){var a;return G(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(dt(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(dt(a),Gt.prototype.create),a}return $(n)}(_t(Error)),Gt=function(){function e(t,n,r){G(this,e),this.service=t,this.serviceName=n,this.errors=r}return $(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Qt(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Ht(n,a,t);return o}}]),e}();function Qt(e,t){return e.replace(Yt,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Yt=/\{\$([^}]+)}/g;function $t(e){return JSON.parse(e)}function Jt(e){return JSON.stringify(e)}var Xt=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=$t(Rt(a[0])||""),n=$t(Rt(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function Zt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function en(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function tn(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function nn(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function rn(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(an(u)&&an(s)){if(!rn(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function an(e){return null!==e&&"object"===typeof e}function on(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function un(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function sn(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var cn=function(){function e(){G(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return $(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=f^l&(h^f),s=1518500249):(u=l^h^f,s=1859775393):p<60?(u=l&h|f&(l|h),s=2400959708):(u=l^h^f,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function ln(e,t){var n=new hn(e,t);return n.subscribe.bind(n)}var hn=function(){function e(t,n){var r=this;G(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return $(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=ft(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=fn),void 0===r.error&&(r.error=fn),void 0===r.complete&&(r.complete=fn);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function fn(){}var dn=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function pn(e,t){return"".concat(e," failed: ").concat(t," argument ")}function vn(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(pn(e,t)+"must be a valid function.")}function yn(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(pn(e,t)+"must be a valid context object.")}var mn=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function gn(e){return e&&e._delegate?e._delegate:e}function kn(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function wn(e){return function(e){if(Array.isArray(e))return o(e)}(e)||kn(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _n=function(){function e(t,n,r){G(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return $(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),bn="[DEFAULT]",xn=function(){function e(t,n){G(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return $(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Wt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:bn})}catch(s){}var t,n=ft(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(wn(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),wn(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=ft(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1],h=this.normalizeInstanceIdentifier(s);r===h&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=ft(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(AP){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===bn?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(AP){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn;return this.component?this.component.multipleInstances?e:bn:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var In,En,Sn=function(){function e(t){G(this,e),this.name=t,this.providers=new Map}return $(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new xn(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Tn=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(En||(En={}));var Cn={debug:En.DEBUG,verbose:En.VERBOSE,info:En.INFO,warn:En.WARN,error:En.ERROR,silent:En.SILENT},Nn=En.INFO,An=(ht(In={},En.DEBUG,"log"),ht(In,En.VERBOSE,"log"),ht(In,En.INFO,"info"),ht(In,En.WARN,"warn"),ht(In,En.ERROR,"error"),In),Rn=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=An[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Pn=function(){function e(t){G(this,e),this.name=t,this._logLevel=Nn,this._logHandler=Rn,this._userLogHandler=null,Tn.push(this)}return $(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in En))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Cn[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,En.DEBUG].concat(t)),this._logHandler.apply(this,[this,En.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,En.VERBOSE].concat(t)),this._logHandler.apply(this,[this,En.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,En.INFO].concat(t)),this._logHandler.apply(this,[this,En.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,En.WARN].concat(t)),this._logHandler.apply(this,[this,En.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,En.ERROR].concat(t)),this._logHandler.apply(this,[this,En.ERROR].concat(t))}}]),e}();function Dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function On(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(n),!0).forEach((function(t){ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ln,Mn;var Fn=new WeakMap,Un=new WeakMap,Vn=new WeakMap,qn=new WeakMap,jn=new WeakMap;var Bn={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Un.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Vn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function zn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Mn||(Mn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Hn(this),n),Kn(Fn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Kn(e.apply(Hn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Hn(this),t].concat(r));return Vn.set(a,t.sort?t.sort():[t]),Kn(a)}}function Wn(e){return"function"===typeof e?zn(e):(e instanceof IDBTransaction&&function(e){if(!Un.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Un.set(e,t)}}(e),t=e,(Ln||(Ln=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Bn):e);var t}function Kn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Kn(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Fn.set(t,e)})).catch((function(){})),jn.set(t,e),t}(e);if(qn.has(e))return qn.get(e);var t=Wn(e);return t!==e&&(qn.set(e,t),jn.set(t,e)),t}var Hn=function(e){return jn.get(e)};var Gn,Qn,Yn=["get","getKey","getAll","getAllKeys","count"],$n=["put","add","delete","clear"],Jn=new Map;function Xn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Jn.get(t))return Jn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=$n.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Yn.includes(n))){var a=function(){var e=v(d().mark((function e(t){var a,o,u,s,c,l,h=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=h.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=h[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Jn.set(t,a),a}}}Bn=function(e){return On(On({},e),{},{get:function(t,n,r){return Xn(t,n)||e.get(t,n,r)},has:function(t,n){return!!Xn(t,n)||e.has(t,n)}})}(Bn);var Zn=function(){function e(t){G(this,e),this.container=t}return $(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var er="@firebase/app",tr="0.9.0",nr=new Pn("@firebase/app"),rr="[DEFAULT]",ir=(ht(Gn={},er,"fire-core"),ht(Gn,"@firebase/app-compat","fire-core-compat"),ht(Gn,"@firebase/analytics","fire-analytics"),ht(Gn,"@firebase/analytics-compat","fire-analytics-compat"),ht(Gn,"@firebase/app-check","fire-app-check"),ht(Gn,"@firebase/app-check-compat","fire-app-check-compat"),ht(Gn,"@firebase/auth","fire-auth"),ht(Gn,"@firebase/auth-compat","fire-auth-compat"),ht(Gn,"@firebase/database","fire-rtdb"),ht(Gn,"@firebase/database-compat","fire-rtdb-compat"),ht(Gn,"@firebase/functions","fire-fn"),ht(Gn,"@firebase/functions-compat","fire-fn-compat"),ht(Gn,"@firebase/installations","fire-iid"),ht(Gn,"@firebase/installations-compat","fire-iid-compat"),ht(Gn,"@firebase/messaging","fire-fcm"),ht(Gn,"@firebase/messaging-compat","fire-fcm-compat"),ht(Gn,"@firebase/performance","fire-perf"),ht(Gn,"@firebase/performance-compat","fire-perf-compat"),ht(Gn,"@firebase/remote-config","fire-rc"),ht(Gn,"@firebase/remote-config-compat","fire-rc-compat"),ht(Gn,"@firebase/storage","fire-gcs"),ht(Gn,"@firebase/storage-compat","fire-gcs-compat"),ht(Gn,"@firebase/firestore","fire-fst"),ht(Gn,"@firebase/firestore-compat","fire-fst-compat"),ht(Gn,"fire-js","fire-js"),ht(Gn,"firebase","fire-js-all"),Gn),ar=new Map,or=new Map;function ur(e,t){try{e.container.addComponent(t)}catch(n){nr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function sr(e,t){e.container.addOrOverwriteComponent(t)}function cr(e){var t=e.name;if(or.has(t))return nr.debug("There were multiple attempts to register component ".concat(t,".")),!1;or.set(t,e);var n,r=ft(ar.values());try{for(r.s();!(n=r.n()).done;){ur(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function lr(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function hr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rr;lr(e,t).clearInstance(n)}function fr(){or.clear()}var dr=(ht(Qn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),ht(Qn,"bad-app-name","Illegal App name: '{$appName}"),ht(Qn,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),ht(Qn,"app-deleted","Firebase App named '{$appName}' already deleted"),ht(Qn,"no-options","Need to provide options, when not being deployed to hosting via source."),ht(Qn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ht(Qn,"invalid-log-argument","First argument to `onLog` must be null or a function."),ht(Qn,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),ht(Qn,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),ht(Qn,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),ht(Qn,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Qn),pr=new Gt("app","Firebase",dr),vr=function(){function e(t,n,r){var i=this;G(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _n("app",(function(){return i}),"PUBLIC"))}return $(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw pr.create("app-deleted",{appName:this._name})}}]),e}(),yr="9.15.0";function mr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:rr,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw pr.create("bad-app-name",{appName:String(a)});if(n||(n=zt()),!n)throw pr.create("no-options");var o=ar.get(a);if(o){if(rn(n,o.options)&&rn(i,o.config))return o;throw pr.create("duplicate-app",{appName:a})}var u,s=new Sn(a),c=ft(or.values());try{for(c.s();!(u=c.n()).done;){var l=u.value;s.addComponent(l)}}catch(f){c.e(f)}finally{c.f()}var h=new vr(n,i,s);return ar.set(a,h),h}function gr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rr,t=ar.get(e);if(!t&&e===rr)return mr();if(!t)throw pr.create("no-app",{appName:e});return t}function kr(){return Array.from(ar.values())}function wr(e){return _r.apply(this,arguments)}function _r(){return(_r=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!ar.has(n)){e.next=6;break}return ar.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function br(e,t,n){var r,i=null!==(r=ir[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void nr.warn(u.join(" "))}cr(new _n("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function xr(e,t){if(null!==e&&"function"!==typeof e)throw pr.create("invalid-log-argument");!function(e,t){var n,r=ft(Tn);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Cn[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:En[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Ir(e){var t;t=e,Tn.forEach((function(e){e.setLogLevel(t)}))}var Er="firebase-heartbeat-store",Sr=null;function Tr(){return Sr||(Sr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Kn(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Kn(u.result),e.oldVersion,e.newVersion,Kn(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Er)}}).catch((function(e){throw pr.create("idb-open",{originalErrorMessage:e.message})}))),Sr}function Cr(e){return Nr.apply(this,arguments)}function Nr(){return Nr=v(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Tr();case 3:return n=e.sent,e.abrupt("return",n.transaction(Er).objectStore(Er).get(Pr(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Ht?nr.warn(e.t0.message):(r=pr.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),nr.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Nr.apply(this,arguments)}function Ar(e,t){return Rr.apply(this,arguments)}function Rr(){return Rr=v(d().mark((function e(t,n){var r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Tr();case 3:return r=e.sent,i=r.transaction(Er,"readwrite"),a=i.objectStore(Er),e.next=8,a.put(n,Pr(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof Ht?nr.warn(e.t0.message):(o=pr.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),nr.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Rr.apply(this,arguments)}function Pr(e){return"".concat(e.name,"!").concat(e.options.appId)}var Dr=function(){function e(t){var n=this;G(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Ur(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return $(e,[{key:"triggerHeartbeat",value:function(){var e=v(d().mark((function e(){var t,n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Or(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=v(d().mark((function e(){var t,n,r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Or(),n=Lr(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=At(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Or(){return(new Date).toISOString().substring(0,10)}function Lr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=ft(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Vr(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Vr(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Mr,Fr,Ur=function(){function e(t){G(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return $(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Ch){t(Ch)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Cr(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=v(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Ar(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=v(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Ar(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(wn(r.heartbeats),wn(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Vr(e){return At(JSON.stringify({version:2,heartbeats:e})).length}Mr="",cr(new _n("platform-logger",(function(e){return new Zn(e)}),"PRIVATE")),cr(new _n("heartbeat",(function(e){return new Dr(e)}),"PRIVATE")),br(er,tr,Mr),br(er,tr,"esm2017"),br("fire-js","");var qr=function(){function e(t,n){var r=this;G(this,e),this._delegate=t,this.firebase=n,ur(t,new _n("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return $(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),wr(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rr;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rr;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){ur(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){sr(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),jr=(ht(Fr={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),ht(Fr,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Fr),Br=new Gt("app-compat","Firebase",jr);var zr=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=mr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Zt(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:br,setLogLevel:Ir,onLog:xr,apps:null,SDK_VERSION:yr,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(cr(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Br.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Pt(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Zt(n,e=e||rr))throw Br.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(qr);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Pt(n,e)},createSubscribe:ln,ErrorFactory:Gt,deepExtend:Pt}),n}(),Wr=new Pn("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Wr.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Kr=self.firebase.SDK_VERSION;Kr&&Kr.indexOf("LITE")>=0&&Wr.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Hr=zr;!function(e){br("@firebase/app-compat","0.2.0",e)}();function Gr(e){return a(e)||kn(e)||u(e)||s()}function Qr(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yt(e)););return e}function Yr(){return Yr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Qr(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Yr.apply(this,arguments)}Hr.registerVersion("firebase","9.15.0","app-compat");function $r(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Jr;Object.create;var Xr="facebook.com",Zr="github.com",ei="google.com",ti="password",ni="twitter.com",ri="EMAIL_SIGNIN",ii="PASSWORD_RESET",ai="RECOVER_EMAIL",oi="REVERT_SECOND_FACTOR_ADDITION",ui="VERIFY_AND_CHANGE_EMAIL",si="VERIFY_EMAIL";function ci(){return ht({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var li=function(){var e;return ht(e={},"admin-restricted-operation","This operation is restricted to administrators only."),ht(e,"argument-error",""),ht(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),ht(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),ht(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),ht(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),ht(e,"cordova-not-ready","Cordova framework is not ready."),ht(e,"cors-unsupported","This browser is not supported."),ht(e,"credential-already-in-use","This credential is already associated with a different user account."),ht(e,"custom-token-mismatch","The custom token corresponds to a different audience."),ht(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),ht(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),ht(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),ht(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),ht(e,"email-already-in-use","The email address is already in use by another account."),ht(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),ht(e,"expired-action-code","The action code has expired."),ht(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),ht(e,"internal-error","An internal AuthError has occurred."),ht(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),ht(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),ht(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),ht(e,"invalid-auth-event","An internal AuthError has occurred."),ht(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),ht(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),ht(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),ht(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),ht(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),ht(e,"invalid-email","The email address is badly formatted."),ht(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),ht(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),ht(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),ht(e,"invalid-credential","The supplied auth credential is malformed or has expired."),ht(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),ht(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),ht(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),ht(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),ht(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),ht(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),ht(e,"wrong-password","The password is invalid or the user does not have a password."),ht(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),ht(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),ht(e,"invalid-provider-id","The specified provider ID is invalid."),ht(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),ht(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),ht(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),ht(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),ht(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),ht(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),ht(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),ht(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),ht(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),ht(e,"missing-continue-uri","A continue URL must be provided in the request."),ht(e,"missing-iframe-start","An internal AuthError has occurred."),ht(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),ht(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),ht(e,"missing-multi-factor-info","No second factor identifier is provided."),ht(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),ht(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),ht(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),ht(e,"app-deleted","This instance of FirebaseApp has been deleted."),ht(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),ht(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),ht(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),ht(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),ht(e,"no-auth-event","An internal AuthError has occurred."),ht(e,"no-such-provider","User was not linked to an account with the given provider."),ht(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),ht(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),ht(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),ht(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),ht(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),ht(e,"provider-already-linked","User can only be linked to one identity for the given provider."),ht(e,"quota-exceeded","The project's quota for this operation has been exceeded."),ht(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),ht(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),ht(e,"rejected-credential","The request contains malformed or mismatching credentials."),ht(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),ht(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),ht(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),ht(e,"timeout","The operation has timed out."),ht(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),ht(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),ht(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),ht(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),ht(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),ht(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),ht(e,"unverified-email","The operation requires a verified email."),ht(e,"user-cancelled","The user did not grant your application the permissions it requested."),ht(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),ht(e,"user-disabled","The user account has been disabled by an administrator."),ht(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),ht(e,"user-signed-out",""),ht(e,"weak-password","The password must be 6 characters long or more."),ht(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),ht(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},hi=ci,fi=new Gt("auth","Firebase",ci()),di=new Pn("@firebase/auth");function pi(e){if(di.logLevel<=En.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];di.error.apply(di,["Auth (".concat(yr,"): ").concat(e)].concat(n))}}function vi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ki.apply(void 0,[e].concat(n))}function yi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ki.apply(void 0,[e].concat(n))}function mi(e,t,n){var r=Object.assign(Object.assign({},hi()),ht({},t,n));return new Gt("auth","Firebase",r).create(t,{appName:e.name})}function gi(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&vi(e,"argument-error"),mi(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function ki(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=wn(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(wn(o)))}return fi.create.apply(fi,[e].concat(n))}function wi(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ki.apply(void 0,[t].concat(r))}}function _i(e){var t="INTERNAL ASSERTION FAILED: "+e;throw pi(t),new Error(t)}function bi(e,t){e||_i(t)}var xi=new Map;function Ii(e){bi(e instanceof Function,"Expected a class definition");var t=xi.get(e);return t?(bi(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,xi.set(e,t),t)}function Ei(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Si(){return"http:"===Ti()||"https:"===Ti()}function Ti(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Ci=function(){function e(t,n){G(this,e),this.shortDelay=t,this.longDelay=n,bi(n>t,"Short delay should be less than long delay!"),this.isMobile=Ot()||Ft()}return $(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Si()||Mt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Ni(e,t){bi(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Ai=function(){function e(){G(this,e)}return $(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void _i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void _i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void _i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Ri=(ht(Jr={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),ht(Jr,"MISSING_CUSTOM_TOKEN","internal-error"),ht(Jr,"INVALID_IDENTIFIER","invalid-email"),ht(Jr,"MISSING_CONTINUE_URI","internal-error"),ht(Jr,"INVALID_PASSWORD","wrong-password"),ht(Jr,"MISSING_PASSWORD","internal-error"),ht(Jr,"EMAIL_EXISTS","email-already-in-use"),ht(Jr,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),ht(Jr,"INVALID_IDP_RESPONSE","invalid-credential"),ht(Jr,"INVALID_PENDING_TOKEN","invalid-credential"),ht(Jr,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),ht(Jr,"MISSING_REQ_TYPE","internal-error"),ht(Jr,"EMAIL_NOT_FOUND","user-not-found"),ht(Jr,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),ht(Jr,"EXPIRED_OOB_CODE","expired-action-code"),ht(Jr,"INVALID_OOB_CODE","invalid-action-code"),ht(Jr,"MISSING_OOB_CODE","internal-error"),ht(Jr,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),ht(Jr,"INVALID_ID_TOKEN","invalid-user-token"),ht(Jr,"TOKEN_EXPIRED","user-token-expired"),ht(Jr,"USER_NOT_FOUND","user-token-expired"),ht(Jr,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),ht(Jr,"INVALID_CODE","invalid-verification-code"),ht(Jr,"INVALID_SESSION_INFO","invalid-verification-id"),ht(Jr,"INVALID_TEMPORARY_PROOF","invalid-credential"),ht(Jr,"MISSING_SESSION_INFO","missing-verification-id"),ht(Jr,"SESSION_EXPIRED","code-expired"),ht(Jr,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),ht(Jr,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),ht(Jr,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),ht(Jr,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),ht(Jr,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),ht(Jr,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),ht(Jr,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),ht(Jr,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),ht(Jr,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),ht(Jr,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),ht(Jr,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Jr),Pi=new Ci(3e4,6e4);function Di(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Oi(e,t,n,r){return Li.apply(this,arguments)}function Li(){return Li=v(d().mark((function e(t,n,r,i){var a,o=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Mi(t,a,v(d().mark((function e(){var a,o,u,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=on(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Ai.fetch()(qi(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Li.apply(this,arguments)}function Mi(e,t,n){return Fi.apply(this,arguments)}function Fi(){return Fi=v(d().mark((function e(t,n,r){var i,a,o,u,s,l,h,f,p,v;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Ri),n),e.prev=2,a=new ji(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Bi(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,l=s.split(" : "),h=c(l,2),f=h[0],p=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw Bi(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw Bi(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw Bi(t,"user-disabled",u);case 29:if(v=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!p){e.next=34;break}throw mi(t,v,p);case 34:vi(t,v);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Ht)){e.next=41;break}throw e.t0;case 41:vi(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Fi.apply(this,arguments)}function Ui(e,t,n,r){return Vi.apply(this,arguments)}function Vi(){return Vi=v(d().mark((function e(t,n,r,i){var a,o,u=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Oi(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&vi(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Vi.apply(this,arguments)}function qi(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Ni(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var ji=function(){function e(t){var n=this;G(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(yi(n.auth,"network-request-failed"))}),Pi.get())}))}return $(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Bi(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=yi(e,t,r);return i.customData._tokenResponse=n,i}function zi(e,t){return Wi.apply(this,arguments)}function Wi(){return Wi=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oi(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Wi.apply(this,arguments)}function Ki(e,t){return Hi.apply(this,arguments)}function Hi(){return Hi=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oi(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Hi.apply(this,arguments)}function Gi(e,t){return Qi.apply(this,arguments)}function Qi(){return Qi=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oi(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Qi.apply(this,arguments)}function Yi(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function $i(){return $i=v(d().mark((function e(t){var n,r,i,a,o,u,s=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=gn(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,wi((a=Xi(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Yi(Ji(a.auth_time)),issuedAtTime:Yi(Ji(a.iat)),expirationTime:Yi(Ji(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),$i.apply(this,arguments)}function Ji(e){return 1e3*Number(e)}function Xi(e){var t=c(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return pi("JWT malformed, contained fewer than 3 sections"),null;try{var a=Rt(r);return a?JSON.parse(a):(pi("Failed to decode base64 JWT payload"),null)}catch(o){return pi("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function Zi(e,t){return ea.apply(this,arguments)}function ea(){return ea=v(d().mark((function e(t,n){var r=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Ht&&ta(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),ea.apply(this,arguments)}function ta(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var na=function(){function e(t){G(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return $(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(v(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),ra=function(){function e(t,n){G(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return $(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Yi(this.lastLoginAt),this.creationTime=Yi(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function ia(e){return aa.apply(this,arguments)}function aa(){return aa=v(d().mark((function e(t){var n,r,i,a,o,u,s,c,l,h,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Zi(t,Gi(r,{idToken:i}));case 6:wi(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?sa(o.providerUserInfo):[],s=ua(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new ra(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),aa.apply(this,arguments)}function oa(){return(oa=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gn(t),e.next=3,ia(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ua(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(wn(n),wn(t))}function sa(e){return e.map((function(e){var t=e.providerId,n=$r(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function ca(e,t){return la.apply(this,arguments)}function la(){return la=v(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mi(t,{},v(d().mark((function e(){var r,i,a,o,u,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=on({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=qi(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Ai.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),la.apply(this,arguments)}var ha=function(){function e(){G(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return $(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){wi(e.idToken,"internal-error"),wi("undefined"!==typeof e.idToken,"internal-error"),wi("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Xi(e);return wi(t,"internal-error"),wi("undefined"!==typeof t.exp,"internal-error"),wi("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=v(d().mark((function e(t){var n,r=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],wi(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=v(d().mark((function e(t,n){var r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ca(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return _i("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(wi("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(wi("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(wi("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function fa(e,t){wi("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var da=function(){function e(t){G(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=$r(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new na(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?wn(a.providerData):[],this.metadata=new ra(a.createdAt||void 0,a.lastLoginAt||void 0)}return $(e,[{key:"getIdToken",value:function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zi(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(wi(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return $i.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return oa.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(wi(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){wi(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=v(d().mark((function e(t){var n,r,i=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,ia(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Zi(this,zi(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,_=n.isAnonymous,b=n.providerData,x=n.stsTokenManager;wi(k&&x,t,"internal-error");var I=ha.fromJSON(this.name,x);wi("string"===typeof k,t,"internal-error"),fa(h,t.name),fa(f,t.name),wi("boolean"===typeof w,t,"internal-error"),wi("boolean"===typeof _,t,"internal-error"),fa(d,t.name),fa(p,t.name),fa(v,t.name),fa(y,t.name),fa(m,t.name),fa(g,t.name);var E=new e({uid:k,auth:t,email:f,emailVerified:w,displayName:h,isAnonymous:_,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return b&&Array.isArray(b)&&(E.providerData=b.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=v(d().mark((function t(n,r){var i,a,o,u=arguments;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new ha).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,ia(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),pa=function(){function e(){G(this,e),this.type="NONE",this.storage={}}return $(e,[{key:"_isAvailable",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();pa.type="NONE";var va=pa;function ya(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var ma=function(){function e(t,n,r){G(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=ya(this.userKey,a.apiKey,o),this.fullPersistenceKey=ya("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return $(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?da._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=v(d().mark((function t(n,r){var i,a,o,u,s,c,l,h,f,p,y,m=arguments;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=m.length>2&&void 0!==m[2]?m[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Ii(va),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Ii(va),u=ya(i,n.config.apiKey,n.name),s=null,c=ft(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(u);case 17:if(!(f=t.sent)){t.next=23;break}return p=da._fromJSON(n,f),h!==o&&(s=p),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(y=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&y.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=y[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function ga(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ba(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ka(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ia(t))return"Blackberry";if(Ea(t))return"Webos";if(wa(t))return"Safari";if((t.includes("chrome/")||_a(t))&&!t.includes("edge/"))return"Chrome";if(xa(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function ka(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt();return/firefox\//i.test(e)}function wa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function _a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt();return/crios\//i.test(e)}function ba(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt();return/iemobile/i.test(e)}function xa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt();return/android/i.test(e)}function Ia(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt();return/blackberry/i.test(e)}function Ea(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt();return/webos/i.test(e)}function Sa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ta(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt();return Sa(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Ca(){return Ut()&&10===document.documentMode}function Na(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt();return Sa(e)||xa(e)||Ea(e)||Ia(e)||/windows phone/i.test(e)||ba(e)}function Aa(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ga(Dt());break;case"Worker":t="".concat(ga(Dt()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(yr,"/").concat(r)}var Ra=function(){function e(t){G(this,e),this.auth=t,this.queue=[]}return $(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=v(d().mark((function e(t){var n,r,i,a,o,u,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=ft(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=ft(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Pa=function(){function e(t,n,r){G(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Oa(this),this.idTokenSubscription=new Oa(this),this.beforeStateQueue=new Ra(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fi,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return $(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Ii(t)),this._initializationPromise=this.queue(v(d().mark((function r(){var i,a;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,ma.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=v(d().mark((function e(t){var n,r,i,a,o,u,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return wi(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ia(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?gn(t):null)&&wi(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=v(d().mark((function e(t){var n,r=this,i=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&wi(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(v(d().mark((function n(){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Ii(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Gt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=v(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return wi(n=t&&Ii(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,ma.create(this,[Ii(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=v(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=v(d().mark((function e(t){var n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return wi(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return wi(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Aa(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=v(d().mark((function e(){var t,n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ht({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Da(e){return gn(e)}var Oa=function(){function e(t){var n=this;G(this,e),this.auth=t,this.observer=null,this.addObserver=ln((function(e){return n.observer=e}))}return $(e,[{key:"next",get:function(){return wi(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function La(e,t,n){var r=Da(e);wi(r._canInitEmulator,r,"emulator-config-failed"),wi(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Ma(t),o=function(e){var t=Ma(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Fa(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:Fa(o[1])}}(t),u=o.host,s=o.port,l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ma(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Fa(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Ua=function(){function e(t,n){G(this,e),this.providerId=t,this.signInMethod=n}return $(e,[{key:"toJSON",value:function(){return _i("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return _i("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return _i("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return _i("not implemented")}}]),e}();function Va(e,t){return qa.apply(this,arguments)}function qa(){return qa=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oi(t,"POST","/v1/accounts:resetPassword",Di(t,n)));case 1:case"end":return e.stop()}}),e)}))),qa.apply(this,arguments)}function ja(e,t){return Ba.apply(this,arguments)}function Ba(){return Ba=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oi(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Ba.apply(this,arguments)}function za(e,t){return Wa.apply(this,arguments)}function Wa(){return Wa=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oi(t,"POST","/v1/accounts:update",Di(t,n)));case 1:case"end":return e.stop()}}),e)}))),Wa.apply(this,arguments)}function Ka(e,t){return Ha.apply(this,arguments)}function Ha(){return Ha=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ui(t,"POST","/v1/accounts:signInWithPassword",Di(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ha.apply(this,arguments)}function Ga(e,t){return Qa.apply(this,arguments)}function Qa(){return Qa=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oi(t,"POST","/v1/accounts:sendOobCode",Di(t,n)));case 1:case"end":return e.stop()}}),e)}))),Qa.apply(this,arguments)}function Ya(e,t){return $a.apply(this,arguments)}function $a(){return $a=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ga(t,n));case 1:case"end":return e.stop()}}),e)}))),$a.apply(this,arguments)}function Ja(e,t){return Xa.apply(this,arguments)}function Xa(){return Xa=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ga(t,n));case 1:case"end":return e.stop()}}),e)}))),Xa.apply(this,arguments)}function Za(e,t){return eo.apply(this,arguments)}function eo(){return eo=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ga(t,n));case 1:case"end":return e.stop()}}),e)}))),eo.apply(this,arguments)}function to(e,t){return no.apply(this,arguments)}function no(){return no=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ga(t,n));case 1:case"end":return e.stop()}}),e)}))),no.apply(this,arguments)}function ro(e,t){return io.apply(this,arguments)}function io(){return io=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ui(t,"POST","/v1/accounts:signInWithEmailLink",Di(t,n)));case 1:case"end":return e.stop()}}),e)}))),io.apply(this,arguments)}function ao(e,t){return oo.apply(this,arguments)}function oo(){return oo=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ui(t,"POST","/v1/accounts:signInWithEmailLink",Di(t,n)));case 1:case"end":return e.stop()}}),e)}))),oo.apply(this,arguments)}var uo=function(e){vt(n,e);var t=kt(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return G(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return $(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ka(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",ro(t,{email:this._email,oobCode:this._password}));case 5:vi(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ja(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",ao(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:vi(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Ua);function so(e,t){return co.apply(this,arguments)}function co(){return co=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ui(t,"POST","/v1/accounts:signInWithIdp",Di(t,n)));case 1:case"end":return e.stop()}}),e)}))),co.apply(this,arguments)}var lo=function(e){vt(n,e);var t=kt(n);function n(){var e;return G(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return $(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return so(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,so(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,so(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=on(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vi("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=$r(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Ua);function ho(e,t){return fo.apply(this,arguments)}function fo(){return fo=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oi(t,"POST","/v1/accounts:sendVerificationCode",Di(t,n)));case 1:case"end":return e.stop()}}),e)}))),fo.apply(this,arguments)}function po(){return po=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ui(t,"POST","/v1/accounts:signInWithPhoneNumber",Di(t,n)));case 1:case"end":return e.stop()}}),e)}))),po.apply(this,arguments)}function vo(){return vo=v(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ui(t,"POST","/v1/accounts:signInWithPhoneNumber",Di(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Bi(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),vo.apply(this,arguments)}var yo=ht({},"USER_NOT_FOUND","user-not-found");function mo(){return mo=v(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Ui(t,"POST","/v1/accounts:signInWithPhoneNumber",Di(t,r),yo));case 2:case"end":return e.stop()}}),e)}))),mo.apply(this,arguments)}var go=function(e){vt(n,e);var t=kt(n);function n(e){var r;return G(this,n),(r=t.call(this,"phone","phone")).params=e,r}return $(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return po.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return vo.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return mo.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Ua);var ko=function(){function e(t){var n,r,i,a,o,u;G(this,e);var s=un(sn(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);wi(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return $(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=un(sn(e)).link,n=t?un(sn(t)).deep_link_id:null,r=un(sn(e)).deep_link_id;return(r?un(sn(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(AP){return null}}}]),e}();var wo=function(){function e(){G(this,e),this.providerId=e.PROVIDER_ID}return $(e,null,[{key:"credential",value:function(e,t){return uo._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ko.parseLink(t);return wi(n,"argument-error"),uo._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();wo.PROVIDER_ID="password",wo.EMAIL_PASSWORD_SIGN_IN_METHOD="password",wo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var _o=function(){function e(t){G(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return $(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),bo=function(e){vt(n,e);var t=kt(n);function n(){var e;return G(this,n),(e=t.apply(this,arguments)).scopes=[],e}return $(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return wn(this.scopes)}}]),n}(_o),xo=function(e){vt(n,e);var t=kt(n);function n(){return G(this,n),t.apply(this,arguments)}return $(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return wi(e.idToken||e.accessToken,"argument-error"),lo._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return wi("providerId"in t&&"signInMethod"in t,"argument-error"),lo._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(bo),Io=function(e){vt(n,e);var t=kt(n);function n(){return G(this,n),t.call(this,"facebook.com")}return $(n,null,[{key:"credential",value:function(e){return lo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(AP){return null}}}]),n}(bo);Io.FACEBOOK_SIGN_IN_METHOD="facebook.com",Io.PROVIDER_ID="facebook.com";var Eo=function(e){vt(n,e);var t=kt(n);function n(){var e;return G(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return $(n,null,[{key:"credential",value:function(e,t){return lo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(AP){return null}}}]),n}(bo);Eo.GOOGLE_SIGN_IN_METHOD="google.com",Eo.PROVIDER_ID="google.com";var So=function(e){vt(n,e);var t=kt(n);function n(){return G(this,n),t.call(this,"github.com")}return $(n,null,[{key:"credential",value:function(e){return lo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(AP){return null}}}]),n}(bo);So.GITHUB_SIGN_IN_METHOD="github.com",So.PROVIDER_ID="github.com";var To=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return $(n,[{key:"_getIdTokenResponse",value:function(e){return so(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,so(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,so(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ua),Co=function(e){vt(n,e);var t=kt(n);function n(e){return G(this,n),wi(e.startsWith("saml."),"argument-error"),t.call(this,e)}return $(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=To.fromJSON(e);return wi(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return To._create(r,n)}catch(i){return null}}}]),n}(_o),No=function(e){vt(n,e);var t=kt(n);function n(){return G(this,n),t.call(this,"twitter.com")}return $(n,null,[{key:"credential",value:function(e,t){return lo._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(AP){return null}}}]),n}(bo);function Ao(e,t){return Ro.apply(this,arguments)}function Ro(){return Ro=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ui(t,"POST","/v1/accounts:signUp",Di(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ro.apply(this,arguments)}No.TWITTER_SIGN_IN_METHOD="twitter.com",No.PROVIDER_ID="twitter.com";var Po=function(){function e(t){G(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return $(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=v(d().mark((function t(n,r,i){var a,o,u,s,c=arguments;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,da._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Do(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=v(d().mark((function t(n,r,i){var a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Do(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Do(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Oo(){return Oo=v(d().mark((function e(t){var n,r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Da(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Po({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Ao(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Po._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Oo.apply(this,arguments)}var Lo=function(e){vt(n,e);var t=kt(n);function n(e,r,i,a){var o,u;return G(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(dt(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return $(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Ht);function Mo(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Lo._fromErrorAndOperation(e,n,t,r);throw n}))}function Fo(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Uo(e,t){return Vo.apply(this,arguments)}function Vo(){return Vo=v(d().mark((function e(t,n){var r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gn(t),e.next=3,Bo(!0,r,n);case 3:return e.t0=Ki,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Fo(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Vo.apply(this,arguments)}function qo(e,t){return jo.apply(this,arguments)}function jo(){return jo=v(d().mark((function e(t,n){var r,i,a=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Zi,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Po._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),jo.apply(this,arguments)}function Bo(e,t,n){return zo.apply(this,arguments)}function zo(){return(zo=v(d().mark((function e(t,n,r){var i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ia(n);case 2:i=Fo(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",wi(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wo(e,t){return Ko.apply(this,arguments)}function Ko(){return Ko=v(d().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Zi(t,Mo(i,a,n,t),r);case 6:return wi((o=e.sent).idToken,i,"internal-error"),wi(u=Xi(o.idToken),i,"internal-error"),s=u.sub,wi(t.uid===s,i,"user-mismatch"),e.abrupt("return",Po._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&vi(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Ko.apply(this,arguments)}function Ho(e,t){return Go.apply(this,arguments)}function Go(){return Go=v(d().mark((function e(t,n){var r,i,a,o,u=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Mo(t,i,n);case 4:return a=e.sent,e.next=7,Po._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Go.apply(this,arguments)}function Qo(e,t){return Yo.apply(this,arguments)}function Yo(){return Yo=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ho(Da(t),n));case 1:case"end":return e.stop()}}),e)}))),Yo.apply(this,arguments)}function $o(e,t){return Jo.apply(this,arguments)}function Jo(){return(Jo=v(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gn(t),e.next=3,Bo(!1,r,n.providerId);case 3:return e.abrupt("return",qo(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xo(e,t){return Zo.apply(this,arguments)}function Zo(){return(Zo=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wo(gn(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eu(e,t){return tu.apply(this,arguments)}function tu(){return tu=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ui(t,"POST","/v1/accounts:signInWithCustomToken",Di(t,n)));case 1:case"end":return e.stop()}}),e)}))),tu.apply(this,arguments)}function nu(){return nu=v(d().mark((function e(t,n){var r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Da(t),e.next=3,eu(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Po._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),nu.apply(this,arguments)}var ru=function(){function e(t,n){G(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return $(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?iu._fromServerResponse(e,t):vi(e,"internal-error")}}]),e}(),iu=function(e){vt(n,e);var t=kt(n);function n(e){var r;return G(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return $(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ru);function au(e,t,n){var r;wi((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),wi("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(wi(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(wi(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function ou(){return ou=v(d().mark((function e(t,n,r){var i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gn(t),a={requestType:"PASSWORD_RESET",email:n},r&&au(i,a,r),e.next=5,Ja(i,a);case 5:case"end":return e.stop()}}),e)}))),ou.apply(this,arguments)}function uu(){return uu=v(d().mark((function e(t,n,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Va(gn(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),uu.apply(this,arguments)}function su(){return su=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,za(gn(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),su.apply(this,arguments)}function cu(e,t){return lu.apply(this,arguments)}function lu(){return lu=v(d().mark((function e(t,n){var r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gn(t),e.next=3,Va(r,{oobCode:n});case 3:i=e.sent,wi(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return wi(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:wi(i.mfaInfo,r,"internal-error");case 13:wi(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=ru._fromServerResponse(Da(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),lu.apply(this,arguments)}function hu(){return hu=v(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cu(gn(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),hu.apply(this,arguments)}function fu(e,t,n){return du.apply(this,arguments)}function du(){return du=v(d().mark((function e(t,n,r){var i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Da(t),e.next=3,Ao(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Po._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),du.apply(this,arguments)}function pu(){return pu=v(d().mark((function e(t,n,r){var i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gn(t),a={requestType:"EMAIL_SIGNIN",email:n},wi(r.handleCodeInApp,i,"argument-error"),r&&au(i,a,r),e.next=6,Za(i,a);case 6:case"end":return e.stop()}}),e)}))),pu.apply(this,arguments)}function vu(){return vu=v(d().mark((function e(t,n,r){var i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gn(t),wi((a=wo.credentialWithLink(n,r||Ei()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Qo(i,a));case 4:case"end":return e.stop()}}),e)}))),vu.apply(this,arguments)}function yu(e,t){return mu.apply(this,arguments)}function mu(){return mu=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oi(t,"POST","/v1/accounts:createAuthUri",Di(t,n)));case 1:case"end":return e.stop()}}),e)}))),mu.apply(this,arguments)}function gu(){return gu=v(d().mark((function e(t,n){var r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Si()?Ei():"http://localhost",i={identifier:n,continueUri:r},e.next=4,yu(gn(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),gu.apply(this,arguments)}function ku(){return(ku=v(d().mark((function e(t,n){var r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gn(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&au(r.auth,a,n),e.next=8,Ya(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wu(){return(wu=v(d().mark((function e(t,n,r){var i,a,o,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gn(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&au(i.auth,o,r),e.next=8,to(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _u(e,t){return bu.apply(this,arguments)}function bu(){return bu=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oi(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),bu.apply(this,arguments)}function xu(){return(xu=v(d().mark((function e(t,n){var r,i,a,o,u,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=gn(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Zi(a,_u(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Iu(e,t,n){return Eu.apply(this,arguments)}function Eu(){return Eu=v(d().mark((function e(t,n,r){var i,a,o,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Zi(t,ja(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),Eu.apply(this,arguments)}var Su=$((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};G(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Tu=function(e){vt(n,e);var t=kt(n);function n(e,r,i,a){var o;return G(this,n),(o=t.call(this,e,r,i)).username=a,o}return $(n)}(Su),Cu=function(e){vt(n,e);var t=kt(n);function n(e,r){return G(this,n),t.call(this,e,"facebook.com",r)}return $(n)}(Su),Nu=function(e){vt(n,e);var t=kt(n);function n(e,r){return G(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return $(n)}(Tu),Au=function(e){vt(n,e);var t=kt(n);function n(e,r){return G(this,n),t.call(this,e,"google.com",r)}return $(n)}(Su),Ru=function(e){vt(n,e);var t=kt(n);function n(e,r,i){return G(this,n),t.call(this,e,"twitter.com",r,i)}return $(n)}(Tu);function Pu(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Xi(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Su(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Cu(a,i);case"github.com":return new Nu(a,i);case"google.com":return new Au(a,i);case"twitter.com":return new Ru(a,i,e.screenName||null);case"custom":case"anonymous":return new Su(a,null);default:return new Su(a,r,i)}}(n)}var Du=function(){function e(t,n,r){G(this,e),this.type=t,this.credential=n,this.auth=r}return $(e,[{key:"toJSON",value:function(){return{multiFactorSession:ht({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Ou=function(){function e(t,n,r){G(this,e),this.session=t,this.hints=n,this.signInResolver=r}return $(e,[{key:"resolveSignIn",value:function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Da(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return ru._fromServerResponse(r,e)}));wi(i.mfaPendingCredential,r,"internal-error");var o=Du._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=v(d().mark((function e(t){var a,u,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Po._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return wi(n.user,r,"internal-error"),e.abrupt("return",Po._forOperation(n.user,n.operationType,u));case 17:vi(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Lu(e,t){return Oi(e,"POST","/v2/accounts/mfaEnrollment:start",Di(e,t))}function Mu(e,t){return Oi(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Di(e,t))}var Fu=function(){function e(t){var n=this;G(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return ru._fromServerResponse(t.auth,e)})))}))}return $(e,[{key:"getSession",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Du,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=v(d().mark((function e(t,n){var r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Zi(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=v(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Zi(this.user,Mu(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Uu=new WeakMap;var Vu="__sak",qu=function(){function e(t,n){G(this,e),this.storageRetriever=t,this.type=n}return $(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Vu,"1"),this.storage.removeItem(Vu),Promise.resolve(!0)):Promise.resolve(!1)}catch(AP){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var ju=function(e){vt(n,e);var t=kt(n);function n(){var e;return G(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Dt();return wa(e)||Sa(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Na(),e._shouldAllowMigration=!0,e}return $(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Ca()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=v(d().mark((function e(t,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yr(yt(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=v(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yr(yt(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yr(yt(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(qu);ju.type="LOCAL";var Bu=ju,zu=function(e){vt(n,e);var t=kt(n);function n(){return G(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return $(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(qu);zu.type="SESSION";var Wu=zu;function Ku(e){return Promise.all(e.map(function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Hu=function(){function e(t){G(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return $(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=v(d().mark((function e(t){var n,r,i,a,o,u,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Ku(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Gu(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Hu.receivers=[];var Qu=function(){function e(t){G(this,e),this.target=t,this.handlers=new Set}return $(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=v(d().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Gu("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Yu(){return window}function $u(){return"undefined"!==typeof Yu().WorkerGlobalScope&&"function"===typeof Yu().importScripts}function Ju(){return Xu.apply(this,arguments)}function Xu(){return(Xu=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Zu(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var es="firebaseLocalStorageDb",ts="firebaseLocalStorage",ns="fbase_key",rs=function(){function e(t){G(this,e),this.request=t}return $(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function is(e,t){return e.transaction([ts],t?"readwrite":"readonly").objectStore(ts)}function as(){var e=indexedDB.deleteDatabase(es);return new rs(e).toPromise()}function os(){var e=indexedDB.open(es,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(ts,{keyPath:ns})}catch(r){n(r)}})),e.addEventListener("success",v(d().mark((function n(){var r;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(ts)){n.next=12;break}return r.close(),n.next=5,as();case 5:return n.t0=t,n.next=8,os();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function us(e,t,n){return ss.apply(this,arguments)}function ss(){return ss=v(d().mark((function e(t,n,r){var i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=is(t,!0).put((ht(i={},ns,n),ht(i,"value",r),i)),e.abrupt("return",new rs(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),ss.apply(this,arguments)}function cs(e,t){return ls.apply(this,arguments)}function ls(){return ls=v(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=is(t,!1).get(n),e.next=3,new rs(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),ls.apply(this,arguments)}function hs(e,t){var n=is(e,!0).delete(t);return new rs(n).toPromise()}var fs=function(){function e(){G(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return $(e,[{key:"_openDb",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,os();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=v(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$u()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=v(d().mark((function e(){var t=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Hu._getInstance($u()?self:null),this.receiver._subscribe("keyChanged",function(){var e=v(d().mark((function e(n,r){var i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=v(d().mark((function e(){var t,n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ju();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Qu(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Zu()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,os();case 5:return t=e.sent,e.next=8,us(t,Vu,"1");case 8:return e.next=10,hs(t,Vu);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=v(d().mark((function e(t,n){var r=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return us(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return cs(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=v(d().mark((function e(t){var n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return hs(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=v(d().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=is(e,!1).getAll();return new rs(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=ft(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(v(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();fs.type="LOCAL";var ds=fs;function ps(e,t){return Oi(e,"POST","/v2/accounts/mfaSignIn:start",Di(e,t))}function vs(e){return ys.apply(this,arguments)}function ys(){return ys=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oi(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),ys.apply(this,arguments)}function ms(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=yi("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function gs(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var ks=1e12,ws=function(){function e(t){G(this,e),this.auth=t,this.counter=ks,this._widgets=new Map}return $(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new _s(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||ks;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||ks;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=v(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||ks,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),_s=function(){function e(t,n,r){var i=this;G(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;wi(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return $(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var bs=gs("rcb"),xs=new Ci(3e4,6e4),Is="https://www.google.com/recaptcha/api.js?",Es=function(){function e(){var t;G(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Yu().grecaptcha)||void 0===t?void 0:t.render)}return $(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return wi(Ss(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Yu().grecaptcha):new Promise((function(r,i){var a=Yu().setTimeout((function(){i(yi(e,"network-request-failed"))}),xs.get());Yu()[bs]=function(){Yu().clearTimeout(a),delete Yu()[bs];var o=Yu().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(yi(e,"internal-error"))},ms("".concat(Is,"?").concat(on({onload:bs,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(yi(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Yu().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function Ss(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Ts=function(){function e(){G(this,e)}return $(e,[{key:"load",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new ws(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Cs="recaptcha",Ns={theme:"light",type:"image"},As=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Ns),r=arguments.length>2?arguments[2]:void 0;G(this,e),this.parameters=n,this.type=Cs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Da(r),this.isInvisible="invisible"===this.parameters.size,wi("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;wi(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ts:new Es,this.validateStartingState()}return $(e,[{key:"verify",value:function(){var e=v(d().mark((function e(){var t,n,r,i=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){wi(!this.parameters.sitekey,this.auth,"argument-error"),wi(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),wi("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Yu()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){wi(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=v(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wi(Si()&&!$u(),this.auth,"internal-error"),e.next=3,Rs();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,vs(this.auth);case 8:wi(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return wi(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Rs(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Ps=function(){function e(t,n){G(this,e),this.verificationId=t,this.onConfirmation=n}return $(e,[{key:"confirm",value:function(e){var t=go._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Ds(){return Ds=v(d().mark((function e(t,n,r){var i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Da(t),e.next=3,Fs(i,n,gn(r));case 3:return a=e.sent,e.abrupt("return",new Ps(a,(function(e){return Qo(i,e)})));case 5:case"end":return e.stop()}}),e)}))),Ds.apply(this,arguments)}function Os(e,t,n){return Ls.apply(this,arguments)}function Ls(){return(Ls=v(d().mark((function e(t,n,r){var i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gn(t),e.next=3,Bo(!1,i,"phone");case 3:return e.next=5,Fs(i.auth,n,gn(r));case 5:return a=e.sent,e.abrupt("return",new Ps(a,(function(e){return $o(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ms(){return(Ms=v(d().mark((function e(t,n,r){var i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gn(t),e.next=3,Fs(i.auth,n,gn(r));case 3:return a=e.sent,e.abrupt("return",new Ps(a,(function(e){return Xo(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fs(e,t,n){return Us.apply(this,arguments)}function Us(){return Us=v(d().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,wi("string"===typeof a,t,"argument-error"),wi(r.type===Cs,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return wi("enroll"===u.type,t,"internal-error"),e.next=13,Lu(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return wi("signin"===u.type,t,"internal-error"),wi(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,ps(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,ho(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Us.apply(this,arguments)}function Vs(){return(Vs=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qo(gn(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qs=function(){function e(t){G(this,e),this.providerId=e.PROVIDER_ID,this.auth=Da(t)}return $(e,[{key:"verifyPhoneNumber",value:function(e,t){return Fs(this.auth,e,gn(t))}}],[{key:"credential",value:function(e,t){return go._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?go._fromTokenResponse(n,r):null}}]),e}();function js(e,t){return t?Ii(t):(wi(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}qs.PROVIDER_ID="phone",qs.PHONE_SIGN_IN_METHOD="phone";var Bs=function(e){vt(n,e);var t=kt(n);function n(e){var r;return G(this,n),(r=t.call(this,"custom","custom")).params=e,r}return $(n,[{key:"_getIdTokenResponse",value:function(e){return so(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return so(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return so(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Ua);function zs(e){return Ho(e.auth,new Bs(e),e.bypassAuthState)}function Ws(e){var t=e.auth,n=e.user;return wi(n,t,"internal-error"),Wo(n,new Bs(e),e.bypassAuthState)}function Ks(e){return Hs.apply(this,arguments)}function Hs(){return Hs=v(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,wi(r=t.user,n,"internal-error"),e.abrupt("return",qo(r,new Bs(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Hs.apply(this,arguments)}var Gs=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];G(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return $(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=v(d().mark((function t(n,r){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=v(d().mark((function e(t){var n,r,i,a,o,u,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zs;case"linkViaPopup":case"linkViaRedirect":return Ks;case"reauthViaPopup":case"reauthViaRedirect":return Ws;default:vi(this.auth,"internal-error")}}},{key:"resolve",value:function(e){bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Qs=new Ci(2e3,1e4);function Ys(e,t,n){return $s.apply(this,arguments)}function $s(){return $s=v(d().mark((function e(t,n,r){var i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Da(t),gi(t,n,_o),a=js(i,r),o=new ec(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),$s.apply(this,arguments)}function Js(){return(Js=v(d().mark((function e(t,n,r){var i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gi((i=gn(t)).auth,n,_o),a=js(i.auth,r),o=new ec(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xs(e,t,n){return Zs.apply(this,arguments)}function Zs(){return(Zs=v(d().mark((function e(t,n,r){var i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gi((i=gn(t)).auth,n,_o),a=js(i.auth,r),o=new ec(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ec=function(e){vt(n,e);var t=kt(n);function n(e,r,i,a,o){var u;return G(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=dt(u),u}return $(n,[{key:"executeNotNull",value:function(){var e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return wi(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=v(d().mark((function e(){var t,n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bi(1===this.filter.length,"Popup operations only handle one event"),t=Gu(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(yi(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(yi(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(yi(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Qs.get())}()}}]),n}(Gs);ec.currentPopupAction=null;var tc=new Map,nc=function(e){vt(n,e);var t=kt(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return G(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return $(n,[{key:"execute",value:function(){var e=v(d().mark((function e(){var t,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=tc.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,rc(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Yr(yt(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:tc.set(this.auth._key(),t);case 21:return this.bypassAuthState||tc.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=v(d().mark((function e(t){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Yr(yt(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Yr(yt(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Gs);function rc(e,t){return ic.apply(this,arguments)}function ic(){return ic=v(d().mark((function e(t,n){var r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cc(n),i=sc(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),ic.apply(this,arguments)}function ac(e,t){return oc.apply(this,arguments)}function oc(){return oc=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sc(t)._set(cc(n),"true"));case 1:case"end":return e.stop()}}),e)}))),oc.apply(this,arguments)}function uc(e,t){tc.set(e._key(),t)}function sc(e){return Ii(e._redirectPersistence)}function cc(e){return ya("pendingRedirect",e.config.apiKey,e.name)}function lc(e,t,n){return function(e,t,n){return hc.apply(this,arguments)}(e,t,n)}function hc(){return hc=v(d().mark((function e(t,n,r){var i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Da(t),gi(t,n,_o),a=js(i,r),e.next=5,ac(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),hc.apply(this,arguments)}function fc(e,t,n){return function(e,t,n){return dc.apply(this,arguments)}(e,t,n)}function dc(){return(dc=v(d().mark((function e(t,n,r){var i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gi((i=gn(t)).auth,n,_o),a=js(i.auth,r),e.next=5,ac(a,i.auth);case 5:return e.next=7,wc(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pc(e,t,n){return function(e,t,n){return vc.apply(this,arguments)}(e,t,n)}function vc(){return(vc=v(d().mark((function e(t,n,r){var i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gi((i=gn(t)).auth,n,_o),a=js(i.auth,r),e.next=5,Bo(!1,i,n.providerId);case 5:return e.next=7,ac(a,i.auth);case 7:return e.next=9,wc(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yc(e,t){return mc.apply(this,arguments)}function mc(){return mc=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Da(t)._initializationPromise;case 2:return e.abrupt("return",gc(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),mc.apply(this,arguments)}function gc(e,t){return kc.apply(this,arguments)}function kc(){return kc=v(d().mark((function e(t,n){var r,i,a,o,u,s=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Da(t),a=js(i,n),o=new nc(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),kc.apply(this,arguments)}function wc(e){return _c.apply(this,arguments)}function _c(){return(_c=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Gu("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bc=function(){function e(t){G(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return $(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ic(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Ic(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(yi(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xc(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(xc(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function xc(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Ic(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Ec(e){return Sc.apply(this,arguments)}function Sc(){return Sc=v(d().mark((function e(t){var n,r=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Oi(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Sc.apply(this,arguments)}var Tc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Cc=/^https?/;function Nc(){return Nc=v(d().mark((function e(t){var n,r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ec(t);case 4:n=e.sent,r=n.authorizedDomains,i=ft(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Ac(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:vi(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Nc.apply(this,arguments)}function Ac(e){var t=Ei(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Cc.test(r))return!1;if(Tc.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Rc=new Ci(3e4,6e4);function Pc(){var e=Yu().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=wn(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Dc=null;function Oc(e){return Dc=Dc||function(e){return new Promise((function(t,n){var r,i,a;function o(){Pc(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Pc(),n(yi(e,"network-request-failed"))},timeout:Rc.get()})}if(null===(i=null===(r=Yu().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Yu().gapi)||void 0===a?void 0:a.load)){var u=gs("iframefcb");return Yu()[u]=function(){gapi.load?o():n(yi(e,"network-request-failed"))},ms("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Dc=null,e}))}(e),Dc}var Lc=new Ci(5e3,15e3),Mc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Uc(e){var t=e.config;wi(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Ni(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:yr},i=Fc.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(on(r).slice(1))}function Vc(e){return qc.apply(this,arguments)}function qc(){return qc=v(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oc(t);case 2:return n=e.sent,wi(r=Yu().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Uc(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mc,dontclear:!0},(function(e){return new Promise(function(){var n=v(d().mark((function n(r,i){var a,o,u;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Yu().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=yi(t,"network-request-failed"),o=Yu().setTimeout((function(){i(a)}),Lc.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),qc.apply(this,arguments)}var jc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Bc="_blank",zc="http://localhost",Wc=function(){function e(t){G(this,e),this.window=t,this.associatedEvent=null}return $(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Kc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},jc),{width:r.toString(),height:i.toString(),top:a,left:o}),l=Dt().toLowerCase();n&&(u=_a(l)?Bc:n),ka(l)&&(t=t||zc,s.scrollbars="yes");var h=Object.entries(s).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Ta(l)&&"_self"!==u)return Hc(t||"",u),new Wc(null);var f=window.open(t||"",u,h);wi(f,e,"popup-blocked");try{f.focus()}catch(d){}return new Wc(f)}function Hc(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Gc="__/auth/handler",Qc="emulator/auth/handler";function Yc(e,t,n,r,i,a){wi(e.config.authDomain,e,"auth-domain-config-required"),wi(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:yr,eventId:i};if(t instanceof _o){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",tn(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var l=c(s[u],2),h=l[0],f=l[1];o[h]=f}}if(t instanceof bo){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Gc);return Ni(t,Qc)}(e),"?").concat(on(p).slice(1))}var $c="webStorageSupport",Jc=function(){function e(){G(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wu,this._completeRedirectFn=gc,this._overrideRedirectResult=uc}return $(e,[{key:"_openPopup",value:function(){var e=v(d().mark((function e(t,n,r,i){var a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bi(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Yc(t,n,r,Ei(),i),e.abrupt("return",Kc(t,o,Gu()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=v(d().mark((function e(t,n,r,i){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Yc(t,n,r,Ei(),i),Yu().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(bi(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=v(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vc(t);case 2:return n=e.sent,r=new bc(t),n.register("authEvent",(function(e){return wi(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send($c,{type:$c},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[$c];void 0!==i&&t(!!i),vi(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Nc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Na()||wa()||Sa()}}]),e}(),Xc=Jc,Zc=function(){function e(t){G(this,e),this.factorId=t}return $(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return _i("unexpected MultiFactorSessionType")}}}]),e}(),el=function(e){vt(n,e);var t=kt(n);function n(e){var r;return G(this,n),(r=t.call(this,"phone")).credential=e,r}return $(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Oi(e,"POST","/v2/accounts/mfaEnrollment:finalize",Di(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Oi(e,"POST","/v2/accounts/mfaSignIn:finalize",Di(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Zc),tl=function(){function e(){G(this,e)}return $(e,null,[{key:"assertion",value:function(e){return el._fromCredential(e)}}]),e}();tl.FACTOR_ID="phone";var nl="@firebase/auth",rl="0.21.0",il=function(){function e(t){G(this,e),this.auth=t,this.internalListeners=new Map}return $(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){wi(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var al;!function(e){var t;null===(t=Bt())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function ol(){return window}al="Browser",cr(new _n("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){wi(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),wi(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:al,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Aa(al)},i=new Pa(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ii);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),cr(new _n("auth-internal",(function(e){return function(e){return new il(e)}(Da(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),br(nl,rl,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(al)),br(nl,rl,"esm2017");function ul(e,t,n){return sl.apply(this,arguments)}function sl(){return sl=v(d().mark((function e(t,n,r){var i,a,o,u,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ol(),o=a.BuildInfo,bi(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,pl(n.sessionId);case 4:return u=e.sent,s={},Sa()?s.ibi=o.packageName:xa()?s.apn=o.packageName:vi(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Yc(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),sl.apply(this,arguments)}function cl(){return cl=v(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ol(),r=n.BuildInfo,i={},Sa()?i.iosBundleId=r.packageName:xa()?i.androidPackageName=r.packageName:vi(t,"operation-not-supported-in-this-environment"),e.next=5,Ec(t,i);case 5:case"end":return e.stop()}}),e)}))),cl.apply(this,arguments)}function ll(e){var t=ol().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function hl(e,t,n){return fl.apply(this,arguments)}function fl(){return fl=v(d().mark((function e(t,n,r){var i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ol(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(yi(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),xa()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),fl.apply(this,arguments)}function dl(e){var t,n,r,i,a,o,u,s,c,l,h=ol();wi("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),wi("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),wi("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),wi("function"===typeof(null===(s=null===(u=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),wi("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function pl(e){return vl.apply(this,arguments)}function vl(){return(vl=v(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=yl(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yl(e){if(bi(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var ml=function(e){vt(n,e);var t=kt(n);function n(){var e;return G(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return $(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Yr(yt(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(bc);function gl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:xl(),postBody:null,tenantId:e.tenantId,error:yi(e,"no-auth-event")}}function kl(e,t){return Il()._set(El(e),t)}function wl(e){return _l.apply(this,arguments)}function _l(){return _l=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Il()._get(El(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Il()._remove(El(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),_l.apply(this,arguments)}function bl(e,t){var n,r,i=function(e){var t=Sl(e),n=t.link?decodeURIComponent(t.link):void 0,r=Sl(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Sl(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Sl(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?yi(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function xl(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Il(){return Ii(Bu)}function El(e){return ya("authEvent",e.config.apiKey,e.name)}function Sl(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=Gr(e.split("?"));t[0];return un(t.slice(1).join("?"))}var Tl=function(){function e(){G(this,e),this._redirectPersistence=Wu,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=gc,this._overrideRedirectResult=uc}return $(e,[{key:"_initialize",value:function(){var e=v(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new ml(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){vi(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=v(d().mark((function e(t,n,r,i){var a,o,u,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dl(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),tc.clear(),e.next=10,this._originValidation(t);case 10:return o=gl(t,r,i),e.next=13,kl(t,o);case 13:return e.next=15,ul(t,o,n);case 15:return u=e.sent,e.next=18,ll(u);case 18:return s=e.sent,e.abrupt("return",hl(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return cl.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=ol(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(v(d().mark((function n(){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,wl(e);case 2:t.onEvent(Nl());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=v(d().mark((function n(r){var i,a;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,wl(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=bl(i,r.url)),t.onEvent(a||Nl());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");ol().handleOpenURL=function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Cl=Tl;function Nl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:yi("no-auth-event")}}function Al(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Rl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt();return!("file:"!==Al()&&"ionic:"!==Al()&&"capacitor:"!==Al()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Pl(){return Ut()&&11===(null===document||void 0===document?void 0:document.documentMode)}function Dl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt();return/Edge\/\d+/.test(e)}function Ol(){try{var e=self.localStorage,t=Gu();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt();return Pl()||Dl(e)}()||qt()}catch(n){return Ll()&&qt()}return!1}function Ll(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Ml(){return("http:"===Al()||"https:"===Al()||Mt()||Rl())&&!(Ft()||Lt())&&Ol()&&!Ll()}function Fl(){return Rl()&&"undefined"!==typeof document}function Ul(){return Vl.apply(this,arguments)}function Vl(){return(Vl=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fl()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ql={LOCAL:"local",NONE:"none",SESSION:"session"},jl=wi,Bl="persistence";function zl(e,t){jl(Object.values(ql).includes(t),e,"invalid-persistence-type"),Ft()?jl(t!==ql.SESSION,e,"unsupported-persistence-type"):Lt()?jl(t===ql.NONE,e,"unsupported-persistence-type"):Ll()?jl(t===ql.NONE||t===ql.LOCAL&&qt(),e,"unsupported-persistence-type"):jl(t===ql.NONE||Ol(),e,"unsupported-persistence-type")}function Wl(e){return Kl.apply(this,arguments)}function Kl(){return Kl=v(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Hl(),r=ya(Bl,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),Kl.apply(this,arguments)}function Hl(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Gl=wi,Ql=function(){function e(){G(this,e),this.browserResolver=Ii(Xc),this.cordovaResolver=Ii(Cl),this.underlyingResolver=null,this._redirectPersistence=Wu,this._completeRedirectFn=gc,this._overrideRedirectResult=uc}return $(e,[{key:"_initialize",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=v(d().mark((function e(t,n,r,i){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=v(d().mark((function e(t,n,r,i){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Fl()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Gl(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ul();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Yl(e){return e.unwrap()}function $l(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new th(e,function(e,t){var n,r=gn(e),i=t;return wi(t.customData.operationType,r,"argument-error"),wi(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Ou._fromError(r,i)}(e,t));else if(r){var i=Jl(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Jl(e){var t=(e instanceof Ht?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Ht)&&"temporaryProof"in t&&"phoneNumber"in t)return qs.credentialFromResult(e);var n,r=t.providerId;if(!r||r===ti)return null;switch(r){case ei:n=Eo;break;case Xr:n=Io;break;case Zr:n=So;break;case ni:n=No;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?To._create(r,u):lo._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new xo(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Ht?n.credentialFromError(e):n.credentialFromResult(e)}function Xl(e,t){return t.catch((function(t){throw t instanceof Ht&&$l(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Jl(t)),additionalUserInfo:Pu(e),user:nh.getOrCreate(r)}}))}function Zl(e,t){return eh.apply(this,arguments)}function eh(){return eh=v(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Xl(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),eh.apply(this,arguments)}var th=function(){function e(t,n){G(this,e),this.resolver=n,this.auth=t.wrapped()}return $(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Xl(Yl(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),nh=function(){function e(t){G(this,e),this._delegate=t,this.multiFactor=function(e){var t=gn(e);return Uu.has(t)||Uu.set(t,Fu._fromUser(t)),Uu.get(t)}(t)}return $(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xl(this.auth,$o(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zl(this.auth,Os(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xl(this.auth,Xs(this._delegate,t,Ql)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wl(Da(this.auth));case 2:return e.abrupt("return",pc(this._delegate,t,Ql));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xl(this.auth,Xo(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Zl(this.auth,function(e,t,n){return Ms.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Xl(this.auth,function(e,t,n){return Js.apply(this,arguments)}(this._delegate,e,Ql))}},{key:"reauthenticateWithRedirect",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wl(Da(this.auth));case 2:return e.abrupt("return",fc(this._delegate,t,Ql));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return ku.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uo(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Iu(gn(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Iu(gn(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Vs.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return xu.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return wu.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();nh.USER_MAP=new WeakMap;var rh=wi,ih=function(){function e(t,n){if(G(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;rh(r,"invalid-api-key",{appName:t.name}),rh(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Ql:void 0;this._delegate=n.initialize({options:{persistence:oh(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(li),this.linkUnderlyingAuth()}return $(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?nh.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){La(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return su.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return cu(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return uu.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xl(this._delegate,fu(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return gu.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=ko.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rh(Ml(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,yc(this._delegate,Ql);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Xl(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Da(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=ah(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=ah(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return pu.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return ou.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=v(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:zl(this._delegate,t),e.t0=t,e.next=e.t0===ql.SESSION?4:e.t0===ql.LOCAL?6:e.t0===ql.NONE?11:13;break;case 4:return n=Wu,e.abrupt("break",14);case 6:return e.next=8,Ii(ds)._isAvailable();case 8:return r=e.sent,n=r?ds:Bu,e.abrupt("break",14);case 11:return n=va,e.abrupt("break",14);case 13:return e.abrupt("return",vi("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Xl(this._delegate,function(e){return Oo.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Xl(this._delegate,Qo(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Xl(this._delegate,function(e,t){return nu.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Xl(this._delegate,function(e,t,n){return Qo(gn(e),wo.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Xl(this._delegate,function(e,t,n){return vu.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Zl(this._delegate,function(e,t,n){return Ds.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rh(Ml(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Xl(this._delegate,Ys(this._delegate,t,Ql)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rh(Ml(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Wl(this._delegate);case 3:return e.abrupt("return",lc(this._delegate,t,Ql));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return hu.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function ah(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&nh.getOrCreate(e))},error:t,complete:n}}function oh(e,t){var n=function(e,t){var n=Hl();if(!n)return[];var r=ya(Bl,e,t);switch(n.getItem(r)){case ql.NONE:return[va];case ql.LOCAL:return[ds,Wu];case ql.SESSION:return[Wu];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(ds)||n.push(ds),"undefined"!==typeof window)for(var r=0,i=[Bu,Wu];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(va)||n.push(va),n}ih.Persistence=ql;var uh=function(){function e(){G(this,e),this.providerId="phone",this._delegate=new qs(Yl(Hr.auth()))}return $(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return qs.credential(e,t)}}]),e}();uh.PHONE_SIGN_IN_METHOD=qs.PHONE_SIGN_IN_METHOD,uh.PROVIDER_ID=qs.PROVIDER_ID;var sh=wi,ch=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hr.app();G(this,e),sh(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new As(t,n,i.auth()),this.type=this._delegate.type}return $(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new _n("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new ih(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ri,PASSWORD_RESET:ii,RECOVER_EMAIL:ai,REVERT_SECOND_FACTOR_ADDITION:oi,VERIFY_AND_CHANGE_EMAIL:ui,VERIFY_EMAIL:si}},EmailAuthProvider:wo,FacebookAuthProvider:Io,GithubAuthProvider:So,GoogleAuthProvider:Eo,OAuthProvider:xo,SAMLAuthProvider:Co,PhoneAuthProvider:uh,PhoneMultiFactorGenerator:tl,RecaptchaVerifier:ch,TwitterAuthProvider:No,Auth:ih,AuthCredential:Ua,Error:Ht}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.3.0")}(Hr);var lh="@firebase/database",hh="0.14.0",fh="";function dh(e){fh=e}var ph=function(){function e(t){G(this,e),this.domStorage_=t,this.prefix_="firebase:"}return $(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Jt(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:$t(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),vh=function(){function e(){G(this,e),this.cache_={},this.isInMemoryStorage=!0}return $(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Zt(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),yh=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new ph(t)}}catch(n){}return new vh},mh=yh("localStorage"),gh=yh("sessionStorage"),kh=new Pn("@firebase/database"),wh=function(){var e=1;return function(){return e++}}(),_h=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,Et(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new cn;n.update(t);var r=n.digest();return Ct.encodeByteArray(r)},bh=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?Jt(r):r,t+=" "}return t},xh=null,Ih=!0,Eh=function(e,t){Et(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(kh.logLevel=En.VERBOSE,xh=kh.log.bind(kh),t&&gh.set("logging_enabled",!0)):"function"===typeof e?xh=e:(xh=null,gh.remove("logging_enabled"))},Sh=function(){if(!0===Ih&&(Ih=!1,null===xh&&!0===gh.get("logging_enabled")&&Eh(!0)),xh){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=bh.apply(null,t);xh(r)}},Th=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Sh.apply(void 0,[e].concat(n))}},Ch=function(){var e="FIREBASE INTERNAL ERROR: "+bh.apply(void 0,arguments);kh.error(e)},Nh=function(){var e="FIREBASE FATAL ERROR: ".concat(bh.apply(void 0,arguments));throw kh.error(e),new Error(e)},Ah=function(){var e="FIREBASE WARNING: "+bh.apply(void 0,arguments);kh.warn(e)},Rh=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Ph="[MIN_NAME]",Dh="[MAX_NAME]",Oh=function(e,t){if(e===t)return 0;if(e===Ph||t===Dh)return-1;if(t===Ph||e===Dh)return 1;var n=Bh(e),r=Bh(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Lh=function(e,t){return e===t?0:e<t?-1:1},Mh=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Jt(t))},Fh=function e(t){if("object"!==typeof t||null===t)return Jt(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=Jt(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},Uh=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Vh(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var qh=function(e){Et(!Rh(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var jh=new RegExp("^-?(0*)\\d{1,10}$"),Bh=function(e){if(jh.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},zh=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw Ah("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Wh=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},Kh=function(){function e(t,n){var r=this;G(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return $(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){Ah('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),Hh=function(){function e(t,n,r){var i=this;G(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return $(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Sh("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ah(e)}}]),e}(),Gh=function(){function e(t){G(this,e),this.accessToken=t}return $(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();Gh.OWNER="owner";var Qh="5",Yh=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,$h="ac",Jh="websocket",Xh="long_polling",Zh=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];G(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=mh.get("host:"+t)||this._host}return $(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&mh.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function ef(e,t,n){var r;if(Et("string"===typeof t,"typeof type must == string"),Et("object"===typeof n,"typeof params must == object"),t===Jh)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Xh)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Vh(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var tf=function(){function e(){G(this,e),this.counters_={}}return $(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Zt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Pt(void 0,this.counters_)}}]),e}(),nf={},rf={};function af(e){var t=e.toString();return nf[t]||(nf[t]=new tf),nf[t]}var of=function(){function e(t){G(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return $(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&zh((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),uf="start",sf="close",cf=function(){function e(t,n,r,i,a,o,u){var s=this;G(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Th(t),this.stats_=af(n),this.urlFn=function(e){return s.appCheckToken&&(e[$h]=s.appCheckToken),ef(n,Xh,e)}}return $(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new of(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Vt()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new lf((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===uf)n.id=a,n.password=o;else{if(i!==sf)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[uf]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=Qh,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[$h]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&Yh.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=Jt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Nt(t),r=Uh(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Vt()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=Jt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Vt()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),lf=function(){function e(t,n,r,i){if(G(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Vt())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=wh(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){Sh("frame writing exception"),u.stack&&Sh(u.stack),Sh(u)}}}return $(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Vt()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Sh("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Sh("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),hf=null;"undefined"!==typeof MozWebSocket?hf=MozWebSocket:"undefined"!==typeof WebSocket&&(hf=WebSocket);var ff=function(){function e(t,n,r,i,a,o,u){G(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Th(this.connId),this.stats_=af(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return $(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,mh.set("previous_websocket_failure",!0);try{var r;if(Vt()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(Qh,"/").concat(fh,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/netflixclone9449",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new hf(this.connURL,[],r)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){mh.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=$t(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Et(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=Jt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Uh(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=Qh,!Vt()&&"undefined"!==typeof location&&location.hostname&&Yh.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[$h]=r),i&&(a.p=i),ef(e,Jh,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==hf&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return mh.isInMemoryStorage||!0===mh.get("previous_websocket_failure")}}]),e}();ff.responsesRequiredToBeHealthy=2,ff.healthyTimeout=3e4;var df=function(){function e(t){G(this,e),this.initTransports_(t)}return $(e,[{key:"initTransports_",value:function(t){var n=ff&&ff.isAvailable(),r=n&&!ff.previouslyFailed();if(t.webSocketOnly&&(n||Ah("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ff];else{var i,a=this.transports_=[],o=ft(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[cf,ff]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();df.globalTransportInitialized_=!1;var pf=function(){function e(t,n,r,i,a,o,u,s,c,l){G(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Th("c:"+this.id+":"),this.transportManager_=new df(n),this.log_("Connection created"),this.start_()}return $(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Wh((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=Mh("t",e),n=Mh("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=Mh("t",e),n=Mh("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=Mh("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Ch("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ch("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Qh!==n&&Ah("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Wh((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wh((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(mh.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),vf=function(){function e(){G(this,e)}return $(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),yf=function(){function e(t){G(this,e),this.allowedEvents_=t,this.listeners_={},Et(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return $(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=wn(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Et(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),mf=function(e){vt(n,e);var t=kt(n);function n(){var e;return G(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Ot()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return $(n,[{key:"getInitialEvent",value:function(e){return Et("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(yf),gf=function(){function e(t,n){if(G(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return $(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function kf(){return new gf("")}function wf(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function _f(e){return e.pieces_.length-e.pieceNum_}function bf(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new gf(e.pieces_,t)}function xf(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function If(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Ef(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new gf(t,0)}function Sf(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof gf)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new gf(n,0)}function Tf(e){return e.pieceNum_>=e.pieces_.length}function Cf(e,t){var n=wf(e),r=wf(t);if(null===n)return t;if(n===r)return Cf(bf(e),bf(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Nf(e,t){for(var n=If(e,0),r=If(t,0),i=0;i<n.length&&i<r.length;i++){var a=Oh(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function Af(e,t){if(_f(e)!==_f(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Rf(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(_f(e)>_f(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Pf=$((function e(t,n){G(this,e),this.errorPrefix_=n,this.parts_=If(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=mn(this.parts_[r]);Df(this)}));function Df(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Of(e))}function Of(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Lf=function(e){vt(n,e);var t=kt(n);function n(){var e,r,i;return G(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return $(n,[{key:"getInitialEvent",value:function(e){return Et("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(yf),Mf=1e3,Ff=function(e){vt(n,e);var t=kt(n);function n(e,r,i,a,o,u,s,c){var l;if(G(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=Th("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Mf,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Vt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Lf.getInstance().on("visible",l.onVisible_,dt(l)),-1===e.host.indexOf("fblocal")&&mf.getInstance().on("online",l.onOnline_,dt(l)),l}return $(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Jt(i)),Et(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new Wt,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Et(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Et(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Xt(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Xt(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Et(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+Jt(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Ch("Unrecognized action received from server: "+Jt(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Et(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Mf,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Mf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Mf),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=v(d().mark((function e(){var t,r,i,a,o,u,s,l,h,f,p,v,y,m,g=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,l=function(){s?s.close():(u=!0,i())},h=function(e){Et(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:l,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:p=e.sent,v=c(p,2),y=v[0],m=v[1],u?Sh("getToken() completed but was canceled"):(Sh("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=m&&m.token,s=new pf(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){Ah(e+" ("+g.repoInfo_.toString()+")"),g.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&Ah(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Sh("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Sh("Resuming connection for reason: "+e),delete this.interruptReasons_[e],tn(this.interruptReasons_)&&(this.reconnectDelay_=Mf,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return Fh(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new gf(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Sh("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Sh("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=ft(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=ft(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Vt()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+fh.replace(/\./g,"-")]=1,Ot()?e["framework.cordova"]=1:Ft()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=mf.getInstance().currentlyOnline();return tn(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Zt(e,"w")){var n=en(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();Ah("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(vf);Ff.nextPersistentConnectionId_=0,Ff.nextConnectionId_=0;var Uf,Vf=function(){function e(t,n){G(this,e),this.name=t,this.node=n}return $(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),qf=function(){function e(){G(this,e)}return $(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Vf(Ph,e),r=new Vf(Ph,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Vf.MIN}}]),e}(),jf=function(e){vt(n,e);var t=kt(n);function n(){return G(this,n),t.apply(this,arguments)}return $(n,[{key:"compare",value:function(e,t){return Oh(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw St("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Vf.MIN}},{key:"maxPost",value:function(){return new Vf(Dh,Uf)}},{key:"makePost",value:function(e,t){return Et("string"===typeof e,"KeyIndex indexValue must always be a string."),new Vf(e,Uf)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return Uf},set:function(e){Uf=e}}]),n}(qf),Bf=new jf,zf=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;G(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return $(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),Wf=function(){function e(t,n,r,i,a){G(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Gf.EMPTY_NODE,this.right=null!=a?a:Gf.EMPTY_NODE}return $(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return Gf.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Gf.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();Wf.RED=!0,Wf.BLACK=!1;var Kf,Hf=function(){function e(){G(this,e)}return $(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Wf(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),Gf=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;G(this,e),this.comparator_=t,this.root_=n}return $(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Wf.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Wf.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new zf(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new zf(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new zf(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new zf(this.root_,null,this.comparator_,!0,e)}}]),e}();function Qf(e,t){return Oh(e.name,t.name)}function Yf(e,t){return Oh(e,t)}Gf.EMPTY_NODE=new Hf;var $f,Jf,Xf,Zf=function(e){return"number"===typeof e?"number:"+qh(e):"string:"+e},ed=function(e){if(e.isLeafNode()){var t=e.val();Et("string"===typeof t||"number"===typeof t||"object"===typeof t&&Zt(t,".sv"),"Priority must be a string or number.")}else Et(e===Kf||e.isEmpty(),"priority of unexpected type.");Et(e===Kf||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},td=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;G(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Et(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ed(this.priorityNode_)}return $(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Tf(t)?this:".priority"===wf(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=wf(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Et(".priority"!==r||1===_f(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(bf(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Zf(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?qh(this.value_):this.value_,this.lazyHash_=_h(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Et(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Et(i>=0,"Unknown leaf type: "+n),Et(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return $f},set:function(e){$f=e}}]),e}();td.VALUE_TYPE_ORDER=["object","boolean","number","string"];var nd,rd,id=function(e){vt(n,e);var t=kt(n);function n(){return G(this,n),t.apply(this,arguments)}return $(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Oh(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Vf.MIN}},{key:"maxPost",value:function(){return new Vf(Dh,new td("[PRIORITY-POST]",Xf))}},{key:"makePost",value:function(e,t){var n=Jf(e);return new Vf(t,new td("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(qf),ad=new id,od=Math.log(2),ud=function(){function e(t){G(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/od,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return $(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),sd=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new Wf(o,a.node,Wf.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new Wf(o,a.node,Wf.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],h=n?n(l):l;s(new Wf(h,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?u(h,Wf.BLACK):(u(h,Wf.BLACK),u(h,Wf.RED))}return a}(new ud(e.length));return new Gf(r||t,a)},cd={},ld=function(){function e(t,n){G(this,e),this.indexes_=t,this.indexSet_=n}return $(e,[{key:"get",value:function(e){var t=en(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Gf?t:null}},{key:"hasIndex",value:function(e){return Zt(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Et(t!==Bf,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(Vf.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?sd(i,t.getCompare()):cd;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(nn(this.indexes_,(function(e,i){var a=en(r.indexSet_,i);if(Et(a,"Missing index implementation for "+i),e===cd){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(Vf.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),sd(o,a.getCompare())}return cd}var c=n.get(t.name),l=e;return c&&(l=l.remove(new Vf(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(nn(this.indexes_,(function(e){if(e===cd)return e;var r=n.get(t.name);return r?e.remove(new Vf(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Et(cd&&ad,"ChildrenNode.ts has not been loaded"),nd=nd||new e({".priority":cd},{".priority":ad})}}]),e}(),hd=function(){function e(t,n,r){G(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&ed(this.priorityNode_),this.children_.isEmpty()&&Et(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return $(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||rd}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?rd:t}},{key:"getChild",value:function(e){var t=wf(e);return null===t?this:this.getImmediateChild(t).getChild(bf(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Et(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new Vf(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?rd:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=wf(e);if(null===n)return t;Et(".priority"!==wf(e)||1===_f(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(bf(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(ad,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Zf(this.getPriority().val())+":"),this.forEachChild(ad,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":_h(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Vf(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Vf(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Vf(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Vf.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Vf.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===fd?-1:0}},{key:"withIndex",value:function(t){if(t===Bf||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===Bf||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(ad),r=t.getIterator(ad),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===Bf?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return rd||(rd=new e(new Gf(Yf),null,ld.Default))}}]),e}();hd.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var fd=new(function(e){vt(n,e);var t=kt(n);function n(){return G(this,n),t.call(this,new Gf(Yf),hd.EMPTY_NODE,ld.Default)}return $(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return hd.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(hd));Object.defineProperties(Vf,{MIN:{value:new Vf(Ph,hd.EMPTY_NODE)},MAX:{value:new Vf(Dh,fd)}}),jf.__EMPTY_NODE=hd.EMPTY_NODE,td.__childrenNodeConstructor=hd,Kf=fd,function(e){Xf=e}(fd);function dd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return hd.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Et(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new td(n,dd(t))}if(e instanceof Array){var r=hd.EMPTY_NODE;return Vh(e,(function(t,n){if(Zt(e,t)&&"."!==t.substring(0,1)){var i=dd(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(dd(t))}var i=[],a=!1,o=e;if(Vh(o,(function(e,t){if("."!==e.substring(0,1)){var n=dd(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new Vf(e,n)))}})),0===i.length)return hd.EMPTY_NODE;var u=sd(i,Qf,(function(e){return e.name}),Yf);if(a){var s=sd(i,ad.getCompare());return new hd(u,dd(t),new ld({".priority":s},{".priority":ad}))}return new hd(u,dd(t),ld.Default)}!function(e){Jf=e}(dd);var pd=function(e){vt(n,e);var t=kt(n);function n(e){var r;return G(this,n),(r=t.call(this)).indexPath_=e,Et(!Tf(e)&&".priority"!==wf(e),"Can't create PathIndex with empty path or .priority key"),r}return $(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Oh(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=dd(e),r=hd.EMPTY_NODE.updateChild(this.indexPath_,n);return new Vf(t,r)}},{key:"maxPost",value:function(){var e=hd.EMPTY_NODE.updateChild(this.indexPath_,fd);return new Vf(Dh,e)}},{key:"toString",value:function(){return If(this.indexPath_,0).join("/")}}]),n}(qf),vd=function(e){vt(n,e);var t=kt(n);function n(){return G(this,n),t.apply(this,arguments)}return $(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?Oh(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Vf.MIN}},{key:"maxPost",value:function(){return Vf.MAX}},{key:"makePost",value:function(e,t){var n=dd(e);return new Vf(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(qf),yd=new vd;function md(e){return{type:"value",snapshotNode:e}}function gd(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function kd(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function wd(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var _d=function(){function e(t){G(this,e),this.index_=t}return $(e,[{key:"updateChild",value:function(e,t,n,r,i,a){Et(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(kd(t,o)):Et(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(gd(t,n)):a.trackChildChange(wd(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(ad,(function(e,r){t.hasChild(e)||n.trackChildChange(kd(e,r))})),t.isLeafNode()||t.forEachChild(ad,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(wd(t,r,i))}else n.trackChildChange(gd(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?hd.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),bd=function(){function e(t){G(this,e),this.indexedFilter_=new _d(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return $(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new Vf(t,n))||(n=hd.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=hd.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(hd.EMPTY_NODE);var i=this;return t.forEachChild(ad,(function(e,t){i.matches(new Vf(e,t))||(r=r.updateImmediateChild(e,hd.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),xd=function(){function e(t){var n=this;G(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new bd(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return $(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new Vf(t,n))||(n=hd.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=hd.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=hd.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(this.withinDirectionalStart(o)){if(!this.withinDirectionalEnd(o))break;r=r.updateImmediateChild(o.name,o.node),a++}}}else{var u;r=(r=t.withIndex(this.index_)).updatePriority(hd.EMPTY_NODE),u=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var s=0;u.hasNext();){var c=u.getNext();s<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?s++:r=r.updateImmediateChild(c.name,hd.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;Et(u.numChildren()===this.limit_,"");var s=new Vf(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var h=u.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(wd(t,n,h)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(kd(t,h));var p=u.updateImmediateChild(t,hd.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(gd(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(kd(c.name,c.node)),i.trackChildChange(gd(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,hd.EMPTY_NODE)):e}}]),e}(),Id=function(){function e(){G(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ad}return $(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Et(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Et(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ph}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Et(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Et(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Dh}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Et(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===ad}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Ed(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Sd(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Td(e,t){var n=e.copy();return n.index_=t,n}function Cd(e){var t,n={};if(e.isDefault())return n;if(e.index_===ad?t="$priority":e.index_===yd?t="$value":e.index_===Bf?t="$key":(Et(e.index_ instanceof pd,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Jt(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=Jt(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+Jt(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=Jt(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+Jt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function Nd(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==ad&&(t.i=e.index_.toString()),t}var Ad=function(e){vt(n,e);var t=kt(n);function n(e,r,i,a){var o;return G(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=Th("p:rest:"),o.listens_={},o}return $(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=Cd(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),en(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=Cd(e._queryParams),r=e._path.toString(),i=new Wt;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=c(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+on(n);t.log_("Sending REST request for "+s);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+s+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=$t(l.responseText)}catch(n){Ah("Failed to parse JSON response for "+s+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&Ah("Got unsuccessful REST response for "+s+" Status: "+l.status),r(l.status);r=null}},l.open("GET",s,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Et(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(vf),Rd=function(){function e(){G(this,e),this.rootNode_=hd.EMPTY_NODE}return $(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Pd(){return{value:null,children:new Map}}function Dd(e,t,n){if(Tf(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=wf(t);e.children.has(r)||e.children.set(r,Pd()),Dd(e.children.get(r),t=bf(t),n)}}function Od(e,t){if(Tf(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(ad,(function(t,n){Dd(e,new gf(t),n)})),Od(e,t)}if(e.children.size>0){var r=wf(t);if(t=bf(t),e.children.has(r))Od(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function Ld(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Ld(r,new gf(t.toString()+"/"+e),n)}))}var Md,Fd=function(){function e(t){G(this,e),this.collection_=t,this.last_=null}return $(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Vh(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Ud=function(){function e(t,n){G(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Fd(t);var r=1e4+2e4*Math.random();Wh(this.reportStats_.bind(this),Math.floor(r))}return $(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Vh(t,(function(t,i){i>0&&Zt(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),Wh(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Vd(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Md||(Md={}));var qd,jd=function(){function e(t,n,r){G(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Md.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return $(e,[{key:"operationForChild",value:function(t){if(Tf(this.path)){if(null!=this.affectedTree.value)return Et(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new gf(t));return new e(kf(),n,this.revert)}return Et(wf(this.path)===t,"operationForChild called for unrelated child."),new e(bf(this.path),this.affectedTree,this.revert)}}]),e}(),Bd=function(){function e(t,n){G(this,e),this.source=t,this.path=n,this.type=Md.LISTEN_COMPLETE}return $(e,[{key:"operationForChild",value:function(t){return Tf(this.path)?new e(this.source,kf()):new e(this.source,bf(this.path))}}]),e}(),zd=function(){function e(t,n,r){G(this,e),this.source=t,this.path=n,this.snap=r,this.type=Md.OVERWRITE}return $(e,[{key:"operationForChild",value:function(t){return Tf(this.path)?new e(this.source,kf(),this.snap.getImmediateChild(t)):new e(this.source,bf(this.path),this.snap)}}]),e}(),Wd=function(){function e(t,n,r){G(this,e),this.source=t,this.path=n,this.children=r,this.type=Md.MERGE}return $(e,[{key:"operationForChild",value:function(t){if(Tf(this.path)){var n=this.children.subtree(new gf(t));return n.isEmpty()?null:n.value?new zd(this.source,kf(),n.value):new e(this.source,kf(),n)}return Et(wf(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,bf(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),Kd=function(){function e(t,n,r){G(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return $(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Tf(e))return this.isFullyInitialized()&&!this.filtered_;var t=wf(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),Hd=$((function e(t){G(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function Gd(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw St("Should only compare child_ events.");var r=new Vf(t.childName,t.snapshotNode),i=new Vf(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Qd(e,t){return{eventCache:e,serverCache:t}}function Yd(e,t,n,r){return Qd(new Kd(t,n,r),e.serverCache)}function $d(e,t,n,r){return Qd(e.eventCache,new Kd(t,n,r))}function Jd(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Xd(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Zd=function(){return qd||(qd=new Gf(Lh)),qd},ep=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zd();G(this,e),this.value=t,this.children=n}return $(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:kf(),value:this.value};if(Tf(e))return null;var n=wf(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(bf(e),t);return null!=i?{path:Sf(new gf(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Tf(t))return this;var n=wf(t),r=this.children.get(n);return null!==r?r.subtree(bf(t)):new e(null)}},{key:"set",value:function(t,n){if(Tf(t))return new e(n,this.children);var r=wf(t),i=(this.children.get(r)||new e(null)).set(bf(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Tf(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=wf(t),r=this.children.get(n);if(r){var i,a=r.remove(bf(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Tf(e))return this.value;var t=wf(e),n=this.children.get(t);return n?n.get(bf(e)):null}},{key:"setTree",value:function(t,n){if(Tf(t))return n;var r,i=wf(t),a=(this.children.get(i)||new e(null)).setTree(bf(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(kf(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Sf(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,kf(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Tf(e))return null;var i=wf(e),a=this.children.get(i);return a?a.findOnPath_(bf(e),Sf(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,kf(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Tf(t))return this;this.value&&r(n,this.value);var i=wf(t),a=this.children.get(i);return a?a.foreachOnPath_(bf(t),Sf(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(kf(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Sf(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return Vh(t,(function(e,t){n=n.set(new gf(e),t)})),n}}]),e}(),tp=function(){function e(t){G(this,e),this.writeTree_=t}return $(e,null,[{key:"empty",value:function(){return new e(new ep(null))}}]),e}();function np(e,t,n){if(Tf(t))return new tp(new ep(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=Cf(i,t);return a=a.updateChild(o,n),new tp(e.writeTree_.set(i,a))}var u=new ep(n),s=e.writeTree_.setTree(t,u);return new tp(s)}function rp(e,t,n){var r=e;return Vh(n,(function(e,n){r=np(r,Sf(t,e),n)})),r}function ip(e,t){if(Tf(t))return tp.empty();var n=e.writeTree_.setTree(t,new ep(null));return new tp(n)}function ap(e,t){return null!=op(e,t)}function op(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Cf(n.path,t)):null}function up(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ad,(function(e,n){t.push(new Vf(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Vf(e,n.value))})),t}function sp(e,t){if(Tf(t))return e;var n=op(e,t);return new tp(null!=n?new ep(n):e.writeTree_.subtree(t))}function cp(e){return e.writeTree_.isEmpty()}function lp(e,t){return hp(kf(),e.writeTree_,t)}function hp(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Et(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=hp(Sf(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Sf(e,".priority"),r)),n}function fp(e,t){return Sp(t,e)}function dp(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function pp(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Et(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&vp(u,r.path)?i=!1:Rf(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=mp(e.allWrites,yp,kf()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=ip(e.visibleWrites,r.path):Vh(r.children,(function(t){e.visibleWrites=ip(e.visibleWrites,Sf(r.path,t))}));return!0}return!1}function vp(e,t){if(e.snap)return Rf(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Rf(Sf(e.path,n),t))return!0;return!1}function yp(e){return e.visible}function mp(e,t,n){for(var r=tp.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)Rf(n,o)?r=np(r,u=Cf(n,o),a.snap):Rf(o,n)&&(u=Cf(o,n),r=np(r,kf(),a.snap.getChild(u)));else{if(!a.children)throw St("WriteRecord should have .snap or .children");if(Rf(n,o))r=rp(r,u=Cf(n,o),a.children);else if(Rf(o,n))if(Tf(u=Cf(o,n)))r=rp(r,kf(),a.children);else{var s=en(a.children,wf(u));if(s){var c=s.getChild(bf(u));r=np(r,kf(),c)}}}}}return r}function gp(e,t,n,r,i){if(r||i){var a=sp(e.visibleWrites,t);if(!i&&cp(a))return n;if(i||null!=n||ap(a,kf())){return lp(mp(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Rf(e.path,t)||Rf(t,e.path))}),t),n||hd.EMPTY_NODE)}return null}var o=op(e.visibleWrites,t);if(null!=o)return o;var u=sp(e.visibleWrites,t);return cp(u)?n:null!=n||ap(u,kf())?lp(u,n||hd.EMPTY_NODE):null}function kp(e,t,n,r){return gp(e.writeTree,e.treePath,t,n,r)}function wp(e,t){return function(e,t,n){var r=hd.EMPTY_NODE,i=op(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ad,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=sp(e.visibleWrites,t);return n.forEachChild(ad,(function(e,t){var n=lp(sp(a,new gf(e)),t);r=r.updateImmediateChild(e,n)})),up(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return up(sp(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function _p(e,t,n,r){return function(e,t,n,r,i){Et(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Sf(t,n);if(ap(e.visibleWrites,a))return null;var o=sp(e.visibleWrites,a);return cp(o)?i.getChild(n):lp(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function bp(e,t){return function(e,t){return op(e.visibleWrites,t)}(e.writeTree,Sf(e.treePath,t))}function xp(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=sp(e.visibleWrites,t),c=op(s,kf());if(null!=c)u=c;else{if(null==n)return[];u=lp(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function Ip(e,t,n){return function(e,t,n,r){var i=Sf(t,n),a=op(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?lp(sp(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Ep(e,t){return Sp(Sf(e.treePath,t),e.writeTree)}function Sp(e,t){return{treePath:e,writeTree:t}}var Tp=function(){function e(){G(this,e),this.changeMap=new Map}return $(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Et("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Et(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,wd(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,kd(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,gd(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw St("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,wd(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),Cp=new(function(){function e(){G(this,e)}return $(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),Np=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;G(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return $(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Kd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ip(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Xd(this.viewCache_),i=xp(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function Ap(e,t,n,r,i){var a,o,u=new Tp;if(n.type===Md.OVERWRITE){var s=n;s.source.fromUser?a=Dp(e,t,s.path,s.snap,r,i,u):(Et(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!Tf(s.path),a=Pp(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===Md.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=Sf(n,r);Op(t,wf(c))&&(u=Dp(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=Sf(n,r);Op(t,wf(c))||(u=Dp(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(Et(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=Mp(e,t,c.path,c.children,r,i,o,u))}else if(n.type===Md.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=bp(r,n))return t;var u,s=new Np(r,t,i),c=t.eventCache.getNode();if(Tf(n)||".priority"===wf(n)){var l;if(t.serverCache.isFullyInitialized())l=kp(r,Xd(t));else{var h=t.serverCache.getNode();Et(h instanceof hd,"serverChildren would be complete if leaf node"),l=wp(r,h)}u=e.filter.updateFullNode(c,l,a)}else{var f=wf(n),d=Ip(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(u=null!=d?e.filter.updateChild(c,f,d,bf(n),s,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,hd.EMPTY_NODE,bf(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=kp(r,Xd(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=bp(r,kf()),Yd(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=bp(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(Tf(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return Pp(e,t,n,s.getNode().getChild(n),i,a,u,o);if(Tf(n)){var c=new ep(null);return s.getNode().forEachChild(Bf,(function(e,t){c=c.set(new gf(e),t)})),Mp(e,t,n,c,i,a,u,o)}return t}var l=new ep(null);return r.foreach((function(e,t){var r=Sf(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),Mp(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==Md.LISTEN_COMPLETE)throw St("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=$d(t,a.getNode(),a.isFullyInitialized()||Tf(n),a.isFiltered());return Rp(e,o,n,r,Cp,i)}(e,t,n.path,r,u)}var h=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Jd(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(md(Jd(t)))}}(t,a,h),{viewCache:a,changes:h}}function Rp(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=bp(r,n))return t;if(Tf(n))if(Et(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=Xd(t),l=wp(r,c instanceof hd?c:hd.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=kp(r,Xd(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=wf(n);if(".priority"===f){Et(1===_f(n),"Can't have a priority with additional path components");var d=s.getNode(),p=_p(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,y=bf(n);if(s.isCompleteForChild(f)){u=t.serverCache.getNode();var m=_p(r,n,s.getNode(),u);v=null!=m?s.getNode().getImmediateChild(f).updateChild(y,m):s.getNode().getImmediateChild(f)}else v=Ip(r,f,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),f,v,y,i,a):s.getNode()}}return Yd(t,o,s.isFullyInitialized()||Tf(n),e.filter.filtersNodes())}function Pp(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(Tf(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),h,null)}else{var f=wf(n);if(!c.isCompleteForPath(n)&&_f(n)>1)return t;var d=bf(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);s=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,Cp,null)}var v=$d(t,s,c.isFullyInitialized()||Tf(n),l.filtersNodes());return Rp(e,v,n,i,new Np(i,v,a),u)}function Dp(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new Np(i,t,a);if(Tf(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=Yd(t,s,!0,e.filter.filtersNodes());else{var h=wf(n);if(".priority"===h)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=Yd(t,s,c.isFullyInitialized(),c.isFiltered());else{var f,d=bf(n),p=c.getNode().getImmediateChild(h);if(Tf(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===xf(d)&&v.getChild(Ef(d)).isEmpty()?v:v.updateChild(d,r):hd.EMPTY_NODE}if(p.equals(f))u=t;else u=Yd(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function Op(e,t){return e.eventCache.isCompleteForChild(t)}function Lp(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Mp(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=Tf(n)?r:new ep(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=Lp(0,t.serverCache.getNode().getImmediateChild(n),r);c=Pp(e,c,new gf(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!s){var h=Lp(0,t.serverCache.getNode().getImmediateChild(n),r);c=Pp(e,c,new gf(n),h,i,a,o,u)}})),c}var Fp,Up=function(){function e(t,n){G(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new _d(i.getIndex()),o=(r=i).loadsAllData()?new _d(r.getIndex()):r.hasLimit()?new xd(r):new bd(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(hd.EMPTY_NODE,u.getNode(),null),l=o.updateFullNode(hd.EMPTY_NODE,s.getNode(),null),h=new Kd(c,u.isFullyInitialized(),a.filtersNodes()),f=new Kd(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=Qd(f,h),this.eventGenerator_=new Hd(this.query_)}return $(e,[{key:"query",get:function(){return this.query_}}]),e}();function Vp(e,t){var n=Xd(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Tf(t)&&!n.getImmediateChild(wf(t)).isEmpty())?n.getChild(t):null}function qp(e){return 0===e.eventRegistrations_.length}function jp(e,t,n){var r=[];if(n){Et(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function Bp(e,t,n,r){t.type===Md.MERGE&&null!==t.source.queryId&&(Et(Xd(e.viewCache_),"We should always have a full cache before handling merges"),Et(Jd(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=Ap(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,Et(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Et(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Et(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,zp(e,u.changes,u.viewCache.eventCache.getNode(),null)}function zp(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Gd(e,i,"child_removed",t,r,n),Gd(e,i,"child_added",t,r,n),Gd(e,i,"child_moved",a,r,n),Gd(e,i,"child_changed",t,r,n),Gd(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var Wp,Kp=$((function e(){G(this,e),this.views=new Map}));function Hp(e){return 0===e.views.size}function Gp(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Et(null!=a,"SyncTree gave us an op for an invalid query."),Bp(a,t,n,r)}var o,u=[],s=ft(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(Bp(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function Qp(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=kp(n,i?r:null),s=!1;u?s=!0:r instanceof hd?(u=wp(n,r),s=!1):(u=hd.EMPTY_NODE,s=!1);var c=Qd(new Kd(u,s,!1),new Kd(r,i,!1));return new Up(t,c)}return o}function Yp(e,t,n,r,i,a){var o=Qp(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ad,(function(e,t){r.push(gd(e,t))})),n.isFullyInitialized()&&r.push(md(n.getNode())),zp(e,r,n.getNode(),t)}(o,n)}function $p(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=tv(e);if("default"===i){var s,l=ft(e.views.entries());try{for(l.s();!(s=l.n()).done;){var h=c(s.value,2),f=h[0],d=h[1];o=o.concat(jp(d,n,r)),qp(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){l.e(v)}finally{l.f()}}else{var p=e.views.get(i);p&&(o=o.concat(jp(p,n,r)),qp(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return u&&!tv(e)&&a.push(new(Et(Fp,"Reference.ts has not been loaded"),Fp)(t._repo,t._path)),{removed:a,events:o}}function Jp(e){var t,n=[],r=ft(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function Xp(e,t){var n,r=null,i=ft(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||Vp(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function Zp(e,t){if(t._queryParams.loadsAllData())return nv(e);var n=t._queryIdentifier;return e.views.get(n)}function ev(e,t){return null!=Zp(e,t)}function tv(e){return null!=nv(e)}function nv(e){var t,n=ft(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var rv=1,iv=$((function e(t){G(this,e),this.listenProvider_=t,this.syncPointTree_=new ep(null),this.pendingWriteTree_={visibleWrites:tp.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function av(e,t,n,r,i){return function(e,t,n,r,i){Et(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=np(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?pv(e,new zd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function ov(e,t,n,r){!function(e,t,n,r){Et(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=rp(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=ep.fromObject(n);return pv(e,new Wd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function uv(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=dp(e.pendingWriteTree_,t),i=pp(e.pendingWriteTree_,t);if(i){var a=new ep(null);return null!=r.snap?a=a.set(kf(),!0):Vh(r.children,(function(e){a=a.set(new gf(e),!0)})),pv(e,new jd(r.path,a,n))}return[]}function sv(e,t,n){return pv(e,new zd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function cv(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),u=[];if(o&&("default"===t._queryIdentifier||ev(o,t))){var s=$p(o,t,n,r);Hp(o)&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=s.removed;if(u=s.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),h=e.syncPointTree_.findOnPath(a,(function(e,t){return tv(t)}));if(l&&!h){var f=e.syncPointTree_.subtree(a);if(!f.isEmpty())for(var d=xv(f),p=0;p<d.length;++p){var v=d[p],y=v.query,m=mv(e,v);e.listenProvider_.startListening(Iv(y),gv(e,y),m.hashFn,m.onComplete)}}if(!h&&c.length>0&&!r)if(l){var g=null;e.listenProvider_.stopListening(Iv(t),g)}else c.forEach((function(t){var n=e.queryToTagMap.get(kv(t));e.listenProvider_.stopListening(Iv(t),n)}))}Ev(e,c)}return u}function lv(e,t,n,r){var i=wv(e,r);if(null!=i){var a=_v(i),o=a.path,u=a.queryId,s=Cf(o,t);return bv(e,o,new zd(Vd(u),s,n))}return[]}function hv(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=Cf(e,i);a=a||Xp(t,n),o=o||tv(t)}));var u,s=e.syncPointTree_.get(i);if(s?(o=o||tv(s),a=a||Xp(s,kf())):(s=new Kp,e.syncPointTree_=e.syncPointTree_.set(i,s)),null!=a)u=!0;else{u=!1,a=hd.EMPTY_NODE;var c=e.syncPointTree_.subtree(i);c.foreachChild((function(e,t){var n=Xp(t,kf());n&&(a=a.updateImmediateChild(e,n))}))}var l=ev(s,t);if(!l&&!t._queryParams.loadsAllData()){var h=kv(t);Et(!e.queryToTagMap.has(h),"View does not exist, but we have a tag");var f=Sv();e.queryToTagMap.set(h,f),e.tagToQueryMap.set(f,h)}var d=fp(e.pendingWriteTree_,i),p=Yp(s,t,n,d,a,u);if(!l&&!o&&!r){var v=Zp(s,t);p=p.concat(Tv(e,t,v))}return p}function fv(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Xp(n,Cf(e,t));if(r)return r}));return gp(r,t,i,n,!0)}function dv(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=Cf(e,n);r=r||Xp(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||Xp(i,kf()):(i=new Kp,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new Kd(r,!0,!1):null;return function(e){return Jd(e.viewCache_)}(Qp(i,t,fp(e.pendingWriteTree_,t._path),a?o.getNode():hd.EMPTY_NODE,a))}function pv(e,t){return vv(t,e.syncPointTree_,null,fp(e.pendingWriteTree_,kf()))}function vv(e,t,n,r){if(Tf(e.path))return yv(e,t,n,r);var i=t.get(kf());null==n&&null!=i&&(n=Xp(i,kf()));var a=[],o=wf(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=Ep(r,o);a=a.concat(vv(u,s,c,l))}return i&&(a=a.concat(Gp(i,e,r,n))),a}function yv(e,t,n,r){var i=t.get(kf());null==n&&null!=i&&(n=Xp(i,kf()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=Ep(r,t),s=e.operationForChild(t);s&&(a=a.concat(yv(s,i,o,u)))})),i&&(a=a.concat(Gp(i,e,r,n))),a}function mv(e,t){var n=t.query,r=gv(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||hd.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=wv(e,n);if(r){var i=_v(r),a=i.path,o=i.queryId,u=Cf(a,t);return bv(e,a,new Bd(Vd(o),u))}return[]}(e,n._path,r):function(e,t){return pv(e,new Bd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return cv(e,n,null,i)}}}function gv(e,t){var n=kv(t);return e.queryToTagMap.get(n)}function kv(e){return e._path.toString()+"$"+e._queryIdentifier}function wv(e,t){return e.tagToQueryMap.get(t)}function _v(e){var t=e.indexOf("$");return Et(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new gf(e.substr(0,t))}}function bv(e,t,n){var r=e.syncPointTree_.get(t);return Et(r,"Missing sync point for query tag that we're tracking"),Gp(r,n,fp(e.pendingWriteTree_,t),null)}function xv(e){return e.fold((function(e,t,n){if(t&&tv(t))return[nv(t)];var r=[];return t&&(r=Jp(t)),Vh(n,(function(e,t){r=r.concat(t)})),r}))}function Iv(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Et(Wp,"Reference.ts has not been loaded"),Wp)(e._repo,e._path):e}function Ev(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=kv(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}function Sv(){return rv++}function Tv(e,t,n){var r=t._path,i=gv(e,t),a=mv(e,n),o=e.listenProvider_.startListening(Iv(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)Et(!tv(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!Tf(e)&&t&&tv(t))return[nv(t).query];var r=[];return t&&(r=r.concat(Jp(t).map((function(e){return e.query})))),Vh(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening(Iv(l),gv(e,l))}return o}var Cv=function(){function e(t){G(this,e),this.node_=t}return $(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),Nv=function(){function e(t,n){G(this,e),this.syncTree_=t,this.path_=n}return $(e,[{key:"getImmediateChild",value:function(t){var n=Sf(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return fv(this.syncTree_,this.path_)}}]),e}(),Av=function(e,t,n){return e&&"object"===typeof e?(Et(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Rv(e[".sv"],t,n):"object"===typeof e[".sv"]?Pv(e[".sv"],t):void Et(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Rv=function(e,t,n){if("timestamp"===e)return n.timestamp;Et(!1,"Unexpected server value: "+e)},Pv=function(e,t,n){e.hasOwnProperty("increment")||Et(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Et(!1,"Unexpected increment value: "+r);var i=t.node();if(Et(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},Dv=function(e,t,n,r){return Lv(t,new Nv(n,e),r)},Ov=function(e,t,n){return Lv(e,new Cv(t),n)};function Lv(e,t,n){var r,i=e.getPriority().val(),a=Av(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=Av(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new td(u,dd(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new td(a))),s.forEachChild(ad,(function(e,i){var a=Lv(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var Mv=$((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};G(this,e),this.name=t,this.parent=n,this.node=r}));function Fv(e,t){for(var n=t instanceof gf?t:new gf(t),r=e,i=wf(n);null!==i;){var a=en(r.node.children,i)||{children:{},childCount:0};r=new Mv(i,r,a),i=wf(n=bf(n))}return r}function Uv(e){return e.node.value}function Vv(e,t){e.node.value=t,Wv(e)}function qv(e){return e.node.childCount>0}function jv(e,t){Vh(e.node.children,(function(n,r){t(new Mv(n,e,r))}))}function Bv(e,t,n,r){n&&!r&&t(e),jv(e,(function(e){Bv(e,t,!0,r)})),n&&r&&t(e)}function zv(e){return new gf(null===e.parent?e.name:zv(e.parent)+"/"+e.name)}function Wv(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Uv(e)&&!qv(e)}(n),i=Zt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Wv(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Wv(e))}(e.parent,e.name,e)}var Kv=/[\[\].#$\/\u0000-\u001F\u007F]/,Hv=/[\[\].#$\u0000-\u001F\u007F]/,Gv=10485760,Qv=function(e){return"string"===typeof e&&0!==e.length&&!Kv.test(e)},Yv=function(e){return"string"===typeof e&&0!==e.length&&!Hv.test(e)},$v=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!Rh(e)||e&&"object"===typeof e&&Zt(e,".sv")},Jv=function(e,t,n,r){r&&void 0===t||Xv(pn(e,"value"),t,n)},Xv=function e(t,n,r){var i=r instanceof gf?new Pf(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Of(i));if("function"===typeof n)throw new Error(t+"contains a function "+Of(i)+" with contents = "+n.toString());if(Rh(n))throw new Error(t+"contains "+n.toString()+" "+Of(i));if("string"===typeof n&&n.length>Gv/3&&mn(n)>Gv)throw new Error(t+"contains a string greater than "+Gv+" utf8 bytes "+Of(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(Vh(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!Qv(n)))throw new Error(t+" contains an invalid key ("+n+") "+Of(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=mn(s),Df(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=mn(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Of(i)+" in addition to actual children.")}},Zv=function(e,t,n,r){if(!r||void 0!==t){var i=pn(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];Vh(t,(function(e,t){var r=new gf(e);if(Xv(i,t,Sf(n,r)),".priority"===xf(r)&&!$v(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=If(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!Qv(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(Nf);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&Rf(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},ey=function(e,t,n){if(!n||void 0!==t){if(Rh(t))throw new Error(pn(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!$v(t))throw new Error(pn(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ty=function(e,t,n,r){if((!r||void 0!==n)&&!Qv(n))throw new Error(pn(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ny=function(e,t,n,r){if((!r||void 0!==n)&&!Yv(n))throw new Error(pn(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ry=function(e,t){if(".info"===wf(t))throw new Error(e+" failed = Can't modify data under /.info/")},iy=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Qv(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Yv(e)}(n))throw new Error(pn(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},ay=$((function e(){G(this,e),this.eventLists_=[],this.recursionDepth_=0}));function oy(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Af(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function uy(e,t,n){oy(e,n),cy(e,(function(e){return Af(e,t)}))}function sy(e,t,n){oy(e,n),cy(e,(function(e){return Rf(e,t)||Rf(t,e)}))}function cy(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(ly(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function ly(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();xh&&Sh("event: "+n.toString()),zh(r)}}}var hy="repo_interrupt",fy=function(){function e(t,n,r,i){G(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ay,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Pd(),this.transactionQueueTree_=new Mv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return $(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function dy(e,t,n){if(e.stats_=af(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Ad(e.repoInfo_,(function(t,n,r,i){yy(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return my(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Jt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Ff(e.repoInfo_,t,(function(t,n,r,i){yy(e,t,n,r,i)}),(function(t){my(e,t)}),(function(t){!function(e,t){Vh(t,(function(t,n){gy(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return rf[n]||(rf[n]=t()),rf[n]}(e.repoInfo_,(function(){return new Ud(e.stats_,e.server_)})),e.infoData_=new Rd,e.infoSyncTree_=new iv({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=sv(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),gy(e,"connected",!1),e.serverSyncTree_=new iv({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);sy(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function py(e){var t=e.infoData_.getNode(new gf(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function vy(e){return(t=(t={timestamp:py(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function yy(e,t,n,r,i){e.dataUpdateCount++;var a=new gf(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=nn(n,(function(e){return dd(e)}));o=function(e,t,n,r){var i=wv(e,r);if(i){var a=_v(i),o=a.path,u=a.queryId,s=Cf(o,t),c=ep.fromObject(n);return bv(e,o,new Wd(Vd(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=dd(n);o=lv(e.serverSyncTree_,a,s,i)}else if(r){var c=nn(n,(function(e){return dd(e)}));o=function(e,t,n){var r=ep.fromObject(n);return pv(e,new Wd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=dd(n);o=sv(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=Ay(e,a)),sy(e.eventQueue_,h,o)}function my(e,t){gy(e,"connected",t),!1===t&&function(e){Ey(e,"onDisconnectEvents");var t=vy(e),n=Pd();Ld(e.onDisconnect_,kf(),(function(r,i){var a=Dv(r,i,e.serverSyncTree_,t);Dd(n,r,a)}));var r=[];Ld(n,kf(),(function(t,n){r=r.concat(sv(e.serverSyncTree_,t,n));var i=Ly(e,t);Ay(e,i)})),e.onDisconnect_=Pd(),sy(e.eventQueue_,kf(),r)}(e)}function gy(e,t,n){var r=new gf("/.info/"+t),i=dd(n);e.infoData_.updateSnapshot(r,i);var a=sv(e.infoSyncTree_,r,i);sy(e.eventQueue_,r,a)}function ky(e){return e.nextWriteId_++}function wy(e,t,n,r,i){Ey(e,"set",{path:t.toString(),value:n,priority:r});var a=vy(e),o=dd(n,r),u=fv(e.serverSyncTree_,t),s=Ov(o,u,a),c=ky(e),l=av(e.serverSyncTree_,t,s,c,!0);oy(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||Ah("set at "+t+" failed: "+n);var o=uv(e.serverSyncTree_,c,!a);sy(e.eventQueue_,t,o),Sy(e,i,n,r)}));var h=Ly(e,t);Ay(e,h),sy(e.eventQueue_,h,[])}function _y(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&Od(e.onDisconnect_,t),Sy(e,n,r,i)}))}function by(e,t,n,r){var i=dd(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&Dd(e.onDisconnect_,t,i),Sy(e,r,n,a)}))}function xy(e,t,n){var r;r=".info"===wf(t._path)?cv(e.infoSyncTree_,t,n):cv(e.serverSyncTree_,t,n),uy(e.eventQueue_,t._path,r)}function Iy(e){e.persistentConnection_&&e.persistentConnection_.interrupt(hy)}function Ey(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Sh.apply(void 0,[t].concat(r))}function Sy(e,t,n,r){t&&zh((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function Ty(e,t,n){return fv(e.serverSyncTree_,t,n)||hd.EMPTY_NODE}function Cy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Oy(e,t),Uv(t)){var n=Py(e,t);Et(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&Ny(e,zv(t),n)}else qv(t)&&jv(t,(function(t){Cy(e,t)}))}function Ny(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=Ty(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];Et(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=Cf(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){Ey(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(uv(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);Oy(e,Fv(e.transactionQueueTree_,t)),Cy(e,e.transactionQueueTree_),sy(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)zh(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{Ah("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}Ay(e,t)}}),o)}function Ay(e,t){var n=Ry(e,t),r=zv(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s=t[a],c=Cf(n,s.path),l=!1,h=void 0;if(Et(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)l=!0,h=s.abortReason,i=i.concat(uv(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)l=!0,h="maxretry",i=i.concat(uv(e.serverSyncTree_,s.currentWriteId,!0));else{var f=Ty(e,s.path,o);s.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){Xv("transaction failed: Data returned ",d,s.path);var p=dd(d);"object"===typeof d&&null!=d&&Zt(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=s.currentWriteId,y=vy(e),m=Ov(p,f,y);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=m,s.currentWriteId=ky(e),o.splice(o.indexOf(v),1),i=(i=i.concat(av(e.serverSyncTree_,s.path,m,s.currentWriteId,s.applyLocally))).concat(uv(e.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(uv(e.serverSyncTree_,s.currentWriteId,!0))}sy(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},s=0;s<t.length;s++)u(s);Oy(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)zh(r[c]);Cy(e,e.transactionQueueTree_)}(e,Py(e,n),r),r}function Ry(e,t){var n,r=e.transactionQueueTree_;for(n=wf(t);null!==n&&void 0===Uv(r);)r=Fv(r,n),n=wf(t=bf(t));return r}function Py(e,t){var n=[];return Dy(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Dy(e,t,n){var r=Uv(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);jv(t,(function(t){Dy(e,t,n)}))}function Oy(e,t){var n=Uv(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Vv(t,n.length>0?n:void 0)}jv(t,(function(t){Oy(e,t)}))}function Ly(e,t){var n=zv(Ry(e,t)),r=Fv(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){My(e,t)})),My(e,r),Bv(r,(function(t){My(e,t)})),n}function My(e,t){var n=Uv(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Et(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Et(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(uv(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Vv(t,void 0):n.length=a+1,sy(e.eventQueue_,zv(t),i);for(var u=0;u<r.length;u++)zh(r[u])}}var Fy=function(e,t){var n=Uy(e),r=n.namespace;"firebase.com"===n.domain&&Nh(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Nh("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ah("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Zh(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new gf(n.pathString)}},Uy=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=ft(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Ah("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},Vy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",qy=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=Vy.charAt(n%64),n=Math.floor(n/64);Et(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=Vy.charAt(t[r]);return Et(20===o.length,"nextPushId: Length should be 20."),o}}(),jy=function(){function e(t,n,r,i){G(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return $(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+Jt(this.snapshot.exportVal())}}]),e}(),By=function(){function e(t,n,r){G(this,e),this.eventRegistration=t,this.error=n,this.path=r}return $(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),zy=function(){function e(t,n){G(this,e),this.snapshotCallback=t,this.cancelCallback=n}return $(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return Et(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),Wy=function(){function e(t,n){G(this,e),this._repo=t,this._path=n}return $(e,[{key:"cancel",value:function(){var e=new Wt;return _y(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){ry("OnDisconnect.remove",this._path);var e=new Wt;return by(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){ry("OnDisconnect.set",this._path),Jv("OnDisconnect.set",e,this._path,!1);var t=new Wt;return by(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){ry("OnDisconnect.setWithPriority",this._path),Jv("OnDisconnect.setWithPriority",e,this._path,!1),ey("OnDisconnect.setWithPriority",t,!1);var n=new Wt;return function(e,t,n,r,i){var a=dd(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&Dd(e.onDisconnect_,t,a),Sy(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){ry("OnDisconnect.update",this._path),Zv("OnDisconnect.update",e,this._path,!1);var t=new Wt;return function(e,t,n,r){if(tn(n))return Sh("onDisconnect().update() called with empty data.  Don't do anything."),void Sy(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&Vh(n,(function(n,r){var i=dd(r);Dd(e.onDisconnect_,Sf(t,n),i)})),Sy(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),Ky=function(){function e(t,n,r,i){G(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return $(e,[{key:"key",get:function(){return Tf(this._path)?null:xf(this._path)}},{key:"ref",get:function(){return new Yy(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=Nd(this._queryParams),t=Fh(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return Nd(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=gn(t))instanceof e))return!1;var n=this._repo===t._repo,r=Af(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function Hy(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Gy(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Bf){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Ph)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==Dh)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===ad){if(null!=t&&!$v(t)||null!=n&&!$v(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Et(e.getIndex()instanceof pd||e.getIndex()===yd,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Qy(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Yy=function(e){vt(n,e);var t=kt(n);function n(e,r){return G(this,n),t.call(this,e,r,new Id,!1)}return $(n,[{key:"parent",get:function(){var e=Ef(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(Ky),$y=function(){function e(t,n,r){G(this,e),this._node=t,this.ref=n,this._index=r}return $(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new gf(t),r=Zy(this.ref,t);return new e(this._node.getChild(n),r,ad)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,Zy(n.ref,r),ad))}))}},{key:"hasChild",value:function(e){var t=new gf(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function Jy(e,t){return(e=gn(e))._checkNotDeleted("ref"),void 0!==t?Zy(e._root,t):e._root}function Xy(e,t){(e=gn(e))._checkNotDeleted("refFromURL");var n=Fy(t,e._repo.repoInfo_.nodeAdmin);iy("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||Nh("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),Jy(e,n.path.toString())}function Zy(e,t){var n,r,i,a;return null===wf((e=gn(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),ny(n,r,i,a)):ny("child","path",t,!1),new Yy(e._repo,Sf(e._path,t))}function em(e,t){e=gn(e),ry("push",e._path),Jv("push",t,e._path,!0);var n,r=py(e._repo),i=qy(r),a=Zy(e,i),o=Zy(e,i);return n=null!=t?nm(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function tm(e){return ry("remove",e._path),nm(e,null)}function nm(e,t){e=gn(e),ry("set",e._path),Jv("set",t,e._path,!1);var n=new Wt;return wy(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function rm(e,t){e=gn(e),ry("setPriority",e._path),ey("setPriority",t,!1);var n=new Wt;return wy(e._repo,Sf(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function im(e,t,n){if(ry("setWithPriority",e._path),Jv("setWithPriority",t,e._path,!1),ey("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new Wt;return wy(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function am(e,t){Zv("update",t,e._path,!1);var n=new Wt;return function(e,t,n,r){Ey(e,"update",{path:t.toString(),value:n});var i=!0,a=vy(e),o={};if(Vh(n,(function(n,r){i=!1,o[n]=Dv(Sf(t,n),dd(r),e.serverSyncTree_,a)})),i)Sh("update() called with empty data.  Don't do anything."),Sy(0,r,"ok",void 0);else{var u=ky(e),s=ov(e.serverSyncTree_,t,o,u);oy(e.eventQueue_,s),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||Ah("update at "+t+" failed: "+n);var o=uv(e.serverSyncTree_,u,!a),s=o.length>0?Ay(e,t):t;sy(e.eventQueue_,s,o),Sy(0,r,n,i)})),Vh(n,(function(n){var r=Ly(e,Sf(t,n));Ay(e,r)})),sy(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function om(e){e=gn(e);var t=new zy((function(){})),n=new um(t);return function(e,t,n){var r=dv(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=dd(r).withIndex(t._queryParams.getIndex());if(hv(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=sv(e.serverSyncTree_,t._path,a);else{var o=gv(e.serverSyncTree_,t);i=lv(e.serverSyncTree_,t._path,a,o)}return sy(e.eventQueue_,t._path,i),cv(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return Ey(e,"get for query "+Jt(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new $y(t,new Yy(e._repo,e._path),e._queryParams.getIndex())}))}var um=function(){function e(t){G(this,e),this.callbackContext=t}return $(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new jy("value",this,new $y(e.snapshotNode,new Yy(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new By(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),sm=function(){function e(t,n){G(this,e),this.eventType=t,this.callbackContext=n}return $(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new By(this,e,t):null}},{key:"createEvent",value:function(e,t){Et(null!=e.childName,"Child events should have a childName.");var n=Zy(new Yy(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new jy(e.type,this,new $y(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function cm(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,u=function(t,n){xy(e._repo,e,c),o(t,n)};u.userCallback=n.userCallback,u.context=n.context,n=u}var s=new zy(n,a||void 0),c="value"===t?new um(s):new sm(t,s);return function(e,t,n){var r;r=".info"===wf(t._path)?hv(e.infoSyncTree_,t,n):hv(e.serverSyncTree_,t,n),uy(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return xy(e._repo,e,c)}}function lm(e,t,n,r){return cm(e,"value",t,n,r)}function hm(e,t,n,r){return cm(e,"child_added",t,n,r)}function fm(e,t,n,r){return cm(e,"child_changed",t,n,r)}function dm(e,t,n,r){return cm(e,"child_moved",t,n,r)}function pm(e,t,n,r){return cm(e,"child_removed",t,n,r)}function vm(e,t,n){var r=null,i=n?new zy(n):null;"value"===t?r=new um(i):t&&(r=new sm(t,i)),xy(e._repo,e,r)}var ym=$((function e(){G(this,e)})),mm=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this))._value=e,i._key=r,i}return $(n,[{key:"_apply",value:function(e){Jv("endAt",this._value,e._path,!0);var t=Sd(e._queryParams,this._value,this._key);if(Qy(t),Gy(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ky(e._repo,e._path,t,e._orderByCalled)}}]),n}(ym);function gm(e,t){return ty("endAt","key",t,!0),new mm(e,t)}var km=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this))._value=e,i._key=r,i}return $(n,[{key:"_apply",value:function(e){Jv("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===Bf||n?Sd(e,t,n):Sd(e,t,Ph)).endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(Qy(t),Gy(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ky(e._repo,e._path,t,e._orderByCalled)}}]),n}(ym);function wm(e,t){return ty("endBefore","key",t,!0),new km(e,t)}var _m=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this))._value=e,i._key=r,i}return $(n,[{key:"_apply",value:function(e){Jv("startAt",this._value,e._path,!0);var t=Ed(e._queryParams,this._value,this._key);if(Qy(t),Gy(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ky(e._repo,e._path,t,e._orderByCalled)}}]),n}(ym);function bm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return ty("startAt","key",t,!0),new _m(e,t)}var xm=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this))._value=e,i._key=r,i}return $(n,[{key:"_apply",value:function(e){Jv("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===Bf||n?Ed(e,t,n):Ed(e,t,Dh)).startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Qy(t),Gy(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ky(e._repo,e._path,t,e._orderByCalled)}}]),n}(ym);function Im(e,t){return ty("startAfter","key",t,!0),new xm(e,t)}var Em=function(e){vt(n,e);var t=kt(n);function n(e){var r;return G(this,n),(r=t.call(this))._limit=e,r}return $(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ky(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(ym);function Sm(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Em(e)}var Tm=function(e){vt(n,e);var t=kt(n);function n(e){var r;return G(this,n),(r=t.call(this))._limit=e,r}return $(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ky(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(ym);function Cm(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Tm(e)}var Nm=function(e){vt(n,e);var t=kt(n);function n(e){var r;return G(this,n),(r=t.call(this))._path=e,r}return $(n,[{key:"_apply",value:function(e){Hy(e,"orderByChild");var t=new gf(this._path);if(Tf(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new pd(t),r=Td(e._queryParams,n);return Gy(r),new Ky(e._repo,e._path,r,!0)}}]),n}(ym);function Am(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ny("orderByChild","path",e,!1),new Nm(e)}var Rm=function(e){vt(n,e);var t=kt(n);function n(){return G(this,n),t.apply(this,arguments)}return $(n,[{key:"_apply",value:function(e){Hy(e,"orderByKey");var t=Td(e._queryParams,Bf);return Gy(t),new Ky(e._repo,e._path,t,!0)}}]),n}(ym);function Pm(){return new Rm}var Dm=function(e){vt(n,e);var t=kt(n);function n(){return G(this,n),t.apply(this,arguments)}return $(n,[{key:"_apply",value:function(e){Hy(e,"orderByPriority");var t=Td(e._queryParams,ad);return Gy(t),new Ky(e._repo,e._path,t,!0)}}]),n}(ym);function Om(){return new Dm}var Lm=function(e){vt(n,e);var t=kt(n);function n(){return G(this,n),t.apply(this,arguments)}return $(n,[{key:"_apply",value:function(e){Hy(e,"orderByValue");var t=Td(e._queryParams,yd);return Gy(t),new Ky(e._repo,e._path,t,!0)}}]),n}(ym);function Mm(){return new Lm}var Fm=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this))._value=e,i._key=r,i}return $(n,[{key:"_apply",value:function(e){if(Jv("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new mm(this._value,this._key)._apply(new _m(this._value,this._key)._apply(e))}}]),n}(ym);function Um(e,t){return ty("equalTo","key",t,!0),new Fm(e,t)}function Vm(e){for(var t=gn(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];t=u._apply(t)}return t}!function(e){Et(!Fp,"__referenceConstructor has already been defined"),Fp=e}(Yy),function(e){Et(!Wp,"__referenceConstructor has already been defined"),Wp=e}(Yy);var qm={},jm=!1;function Bm(e,t,n,r){e.repoInfo_=new Zh("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function zm(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Nh("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Sh("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=Fy(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/netflixclone9449",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=Fy(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new Gh(Gh.OWNER):new Hh(e.name,e.options,t);iy("Invalid Firebase Database URL",u),Tf(u.path)||Nh("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=qm[t.name];i||(i={},qm[t.name]=i);var a=i[e.toURLString()];a&&Nh("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new fy(e,jm,n,r),i[e.toURLString()]=a,a}(s,e,l,new Kh(e.name,n));return new Wm(h,e)}var Wm=function(){function e(t,n){G(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return $(e,[{key:"_repo",get:function(){return this._instanceStarted||(dy(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new Yy(this._repo,kf())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=qm[t];n&&n[e.key]===e||Nh("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Iy(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Nh("Cannot call "+e+" on a deleted database.")}}]),e}();function Km(){df.IS_TRANSPORT_INITIALIZED&&Ah("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Hm(){Km(),cf.forceDisallow()}function Gm(){Km(),ff.forceDisallow(),cf.forceAllow()}function Qm(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=gn(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Nh("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Nh('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Gh(Gh.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:Kt(r.mockUserToken,e.app.options.projectId);a=new Gh(o)}Bm(i,t,n,a)}function Ym(e){(e=gn(e))._checkNotDeleted("goOffline"),Iy(e._repo)}function $m(e){var t;(e=gn(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(hy)}function Jm(e,t){Eh(e,t)}var Xm={".sv":"timestamp"};var Zm=function(){function e(t,n){G(this,e),this.committed=t,this.snapshot=n}return $(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function eg(e,t,n){var r;if(e=gn(e),ry("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new Wt,o=lm(e,(function(){}));return function(e,t,n,r,i,a){Ey(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:wh(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=Ty(e,t,void 0);o.currentInputSnapshot=u;var s=o.update(u.val());if(void 0===s)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Xv("transaction failed: Data returned ",s,o.path),o.status=0;var c,l=Fv(e.transactionQueueTree_,t),h=Uv(l)||[];h.push(o),Vv(l,h),"object"===typeof s&&null!==s&&Zt(s,".priority")?(c=en(s,".priority"),Et($v(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(fv(e.serverSyncTree_,t)||hd.EMPTY_NODE).getPriority().val();var f=vy(e),d=dd(s,c),p=Ov(d,u,f);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=ky(e);var v=av(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);sy(e.eventQueue_,t,v),Cy(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new $y(r,new Yy(e._repo,e._path),ad),a.resolve(new Zm(n,i)))}),o,i),a.promise}Ff.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Ff.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){dh(yr),cr(new _n("database",(function(e,t){var n=t.instanceIdentifier;return zm(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),br(lh,hh,e),br(lh,hh,"esm2017")}();var tg=new Pn("@firebase/database-compat"),ng=function(e){var t="FIREBASE WARNING: "+e;tg.warn(t)},rg=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(pn(e,t)+"must be a boolean.")},ig=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(pn(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ag=function(){function e(t){G(this,e),this._delegate=t}return $(e,[{key:"cancel",value:function(e){dn("OnDisconnect.cancel",0,1,arguments.length),vn("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){dn("OnDisconnect.remove",0,1,arguments.length),vn("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){dn("OnDisconnect.set",1,2,arguments.length),vn("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){dn("OnDisconnect.setWithPriority",2,3,arguments.length),vn("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(dn("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,ng("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}vn("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),og=function(){function e(t,n){G(this,e),this.committed=t,this.snapshot=n}return $(e,[{key:"toJSON",value:function(){return dn("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),ug=function(){function e(t,n){G(this,e),this._database=t,this._delegate=n}return $(e,[{key:"val",value:function(){return dn("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return dn("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return dn("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return dn("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return dn("DataSnapshot.child",0,1,arguments.length),t=String(t),ny("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return dn("DataSnapshot.hasChild",1,1,arguments.length),ny("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return dn("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return dn("DataSnapshot.forEach",1,1,arguments.length),vn("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return dn("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return dn("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return dn("DataSnapshot.ref",0,0,arguments.length),new cg(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),sg=function(){function e(t,n){G(this,e),this.database=t,this._delegate=n}return $(e,[{key:"on",value:function(t,n,r,i){var a,o=this;dn("Query.on",2,4,arguments.length),vn("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),s=function(e,t){n.call(u.context,new ug(o.database,e),t)};s.userCallback=n,s.context=u.context;var c=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(t){case"value":return lm(this._delegate,s,c),n;case"child_added":return hm(this._delegate,s,c),n;case"child_removed":return pm(this._delegate,s,c),n;case"child_changed":return fm(this._delegate,s,c),n;case"child_moved":return dm(this._delegate,s,c),n;default:throw new Error(pn("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(dn("Query.off",0,3,arguments.length),ig("Query.off",e,!0),vn("Query.off","callback",t,!0),yn("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,vm(this._delegate,e,r)}else vm(this._delegate,e)}},{key:"get",value:function(){var e=this;return om(this._delegate).then((function(t){return new ug(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;dn("Query.once",1,4,arguments.length),vn("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),u=new Wt,s=function(e,t){var r=new ug(a.database,e);n&&n.call(o.context,r,t),u.resolve(r)};s.userCallback=n,s.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),u.reject(e)};switch(t){case"value":lm(this._delegate,s,c,{onlyOnce:!0});break;case"child_added":hm(this._delegate,s,c,{onlyOnce:!0});break;case"child_removed":pm(this._delegate,s,c,{onlyOnce:!0});break;case"child_changed":fm(this._delegate,s,c,{onlyOnce:!0});break;case"child_moved":dm(this._delegate,s,c,{onlyOnce:!0});break;default:throw new Error(pn("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}},{key:"limitToFirst",value:function(t){return dn("Query.limitToFirst",1,1,arguments.length),new e(this.database,Vm(this._delegate,Sm(t)))}},{key:"limitToLast",value:function(t){return dn("Query.limitToLast",1,1,arguments.length),new e(this.database,Vm(this._delegate,Cm(t)))}},{key:"orderByChild",value:function(t){return dn("Query.orderByChild",1,1,arguments.length),new e(this.database,Vm(this._delegate,Am(t)))}},{key:"orderByKey",value:function(){return dn("Query.orderByKey",0,0,arguments.length),new e(this.database,Vm(this._delegate,Pm()))}},{key:"orderByPriority",value:function(){return dn("Query.orderByPriority",0,0,arguments.length),new e(this.database,Vm(this._delegate,Om()))}},{key:"orderByValue",value:function(){return dn("Query.orderByValue",0,0,arguments.length),new e(this.database,Vm(this._delegate,Mm()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return dn("Query.startAt",0,2,arguments.length),new e(this.database,Vm(this._delegate,bm(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return dn("Query.startAfter",0,2,arguments.length),new e(this.database,Vm(this._delegate,Im(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return dn("Query.endAt",0,2,arguments.length),new e(this.database,Vm(this._delegate,gm(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return dn("Query.endBefore",0,2,arguments.length),new e(this.database,Vm(this._delegate,wm(t,n)))}},{key:"equalTo",value:function(t,n){return dn("Query.equalTo",1,2,arguments.length),new e(this.database,Vm(this._delegate,Um(t,n)))}},{key:"toString",value:function(){return dn("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return dn("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(dn("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new cg(this.database,new Yy(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,vn(e,"cancel",r.cancel,!0),r.context=n,yn(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(pn(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),cg=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this,e,new Ky(r._repo,r._path,new Id,!1))).database=e,i._delegate=r,i}return $(n,[{key:"getKey",value:function(){return dn("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return dn("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,Zy(this._delegate,e))}},{key:"getParent",value:function(){dn("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return dn("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){dn("Reference.set",1,2,arguments.length),vn("Reference.set","onComplete",t,!0);var n=nm(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(dn("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,ng("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ry("Reference.update",this._delegate._path),vn("Reference.update","onComplete",t,!0);var i=am(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){dn("Reference.setWithPriority",2,3,arguments.length),vn("Reference.setWithPriority","onComplete",n,!0);var r=im(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){dn("Reference.remove",0,1,arguments.length),vn("Reference.remove","onComplete",e,!0);var t=tm(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;dn("Reference.transaction",1,3,arguments.length),vn("Reference.transaction","transactionUpdate",e,!1),vn("Reference.transaction","onComplete",t,!0),rg("Reference.transaction","applyLocally",n,!0);var i=eg(this._delegate,e,{applyLocally:n}).then((function(e){return new og(e.committed,new ug(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){dn("Reference.setPriority",1,2,arguments.length),vn("Reference.setPriority","onComplete",t,!0);var n=rm(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;dn("Reference.push",0,2,arguments.length),vn("Reference.push","onComplete",t,!0);var i=em(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return ry("Reference.onDisconnect",this._delegate._path),new ag(new Wy(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(sg),lg=function(){function e(t,n){var r=this;G(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:Hm,forceLongPolling:Gm}}return $(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Qm(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(dn("database.ref",0,1,arguments.length),e instanceof cg){var t=Xy(this._delegate,e.toString());return new cg(this,t)}var n=Jy(this._delegate,e);return new cg(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";dn(t,1,1,arguments.length);var n=Xy(this._delegate,e);return new cg(this,n)}},{key:"goOffline",value:function(){return dn("database.goOffline",0,0,arguments.length),Ym(this._delegate)}},{key:"goOnline",value:function(){return dn("database.goOnline",0,0,arguments.length),$m(this._delegate)}}]),e}();lg.ServerValue={TIMESTAMP:Xm,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var hg=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,u=void 0!==o&&o;dh(r);var s=new xn("auth-internal",new Sn("database-standalone"));return s.setComponent(new _n("auth-internal",(function(){return i}),"PRIVATE")),{instance:new lg(zm(t,s,void 0,n,u),t),namespace:a}}}),fg=lg.ServerValue;!function(e){e.INTERNAL.registerComponent(new _n("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new lg(i,r)}),"PUBLIC").setServiceProps({Reference:cg,Query:sg,Database:lg,DataSnapshot:ug,enableLogging:Jm,INTERNAL:hg,ServerValue:fg}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.3.0")}(Hr);var dg,pg="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},vg={},yg=yg||{},mg=pg||self;function gg(){}function kg(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function wg(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var _g="closure_uid_"+(1e9*Math.random()>>>0),bg=0;function xg(e,t,n){return e.call.apply(e.bind,arguments)}function Ig(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Eg(e,t,n){return(Eg=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xg:Ig).apply(null,arguments)}function Sg(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Tg(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Cg(){this.s=this.s,this.o=this.o}Cg.prototype.s=!1,Cg.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,_g)&&e[_g]||(e[_g]=++bg))},Cg.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ng=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ag(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Rg(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(kg(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Pg(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Pg.prototype.h=function(){this.defaultPrevented=!0};var Dg=function(){if(!mg.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{mg.addEventListener("test",gg,t),mg.removeEventListener("test",gg,t)}catch(n){}return e}();function Og(e){return/^[\s\xa0]*$/.test(e)}var Lg=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Mg(e,t){return e<t?-1:e>t?1:0}function Fg(){var e=mg.navigator;return e&&(e=e.userAgent)?e:""}function Ug(e){return-1!=Fg().indexOf(e)}function Vg(e){return Vg[" "](e),e}Vg[" "]=gg;var qg,jg=Ug("Opera"),Bg=Ug("Trident")||Ug("MSIE"),zg=Ug("Edge"),Wg=zg||Bg,Kg=Ug("Gecko")&&!(-1!=Fg().toLowerCase().indexOf("webkit")&&!Ug("Edge"))&&!(Ug("Trident")||Ug("MSIE"))&&!Ug("Edge"),Hg=-1!=Fg().toLowerCase().indexOf("webkit")&&!Ug("Edge");function Gg(){var e=mg.document;return e?e.documentMode:void 0}e:{var Qg="",Yg=function(){var e=Fg();return Kg?/rv:([^\);]+)(\)|;)/.exec(e):zg?/Edge\/([\d\.]+)/.exec(e):Bg?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Hg?/WebKit\/(\S+)/.exec(e):jg?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Yg&&(Qg=Yg?Yg[1]:""),Bg){var $g=Gg();if(null!=$g&&$g>parseFloat(Qg)){qg=String($g);break e}}qg=Qg}var Jg,Xg={};function Zg(){return function(e){var t=Xg;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Lg(String(qg)).split("."),n=Lg("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Mg(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Mg(0==a[2].length,0==o[2].length)||Mg(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(mg.document&&Bg){var ek=Gg();Jg=ek||(parseInt(qg,10)||void 0)}else Jg=void 0;var tk=Jg;function nk(e,t){if(Pg.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Kg){e:{try{Vg(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:rk[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&nk.X.h.call(this)}}Tg(nk,Pg);var rk={2:"touch",3:"pen",4:"mouse"};nk.prototype.h=function(){nk.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ik="closure_listenable_"+(1e6*Math.random()|0),ak=0;function ok(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++ak,this.ba=this.ea=!1}function uk(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function sk(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function ck(e){var t={};for(var n in e)t[n]=e[n];return t}var lk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hk(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<lk.length;a++)n=lk[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function fk(e){this.src=e,this.g={},this.h=0}function dk(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Ng(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(uk(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function pk(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}fk.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=pk(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new ok(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var vk="closure_lm_"+(1e6*Math.random()|0),yk={};function mk(e,t,n,r,i){if(r&&r.once)return kk(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)mk(e,t[a],n,r,i);return null}return n=Sk(n),e&&e[ik]?e.N(t,n,wg(r)?!!r.capture:!!r,i):gk(e,t,n,!1,r,i)}function gk(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=wg(i)?!!i.capture:!!i,u=Ik(e);if(u||(e[vk]=u=new fk(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=xk;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Dg||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(bk(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function kk(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)kk(e,t[a],n,r,i);return null}return n=Sk(n),e&&e[ik]?e.O(t,n,wg(r)?!!r.capture:!!r,i):gk(e,t,n,!0,r,i)}function wk(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)wk(e,t[a],n,r,i);else r=wg(r)?!!r.capture:!!r,n=Sk(n),e&&e[ik]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=pk(a=e.g[t],n,r,i))&&(uk(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Ik(e))&&(t=e.g[t.toString()],e=-1,t&&(e=pk(t,n,r,i)),(n=-1<e?t[e]:null)&&_k(n))}function _k(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[ik])dk(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(bk(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ik(t))?(dk(n,e),0==n.h&&(n.src=null,t[vk]=null)):uk(e)}}}function bk(e){return e in yk?yk[e]:yk[e]="on"+e}function xk(e,t){if(e.ba)e=!0;else{t=new nk(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&_k(e),e=n.call(r,t)}return e}function Ik(e){return(e=e[vk])instanceof fk?e:null}var Ek="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sk(e){return"function"===typeof e?e:(e[Ek]||(e[Ek]=function(t){return e.handleEvent(t)}),e[Ek])}function Tk(){Cg.call(this),this.i=new fk(this),this.P=this,this.I=null}function Ck(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Pg(t,e);else if(t instanceof Pg)t.target=t.target||e;else{var i=t;hk(t=new Pg(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Nk(o,r,!0,t)&&i}if(i=Nk(o=t.g=e,r,!0,t)&&i,i=Nk(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Nk(o=t.g=n[a],r,!1,t)&&i}function Nk(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&dk(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Tg(Tk,Cg),Tk.prototype[ik]=!0,Tk.prototype.removeEventListener=function(e,t,n,r){wk(this,e,t,n,r)},Tk.prototype.M=function(){if(Tk.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)uk(n[r]);delete t.g[e],t.h--}}this.I=null},Tk.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Tk.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ak=mg.JSON.stringify;function Rk(){var e=Vk,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Pk,Dk=function(){function e(){G(this,e),this.h=this.g=null}return $(e,[{key:"add",value:function(e,t){var n=Ok.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Ok=new(function(){function e(t,n){G(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return $(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Lk}),(function(e){return e.reset()})),Lk=function(){function e(){G(this,e),this.next=this.g=this.h=null}return $(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Mk(e){mg.setTimeout((function(){throw e}),0)}function Fk(e,t){Pk||function(){var e=mg.Promise.resolve(void 0);Pk=function(){e.then(qk)}}(),Uk||(Pk(),Uk=!0),Vk.add(e,t)}var Uk=!1,Vk=new Dk;function qk(){for(var e;e=Rk();){try{e.h.call(e.g)}catch(n){Mk(n)}var t=Ok;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Uk=!1}function jk(e,t){Tk.call(this),this.h=e||1,this.g=t||mg,this.j=Eg(this.lb,this),this.l=Date.now()}function Bk(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function zk(e,t,n){if("function"===typeof e)n&&(e=Eg(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Eg(e.handleEvent,e)}return 2147483647<Number(t)?-1:mg.setTimeout(e,t||0)}function Wk(e){e.g=zk((function(){e.g=null,e.i&&(e.i=!1,Wk(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Tg(jk,Tk),(dg=jk.prototype).ca=!1,dg.R=null,dg.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ck(this,"tick"),this.ca&&(Bk(this),this.start()))}},dg.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},dg.M=function(){jk.X.M.call(this),Bk(this),delete this.g};var Kk=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return $(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Wk(this)}},{key:"M",value:function(){Yr(yt(n.prototype),"M",this).call(this),this.g&&(mg.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Cg);function Hk(e){Cg.call(this),this.h=e,this.g={}}Tg(Hk,Cg);var Gk=[];function Qk(e,t,n,r){Array.isArray(n)||(n&&(Gk[0]=n.toString()),n=Gk);for(var i=0;i<n.length;i++){var a=mk(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Yk(e){sk(e.g,(function(e,t){this.g.hasOwnProperty(t)&&_k(e)}),e),e.g={}}function $k(){this.g=!0}function Jk(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Ak(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Hk.prototype.M=function(){Hk.X.M.call(this),Yk(this)},Hk.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$k.prototype.Aa=function(){this.g=!1},$k.prototype.info=function(){};var Xk={},Zk=null;function ew(){return Zk=Zk||new Tk}function tw(e){Pg.call(this,Xk.Pa,e)}function nw(e){var t=ew();Ck(t,new tw(t))}function rw(e,t){Pg.call(this,Xk.STAT_EVENT,e),this.stat=t}function iw(e){var t=ew();Ck(t,new rw(t,e))}function aw(e,t){Pg.call(this,Xk.Qa,e),this.size=t}function ow(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return mg.setTimeout((function(){e()}),t)}Xk.Pa="serverreachability",Tg(tw,Pg),Xk.STAT_EVENT="statevent",Tg(rw,Pg),Xk.Qa="timingevent",Tg(aw,Pg);var uw={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},sw={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function cw(){}function lw(e){return e.h||(e.h=e.i())}function hw(){}cw.prototype.h=null;var fw,dw={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function pw(){Pg.call(this,"d")}function vw(){Pg.call(this,"c")}function yw(){}function mw(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new Hk(this),this.O=kw,e=Wg?125:void 0,this.T=new jk(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new gw}function gw(){this.i=null,this.g="",this.h=!1}Tg(pw,Pg),Tg(vw,Pg),Tg(yw,cw),yw.prototype.g=function(){return new XMLHttpRequest},yw.prototype.i=function(){return{}},fw=new yw;var kw=45e3,ww={},_w={};function bw(e,t,n){e.K=1,e.v=jw(Mw(t)),e.s=n,e.P=!0,xw(e,null)}function xw(e,t){e.F=Date.now(),Tw(e),e.A=Mw(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),e_(n.i,"t",r),e.C=0,n=e.l.H,e.h=new gw,e.g=tb(e.l,n?t:null,!e.s),0<e.N&&(e.L=new Kk(Eg(e.La,e,e.g),e.N)),Qk(e.S,e.g,"readystatechange",e.ib),t=e.H?ck(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),nw(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Iw(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function Ew(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Sw(e,n))==_w){4==t&&(e.o=4,iw(14),i=!1),Jk(e.j,e.m,null,"[Incomplete Response]");break}if(r==ww){e.o=4,iw(15),Jk(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Jk(e.j,e.m,r,null),Pw(e,r)}Iw(e)&&r!=_w&&r!=ww&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,iw(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),G_(t),t.K=!0,iw(11))):(Jk(e.j,e.m,n,"[Invalid Chunked Response]"),Rw(e),Aw(e))}function Sw(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?_w:(n=Number(t.substring(n,r)),isNaN(n)?ww:(r+=1)+n>t.length?_w:(t=t.substr(r,n),e.C=r+n,t))}function Tw(e){e.V=Date.now()+e.O,Cw(e,e.O)}function Cw(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ow(Eg(e.gb,e),t)}function Nw(e){e.B&&(mg.clearTimeout(e.B),e.B=null)}function Aw(e){0==e.l.G||e.I||$_(e.l,e)}function Rw(e){Nw(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Bk(e.T),Yk(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Pw(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||s_(n.h,e)))if(!e.J&&s_(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Y_(n),V_(n)}H_(n),iw(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=ow(Eg(n.cb,n),6e3));if(1>=u_(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else X_(n,11)}else if((e.J||n.g==e)&&Y_(n),!Og(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.h;h.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(c_(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.za=f,qw(r.F,r.D,f))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=eb(r,r.H?r.ka:null,r.V),d.J){l_(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(Nw(p),Tw(p)),r.g=d}else K_(r);0<n.i.length&&j_(n)}else"stop"!=a[0]&&"close"!=a[0]||X_(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?X_(n,7):U_(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}nw()}catch(a){}}function Dw(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(kg(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(kg(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(kg(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(dg=mw.prototype).setTimeout=function(e){this.O=e},dg.ib=function(e){e=e.target;var t=this.L;t&&3==P_(e)?t.l():this.La(e)},dg.La=function(e){try{if(e==this.g)e:{var t=P_(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||Wg||this.g&&(this.h.h||this.g.fa()||D_(this.g)))){this.I||4!=t||7==n||nw(),Nw(this);var r=this.g.aa();this.Y=r;t:if(Iw(this)){var i=D_(this.g);e="";var a=i.length,o=4==P_(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Rw(this),Aw(this);var u="";break t}this.h.i=new mg.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Og(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,iw(12),Rw(this),Aw(this);break e}Jk(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Pw(this,r)}this.P?(Ew(this,t,u),Wg&&this.i&&3==t&&(Qk(this.S,this.T,"tick",this.hb),this.T.start())):(Jk(this.j,this.m,u,null),Pw(this,u)),4==t&&Rw(this),this.i&&!this.I&&(4==t?$_(this.l,this):(this.i=!1,Tw(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,iw(12)):(this.o=0,iw(13)),Rw(this),Aw(this)}}}catch(t){}},dg.hb=function(){if(this.g){var e=P_(this.g),t=this.g.fa();this.C<t.length&&(Nw(this),Ew(this,e,t),this.i&&4!=e&&Tw(this))}},dg.cancel=function(){this.I=!0,Rw(this)},dg.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(nw(),iw(17)),Rw(this),this.o=2,Aw(this)):Cw(this,this.V-e)};var Ow=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lw(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Lw){this.h=void 0!==t?t:e.h,Fw(this,e.j),this.s=e.s,this.g=e.g,Uw(this,e.m),this.l=e.l,t=e.i;var n=new $w;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Vw(this,n),this.o=e.o}else e&&(n=String(e).match(Ow))?(this.h=!!t,Fw(this,n[1]||"",!0),this.s=Bw(n[2]||""),this.g=Bw(n[3]||"",!0),Uw(this,n[4]),this.l=Bw(n[5]||"",!0),Vw(this,n[6]||"",!0),this.o=Bw(n[7]||"")):(this.h=!!t,this.i=new $w(null,this.h))}function Mw(e){return new Lw(e)}function Fw(e,t,n){e.j=n?Bw(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Uw(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Vw(e,t,n){t instanceof $w?(e.i=t,function(e,t){t&&!e.j&&(Jw(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Xw(this,t),e_(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=zw(t,Qw)),e.i=new $w(t,e.h))}function qw(e,t,n){e.i.set(t,n)}function jw(e){return qw(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Bw(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function zw(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ww),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ww(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Lw.prototype.toString=function(){var e=[],t=this.j;t&&e.push(zw(t,Kw,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(zw(t,Kw,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(zw(n,"/"==n.charAt(0)?Gw:Hw,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",zw(n,Yw)),e.join("")};var Kw=/[#\/\?@]/g,Hw=/[#\?:]/g,Gw=/[#\?]/g,Qw=/[#\?@]/g,Yw=/#/g;function $w(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Jw(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Xw(e,t){Jw(e),t=t_(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Zw(e,t){return Jw(e),t=t_(e,t),e.g.has(t)}function e_(e,t,n){Xw(e,t),0<n.length&&(e.i=null,e.g.set(t_(e,t),Ag(n)),e.h+=n.length)}function t_(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(dg=$w.prototype).add=function(e,t){Jw(this),this.i=null,e=t_(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},dg.forEach=function(e,t){Jw(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},dg.oa=function(){Jw(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},dg.W=function(e){Jw(this);var t=[];if("string"===typeof e)Zw(this,e)&&(t=t.concat(this.g.get(t_(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},dg.set=function(e,t){return Jw(this),this.i=null,Zw(this,e=t_(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},dg.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},dg.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var n_=$((function e(t,n){G(this,e),this.h=t,this.g=n}));function r_(e){this.l=e||a_,mg.PerformanceNavigationTiming?e=0<(e=mg.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(mg.g&&mg.g.Ga&&mg.g.Ga()&&mg.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var i_,a_=10;function o_(e){return!!e.h||!!e.g&&e.g.size>=e.j}function u_(e){return e.h?1:e.g?e.g.size:0}function s_(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function c_(e,t){e.g?e.g.add(t):e.h=t}function l_(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function h_(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=ft(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Ag(e.i)}function f_(){}function d_(){this.g=new f_}function p_(e,t,n){var r=n||"";try{Dw(e,(function(e,n){var i=e;wg(e)&&(i=Ak(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function v_(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function y_(e){this.l=e.ac||null,this.j=e.jb||!1}function m_(e,t){Tk.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=g_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}r_.prototype.cancel=function(){if(this.i=h_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=ft(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},f_.prototype.stringify=function(e){return mg.JSON.stringify(e,void 0)},f_.prototype.parse=function(e){return mg.JSON.parse(e,void 0)},Tg(y_,cw),y_.prototype.g=function(){return new m_(this.l,this.j)},y_.prototype.i=(i_={},function(){return i_}),Tg(m_,Tk);var g_=0;function k_(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function w_(e){e.readyState=4,e.l=null,e.j=null,e.A=null,__(e)}function __(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(dg=m_.prototype).open=function(e,t){if(this.readyState!=g_)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,__(this)},dg.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||mg).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},dg.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,w_(this)),this.readyState=g_},dg.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,__(this)),this.g&&(this.readyState=3,__(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof mg.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;k_(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},dg.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?w_(this):__(this),3==this.readyState&&k_(this)}},dg.Va=function(e){this.g&&(this.response=this.responseText=e,w_(this))},dg.Ua=function(e){this.g&&(this.response=e,w_(this))},dg.ga=function(){this.g&&w_(this)},dg.setRequestHeader=function(e,t){this.v.append(e,t)},dg.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},dg.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(m_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var b_=mg.JSON.parse;function x_(e){Tk.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=I_,this.K=this.L=!1}Tg(x_,Tk);var I_="",E_=/^https?$/i,S_=["POST","PUT"];function T_(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,C_(e),A_(e)}function C_(e){e.D||(e.D=!0,Ck(e,"complete"),Ck(e,"error"))}function N_(e){if(e.h&&"undefined"!=typeof yg&&(!e.C[1]||4!=P_(e)||2!=e.aa()))if(e.v&&4==P_(e))zk(e.Ha,0,e);else if(Ck(e,"readystatechange"),4==P_(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Ow)[1]||null;if(!a&&mg.self&&mg.self.location){var o=mg.self.location.protocol;a=o.substr(0,o.length-1)}i=!E_.test(a?a.toLowerCase():"")}t=i}if(t)Ck(e,"complete"),Ck(e,"success");else{e.m=6;try{var u=2<P_(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",C_(e)}}finally{A_(e)}}}function A_(e,t){if(e.g){R_(e);var n=e.g,r=e.C[0]?gg:null;e.g=null,e.C=null,t||Ck(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function R_(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(mg.clearTimeout(e.A),e.A=null)}function P_(e){return e.g?e.g.readyState:0}function D_(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case I_:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(mb){return null}}function O_(e){var t="";return sk(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function L_(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=O_(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):qw(e,t,n))}function M_(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function F_(e){this.Ca=0,this.i=[],this.j=new $k,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=M_("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=M_("baseRetryDelayMs",5e3,e),this.bb=M_("retryDelaySeedMs",1e4,e),this.$a=M_("forwardChannelMaxRetries",2,e),this.ta=M_("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new r_(e&&e.concurrentRequestLimit),this.Fa=new d_,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function U_(e){if(q_(e),3==e.G){var t=e.U++,n=Mw(e.F);qw(n,"SID",e.I),qw(n,"RID",t),qw(n,"TYPE","terminate"),z_(e,n),(t=new mw(e,e.j,t,void 0)).K=2,t.v=jw(Mw(n)),n=!1,mg.navigator&&mg.navigator.sendBeacon&&(n=mg.navigator.sendBeacon(t.v.toString(),"")),!n&&mg.Image&&((new Image).src=t.v,n=!0),n||(t.g=tb(t.l,null),t.g.da(t.v)),t.F=Date.now(),Tw(t)}Z_(e)}function V_(e){e.g&&(G_(e),e.g.cancel(),e.g=null)}function q_(e){V_(e),e.u&&(mg.clearTimeout(e.u),e.u=null),Y_(e),e.h.cancel(),e.m&&("number"===typeof e.m&&mg.clearTimeout(e.m),e.m=null)}function j_(e){o_(e.h)||e.m||(e.m=!0,Fk(e.Ja,e),e.C=0)}function B_(e,t){var n;n=t?t.m:e.U++;var r=Mw(e.F);qw(r,"SID",e.I),qw(r,"RID",n),qw(r,"AID",e.T),z_(e,r),e.o&&e.s&&L_(r,e.o,e.s),n=new mw(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=W_(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),c_(e.h,n),bw(n,r,t)}function z_(e,t){e.ia&&sk(e.ia,(function(e,n){qw(t,n,e)})),e.l&&Dw({},(function(e,n){qw(t,n,e)}))}function W_(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Eg(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{p_(l,o,"req"+c+"_")}catch(h){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function K_(e){e.g||e.u||(e.Z=1,Fk(e.Ia,e),e.A=0)}function H_(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=ow(Eg(e.Ia,e),J_(e,e.A)),e.A++,!0)}function G_(e){null!=e.B&&(mg.clearTimeout(e.B),e.B=null)}function Q_(e){e.g=new mw(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=Mw(e.sa);qw(t,"RID","rpc"),qw(t,"SID",e.I),qw(t,"CI",e.L?"0":"1"),qw(t,"AID",e.T),qw(t,"TYPE","xmlhttp"),z_(e,t),e.o&&e.s&&L_(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=jw(Mw(t)),n.s=null,n.P=!0,xw(n,e)}function Y_(e){null!=e.v&&(mg.clearTimeout(e.v),e.v=null)}function $_(e,t){var n=null;if(e.g==t){Y_(e),G_(e),e.g=null;var r=2}else{if(!s_(e.h,t))return;n=t.D,l_(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Ck(r=ew(),new aw(r,n)),j_(e)}else K_(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(u_(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=ow(Eg(e.Ja,e,t),J_(e,e.C)),e.C++,!0))}(e,t)||2==r&&H_(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:X_(e,5);break;case 4:X_(e,10);break;case 3:X_(e,6);break;default:X_(e,2)}}function J_(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function X_(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Eg(e.kb,e);n||(n=new Lw("//www.google.com/images/cleardot.gif"),mg.location&&"http"==mg.location.protocol||Fw(n,"https"),jw(n)),function(e,t){var n=new $k;if(mg.Image){var r=new Image;r.onload=Sg(v_,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Sg(v_,n,r,"TestLoadImage: error",!1,t),r.onabort=Sg(v_,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Sg(v_,n,r,"TestLoadImage: timeout",!1,t),mg.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else iw(2);e.G=0,e.l&&e.l.va(t),Z_(e),q_(e)}function Z_(e){if(e.G=0,e.la=[],e.l){var t=h_(e.h);0==t.length&&0==e.i.length||(Rg(e.la,t),Rg(e.la,e.i),e.h.i.length=0,Ag(e.i),e.i.length=0),e.l.ua()}}function eb(e,t,n){var r=n instanceof Lw?Mw(n):new Lw(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Uw(r,r.m);else{var i=mg.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Lw(null,void 0);r&&Fw(a,r),t&&(a.g=t),i&&Uw(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&qw(r,n,t),qw(r,"VER",e.ma),z_(e,r),r}function tb(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new x_(new y_({jb:!0})):new x_(e.ra)).Ka(e.H),t}function nb(){}function rb(){if(Bg&&!(10<=Number(tk)))throw Error("Environmental error: no available transport.")}function ib(e,t){Tk.call(this),this.g=new F_(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!Og(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Og(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ub(this)}function ab(e){pw.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ob(){vw.call(this),this.status=1}function ub(e){this.g=e}(dg=x_.prototype).Ka=function(e){this.L=e},dg.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():fw.g(),this.C=this.u?lw(this.u):lw(fw),this.g.onreadystatechange=Eg(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void T_(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=ft(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=mg.FormData&&e instanceof mg.FormData,!(0<=Ng(S_,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,l=ft(n);try{for(l.s();!(s=l.n()).done;){var h=c(s.value,2),f=h[0],d=h[1];this.g.setRequestHeader(f,d)}}catch(p){l.e(p)}finally{l.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{R_(this),0<this.B&&((this.K=function(e){return Bg&&Zg()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Eg(this.qa,this)):this.A=zk(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){T_(this,u)}},dg.qa=function(){"undefined"!=typeof yg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ck(this,"timeout"),this.abort(8))},dg.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ck(this,"complete"),Ck(this,"abort"),A_(this))},dg.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),A_(this,!0)),x_.X.M.call(this)},dg.Ha=function(){this.s||(this.F||this.v||this.l?N_(this):this.fb())},dg.fb=function(){N_(this)},dg.aa=function(){try{return 2<P_(this)?this.g.status:-1}catch(i_){return-1}},dg.fa=function(){try{return this.g?this.g.responseText:""}catch(i_){return""}},dg.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),b_(t)}},dg.Ea=function(){return this.m},dg.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(dg=F_.prototype).ma=8,dg.G=1,dg.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new mw(this,this.j,e,void 0),n=this.s;if(this.S&&(n?hk(n=ck(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=W_(this,t,r),qw(i=Mw(this.F),"RID",e),qw(i,"CVER",22),this.D&&qw(i,"X-HTTP-Session-Id",this.D),z_(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(O_(n)))+"&"+r:this.o&&L_(i,this.o,n)),c_(this.h,t),this.Ya&&qw(i,"TYPE","init"),this.O?(qw(i,"$req",r),qw(i,"SID","null"),t.Z=!0,bw(t,i,null)):bw(t,i,r),this.G=2}}else 3==this.G&&(e?B_(this,e):0==this.i.length||o_(this.h)||B_(this))},dg.Ia=function(){if(this.u=null,Q_(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=ow(Eg(this.eb,this),e)}},dg.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,iw(10),V_(this),Q_(this))},dg.cb=function(){null!=this.v&&(this.v=null,V_(this),H_(this),iw(19))},dg.kb=function(e){e?(this.j.info("Successfully pinged google.com"),iw(2)):(this.j.info("Failed to ping google.com"),iw(1))},(dg=nb.prototype).xa=function(){},dg.wa=function(){},dg.va=function(){},dg.ua=function(){},dg.Ra=function(){},rb.prototype.g=function(e,t){return new ib(e,t)},Tg(ib,Tk),ib.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;iw(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=eb(e,null,e.V),j_(e)},ib.prototype.close=function(){U_(this.g)},ib.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ak(e),e=n);t.i.push(new n_(t.ab++,e)),3==t.G&&j_(t)},ib.prototype.M=function(){this.g.l=null,delete this.j,U_(this.g),delete this.g,ib.X.M.call(this)},Tg(ab,pw),Tg(ob,vw),Tg(ub,nb),ub.prototype.xa=function(){Ck(this.g,"a")},ub.prototype.wa=function(e){Ck(this.g,new ab(e))},ub.prototype.va=function(e){Ck(this.g,new ob)},ub.prototype.ua=function(){Ck(this.g,"b")},rb.prototype.createWebChannel=rb.prototype.g,ib.prototype.send=ib.prototype.u,ib.prototype.open=ib.prototype.m,ib.prototype.close=ib.prototype.close,uw.NO_ERROR=0,uw.TIMEOUT=8,uw.HTTP_ERROR=6,sw.COMPLETE="complete",hw.EventType=dw,dw.OPEN="a",dw.CLOSE="b",dw.ERROR="c",dw.MESSAGE="d",Tk.prototype.listen=Tk.prototype.N,x_.prototype.listenOnce=x_.prototype.O,x_.prototype.getLastError=x_.prototype.Oa,x_.prototype.getLastErrorCode=x_.prototype.Ea,x_.prototype.getStatus=x_.prototype.aa,x_.prototype.getResponseJson=x_.prototype.Sa,x_.prototype.getResponseText=x_.prototype.fa,x_.prototype.send=x_.prototype.da,x_.prototype.setWithCredentials=x_.prototype.Ka;var sb=vg.createWebChannelTransport=function(){return new rb},cb=vg.getStatEventTarget=function(){return ew()},lb=vg.ErrorCode=uw,hb=vg.EventType=sw,fb=vg.Event=Xk,db=vg.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},pb=vg.FetchXmlHttpFactory=y_,vb=vg.WebChannel=hw,yb=vg.XhrIo=x_,mb="@firebase/firestore",gb=function(){function e(t){G(this,e),this.uid=t}return $(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();gb.UNAUTHENTICATED=new gb(null),gb.GOOGLE_CREDENTIALS=new gb("google-credentials-uid"),gb.FIRST_PARTY=new gb("first-party-uid"),gb.MOCK_USER=new gb("mock-user");var kb="9.15.0",wb=new Pn("@firebase/firestore");function _b(){return wb.logLevel}function bb(e){if(wb.logLevel<=En.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Eb);wb.debug.apply(wb,["Firestore (".concat(kb,"): ").concat(e)].concat(wn(i)))}}function xb(e){if(wb.logLevel<=En.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Eb);wb.error.apply(wb,["Firestore (".concat(kb,"): ").concat(e)].concat(wn(i)))}}function Ib(e){if(wb.logLevel<=En.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Eb);wb.warn.apply(wb,["Firestore (".concat(kb,"): ").concat(e)].concat(wn(i)))}}function Eb(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Sb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(kb,") INTERNAL ASSERTION FAILED: ")+e;throw xb(t),new Error(t)}function Tb(e,t){e||Sb()}function Cb(e,t){return e}var Nb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ab=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return $(n)}(Ht),Rb=$((function e(){var t=this;G(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Pb=$((function e(t,n){G(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Db=function(){function e(){G(this,e)}return $(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(gb.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Ob=function(){function e(t){G(this,e),this.token=t,this.changeListener=null}return $(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Lb=function(){function e(t){G(this,e),this.t=t,this.currentUser=gb.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return $(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Rb;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Rb,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){bb("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(bb("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Rb)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(bb("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Tb("string"==typeof n.accessToken),new Pb(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Tb(null===e||"string"==typeof e),new gb(e)}}]),e}(),Mb=function(){function e(t,n,r,i){G(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=gb.FIRST_PARTY,this.p=new Map}return $(e,[{key:"I",value:function(){return this.g?this.g():(Tb(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),Fb=function(){function e(t,n,r,i){G(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return $(e,[{key:"getToken",value:function(){return Promise.resolve(new Mb(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(gb.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Ub=$((function e(t){G(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Vb=function(){function e(t){G(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return $(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&bb("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,bb("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){bb("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):bb("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Tb("string"==typeof t.token),e.A=t.token,new Ub(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function qb(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var jb=function(){function e(){G(this,e)}return $(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=qb(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Bb(e,t){return e<t?-1:e>t?1:0}function zb(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Wb(e){return e+"\0"}var Kb=function(){function e(t,n){if(G(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Ab(Nb.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ab(Nb.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Ab(Nb.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ab(Nb.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return $(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Bb(this.nanoseconds,e.nanoseconds):Bb(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Hb=function(){function e(t){G(this,e),this.timestamp=t}return $(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Kb(0,0))}},{key:"max",value:function(){return new e(new Kb(253402300799,999999999))}}]),e}(),Gb=function(){function e(t,n,r){G(this,e),void 0===n?n=0:n>t.length&&Sb(),void 0===r?r=t.length-n:r>t.length-n&&Sb(),this.segments=t,this.offset=n,this.len=r}return $(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Qb=function(e){vt(n,e);var t=kt(n);function n(){return G(this,n),t.apply(this,arguments)}return $(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Ab(Nb.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,wn(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Gb),Yb=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$b=function(e){vt(n,e);var t=kt(n);function n(){return G(this,n),t.apply(this,arguments)}return $(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Yb.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Ab(Nb.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Ab(Nb.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Ab(Nb.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Ab(Nb.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Gb),Jb=function(){function e(t){G(this,e),this.path=t}return $(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Qb.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Qb.fromString(t))}},{key:"fromName",value:function(t){return new e(Qb.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Qb.emptyPath())}},{key:"comparator",value:function(e,t){return Qb.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Qb(t.slice()))}}]),e}(),Xb=$((function e(t,n,r,i){G(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Zb(e){return e.fields.find((function(e){return 2===e.kind}))}function ex(e){return e.fields.filter((function(e){return 2!==e.kind}))}Xb.UNKNOWN_ID=-1;var tx=$((function e(t,n){G(this,e),this.fieldPath=t,this.kind=n}));var nx=function(){function e(t,n){G(this,e),this.sequenceNumber=t,this.offset=n}return $(e,null,[{key:"empty",value:function(){return new e(0,ax.min())}}]),e}();function rx(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Hb.fromTimestamp(1e9===r?new Kb(n+1,0):new Kb(n,r));return new ax(i,Jb.empty(),t)}function ix(e){return new ax(e.readTime,e.key,-1)}var ax=function(){function e(t,n,r){G(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return $(e,null,[{key:"min",value:function(){return new e(Hb.min(),Jb.empty(),-1)}},{key:"max",value:function(){return new e(Hb.max(),Jb.empty(),-1)}}]),e}();function ox(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Jb.comparator(e.documentKey,t.documentKey))?n:Bb(e.largestBatchId,t.largestBatchId)}var ux="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",sx=function(){function e(){G(this,e),this.onCommittedListeners=[]}return $(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function cx(e){return lx.apply(this,arguments)}function lx(){return lx=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Nb.FAILED_PRECONDITION&&t.message===ux){e.next=2;break}throw t;case 2:bb("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),lx.apply(this,arguments)}var hx=function(){function e(t){var n=this;G(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return $(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Sb(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=ft(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),fx=function(){function e(t,n){var r=this;G(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new Rb,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new vx(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=wx(e.target.error);r.P.reject(new vx(t,n))}}return $(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(bb("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new mx(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new vx(n,t)}}}]),e}(),dx=function(){function e(t,n,r){G(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(Dt())&&xb("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return $(e,[{key:"F",value:function(){var e=v(d().mark((function e(t){var n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return bb("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new vx(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Ab(Nb.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Ab(Nb.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new vx(t,n))},i.onupgradeneeded=function(e){bb("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next((function(){bb("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=v(d().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(d().mark((function e(){var n,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.F(t);case 2:return l.db=e.sent,n=fx.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),hx.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.v;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,bb("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return bb("SimpleDb","Removing database:",e),gx(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!qt())return!1;if(e.N())return!0;var t=Dt(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/netflixclone9449",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.O)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),px=function(){function e(t){G(this,e),this.q=t,this.U=!1,this.K=null}return $(e,[{key:"isDone",get:function(){return this.U}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.U=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return gx(this.q.delete())}}]),e}(),vx=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this,Nb.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return $(n)}(Ab);function yx(e){return"IndexedDbTransactionError"===e.name}var mx=function(){function e(t){G(this,e),this.store=t}return $(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(bb("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(bb("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),gx(n)}},{key:"add",value:function(e){return bb("SimpleDb","ADD",this.store.name,e,e),gx(this.store.add(e))}},{key:"get",value:function(e){var t=this;return gx(this.store.get(e)).next((function(n){return void 0===n&&(n=null),bb("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return bb("SimpleDb","DELETE",this.store.name,e),gx(this.store.delete(e))}},{key:"count",value:function(){return bb("SimpleDb","COUNT",this.store.name),gx(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new hx((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new hx((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){bb("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new hx((function(n,r){t.onerror=function(e){var t=wx(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new hx((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new px(i),o=t(i.primaryKey,i.value,a);if(o instanceof hx){var u=o.catch((function(e){return a.done(),hx.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return hx.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function gx(e){return new hx((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=wx(e.target.error);n(t)}}))}var kx=!1;function wx(e){var t=dx.D(Dt());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Ab("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return kx||(kx=!0,setTimeout((function(){throw r}),0)),r}}return e}var _x=function(){function e(t,n){G(this,e),this.asyncQueue=t,this.et=n,this.task=null}return $(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;bb("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=bb,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!yx(e.t4)){e.next=17;break}bb("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,cx(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),bx=function(){function e(t,n){G(this,e),this.localStore=t,this.persistence=n}return $(e,[{key:"st",value:function(){var e=v(d().mark((function e(){var t,n=this,r=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return hx.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return bb("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return bb("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=ix(t);ox(r,n)>0&&(n=r)})),new ax(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),xx=function(){function e(t,n){var r=this;G(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return $(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();xx.at=-1;var Ix=$((function e(t,n,r,i,a,o,u,s){G(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Ex=function(){function e(t,n){G(this,e),this.projectId=t,this.database=n||"(default)"}return $(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Sx(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Tx(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Cx(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Nx(e){return null==e}function Ax(e){return 0===e&&1/e==-1/0}function Rx(e){return"number"==typeof e&&Number.isInteger(e)&&!Ax(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Px=function(e){function t(e){G(this,t),this.binaryString=e}return $(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Bb(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Px.EMPTY_BYTE_STRING=new Px("");var Dx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ox(e){if(Tb(!!e),"string"==typeof e){var t=0,n=Dx.exec(e);if(Tb(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Lx(e.seconds),nanos:Lx(e.nanos)}}function Lx(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Mx(e){return"string"==typeof e?Px.fromBase64String(e):Px.fromUint8Array(e)}function Fx(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ux(e){var t=e.mapValue.fields.__previous_value__;return Fx(t)?Ux(t):t}function Vx(e){var t=Ox(e.mapValue.fields.__local_write_time__.timestampValue);return new Kb(t.seconds,t.nanos)}var qx={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},jx={nullValue:"NULL_VALUE"};function Bx(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Fx(e)?4:nI(e)?9007199254740991:10:Sb()}function zx(e,t){if(e===t)return!0;var n=Bx(e);if(n!==Bx(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Vx(e).isEqual(Vx(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ox(e.timestampValue),r=Ox(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Mx(e.bytesValue).isEqual(Mx(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Lx(e.geoPointValue.latitude)===Lx(t.geoPointValue.latitude)&&Lx(e.geoPointValue.longitude)===Lx(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Lx(e.integerValue)===Lx(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Lx(e.doubleValue),r=Lx(t.doubleValue);return n===r?Ax(n)===Ax(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return zb(e.arrayValue.values||[],t.arrayValue.values||[],zx);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Sx(n)!==Sx(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!zx(n[i],r[i])))return!1;return!0}(e,t);default:return Sb()}}function Wx(e,t){return void 0!==(e.values||[]).find((function(e){return zx(e,t)}))}function Kx(e,t){if(e===t)return 0;var n=Bx(e),r=Bx(t);if(n!==r)return Bb(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Bb(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Lx(e.integerValue||e.doubleValue),r=Lx(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Hx(e.timestampValue,t.timestampValue);case 4:return Hx(Vx(e),Vx(t));case 5:return Bb(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Mx(e),r=Mx(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Bb(n[i],r[i]);if(0!==a)return a}return Bb(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Bb(Lx(e.latitude),Lx(t.latitude));return 0!==n?n:Bb(Lx(e.longitude),Lx(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Kx(n[i],r[i]);if(a)return a}return Bb(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===qx.mapValue&&t===qx.mapValue)return 0;if(e===qx.mapValue)return 1;if(t===qx.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Bb(r[o],a[o]);if(0!==u)return u;var s=Kx(n[r[o]],i[a[o]]);if(0!==s)return s}return Bb(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Sb()}}function Hx(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Bb(e,t);var n=Ox(e),r=Ox(t),i=Bb(n.seconds,r.seconds);return 0!==i?i:Bb(n.nanos,r.nanos)}function Gx(e){return Qx(e)}function Qx(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ox(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Mx(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Jb.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=ft(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Qx(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=ft(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Qx(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Sb();var t,n}function Yx(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function $x(e){return!!e&&"integerValue"in e}function Jx(e){return!!e&&"arrayValue"in e}function Xx(e){return!!e&&"nullValue"in e}function Zx(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function eI(e){return!!e&&"mapValue"in e}function tI(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Tx(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=tI(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=tI(e.arrayValue.values[r]);return n}return Object.assign({},e)}function nI(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function rI(e){return"nullValue"in e?jx:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Yx(Ex.empty(),Jb.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Sb()}function iI(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Yx(Ex.empty(),Jb.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?qx:Sb()}function aI(e,t){var n=Kx(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function oI(e,t){var n=Kx(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var uI=$((function e(t,n){G(this,e),this.position=t,this.inclusive=n}));function sI(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Jb.comparator(Jb.fromName(o.referenceValue),n.key):Kx(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function cI(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!zx(e.position[n],t.position[n]))return!1;return!0}var lI=$((function e(){G(this,e)})),hI=function(e){vt(n,e);var t=kt(n);function n(e,r,i){var a;return G(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return $(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Kx(t,this.value)):null!==t&&Bx(this.value)===Bx(t)&&this.matchesComparison(Kx(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Sb()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new _I(e,t,r):"array-contains"===t?new EI(e,r):"in"===t?new SI(e,r):"not-in"===t?new TI(e,r):"array-contains-any"===t?new CI(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new bI(e,n):new xI(e,n)}}]),n}(lI),fI=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return $(n,[{key:"matches",value:function(e){return dI(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=ft(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(lI);function dI(e){return"and"===e.op}function pI(e){return"or"===e.op}function vI(e){return yI(e)&&dI(e)}function yI(e){var t,n=ft(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof fI)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function mI(e){if(e instanceof hI)return e.field.canonicalString()+e.op.toString()+Gx(e.value);var t=e.filters.map((function(e){return mI(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function gI(e,t){return e instanceof hI?function(e,t){return t instanceof hI&&e.op===t.op&&e.field.isEqual(t.field)&&zx(e.value,t.value)}(e,t):e instanceof fI?function(e,t){return t instanceof fI&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&gI(n,t.filters[r])}),!0)}(e,t):void Sb()}function kI(e,t){var n=e.filters.concat(t);return fI.create(n,e.op)}function wI(e){return e instanceof hI?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Gx(e.value))}(e):e instanceof fI?function(e){return e.op.toString()+" {"+e.getFilters().map(wI).join(" ,")+"}"}(e):"Filter"}var _I=function(e){vt(n,e);var t=kt(n);function n(e,r,i){var a;return G(this,n),(a=t.call(this,e,r,i)).key=Jb.fromName(i.referenceValue),a}return $(n,[{key:"matches",value:function(e){var t=Jb.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(hI),bI=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this,e,"in",r)).keys=II("in",r),i}return $(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(hI),xI=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this,e,"not-in",r)).keys=II("not-in",r),i}return $(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(hI);function II(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Jb.fromName(e.referenceValue)}))}var EI=function(e){vt(n,e);var t=kt(n);function n(e,r){return G(this,n),t.call(this,e,"array-contains",r)}return $(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Jx(t)&&Wx(t.arrayValue,this.value)}}]),n}(hI),SI=function(e){vt(n,e);var t=kt(n);function n(e,r){return G(this,n),t.call(this,e,"in",r)}return $(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Wx(this.value.arrayValue,t)}}]),n}(hI),TI=function(e){vt(n,e);var t=kt(n);function n(e,r){return G(this,n),t.call(this,e,"not-in",r)}return $(n,[{key:"matches",value:function(e){if(Wx(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Wx(this.value.arrayValue,t)}}]),n}(hI),CI=function(e){vt(n,e);var t=kt(n);function n(e,r){return G(this,n),t.call(this,e,"array-contains-any",r)}return $(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Jx(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Wx(t.value.arrayValue,e)}))}}]),n}(hI),NI=$((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";G(this,e),this.field=t,this.dir=n}));function AI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var RI=function(){function e(t,n){G(this,e),this.comparator=t,this.root=n||DI.EMPTY}return $(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,DI.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,DI.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new PI(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new PI(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new PI(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new PI(this.root,e,this.comparator,!0)}}]),e}(),PI=function(){function e(t,n,r,i){G(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return $(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),DI=function(){function e(t,n,r,i,a){G(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return $(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Sb();if(this.right.isRed())throw Sb();var e=this.left.check();if(e!==this.right.check())throw Sb();return e+(this.isRed()?0:1)}}]),e}();DI.EMPTY=null,DI.RED=!0,DI.BLACK=!1,DI.EMPTY=new(function(){function e(){G(this,e),this.size=0}return $(e,[{key:"key",get:function(){throw Sb()}},{key:"value",get:function(){throw Sb()}},{key:"color",get:function(){throw Sb()}},{key:"left",get:function(){throw Sb()}},{key:"right",get:function(){throw Sb()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new DI(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var OI=function(){function e(t){G(this,e),this.comparator=t,this.data=new RI(this.comparator)}return $(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new LI(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new LI(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),LI=function(){function e(t){G(this,e),this.iter=t}return $(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function MI(e){return e.hasNext()?e.getNext():void 0}var FI=function(){function e(t){G(this,e),this.fields=t,t.sort($b.comparator)}return $(e,[{key:"unionWith",value:function(t){var n,r=new OI($b.comparator),i=ft(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=ft(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=ft(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return zb(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),UI=function(){function e(t){G(this,e),this.value=t}return $(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!eI(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tI(t)}},{key:"setAll",value:function(e){var t=this,n=$b.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=tI(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());eI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return zx(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];eI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Tx(t,(function(t,n){return e[t]=n}));var r,i=ft(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(tI(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function VI(e){var t=[];return Tx(e.fields,(function(e,n){var r=new $b([e]);if(eI(n)){var i=VI(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=ft(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new FI(t)}var qI=function(){function e(t,n,r,i,a,o,u){G(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return $(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Hb.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=UI.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=UI.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Hb.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Hb.min(),Hb.min(),Hb.min(),UI.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Hb.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Hb.min(),Hb.min(),UI.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Hb.min(),Hb.min(),UI.empty(),2)}}]),e}(),jI=$((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;G(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null}));function BI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new jI(e,t,n,r,i,a,o)}function zI(e){var t=Cb(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return mI(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Nx(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Gx(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Gx(e)})).join(",")),t.ft=n}return t.ft}function WI(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!AI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!gI(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!cI(e.startAt,t.startAt)&&cI(e.endAt,t.endAt)}function KI(e){return Jb.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function HI(e,t){return e.filters.filter((function(e){return e instanceof hI&&e.field.isEqual(t)}))}function GI(e,t,n){var r,i=jx,a=!0,o=ft(HI(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=jx,c=!0;switch(u.op){case"<":case"<=":s=rI(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=jx}aI({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];aI({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function QI(e,t,n){var r,i=qx,a=!0,o=ft(HI(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=qx,c=!0;switch(u.op){case">=":case">":s=iI(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=qx}oI({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];oI({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var YI=$((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;G(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this._t=null,this.startAt,this.endAt}));function $I(e,t,n,r,i,a,o,u){return new YI(e,t,n,r,i,a,o,u)}function JI(e){return new YI(e)}function XI(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ZI(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function eE(e){var t,n=ft(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function tE(e){return null!==e.collectionGroup}function nE(e){var t=Cb(e);if(null===t.dt){t.dt=[];var n=eE(t),r=ZI(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new NI(n)),t.dt.push(new NI($b.keyField(),"asc"));else{var i,a=!1,o=ft(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.dt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new NI($b.keyField(),s))}}}return t.dt}function rE(e){var t=Cb(e);if(!t._t)if("F"===t.limitType)t._t=BI(t.path,t.collectionGroup,nE(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=ft(nE(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new NI(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new uI(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new uI(t.startAt.position,t.startAt.inclusive):null;t._t=BI(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function iE(e,t){t.getFirstInequalityField(),eE(e);var n=e.filters.concat([t]);return new YI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function aE(e,t,n){return new YI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function oE(e,t){return WI(rE(e),rE(t))&&e.limitType===t.limitType}function uE(e){return"".concat(zI(rE(e)),"|lt:").concat(e.limitType)}function sE(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return wI(e)})).join(", "),"]")),Nx(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Gx(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Gx(e)})).join(",")),"Target(".concat(t,")")}(rE(e)),"; limitType=").concat(e.limitType,")")}function cE(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Jb.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=ft(nE(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=ft(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=sI(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,nE(e),t))&&!(e.endAt&&!function(e,t,n){var r=sI(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,nE(e),t))}(e,t)}function lE(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function hE(e){return function(t,n){var r,i=!1,a=ft(nE(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=fE(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function fE(e,t,n){var r=e.field.isKeyField()?Jb.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Kx(r,i):Sb()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Sb()}}function dE(e,t){if(e.wt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ax(t)?"-0":t}}function pE(e){return{integerValue:""+e}}function vE(e,t){return Rx(t)?pE(t):dE(e,t)}var yE=$((function e(){G(this,e),this._=void 0}));function mE(e,t,n){return e instanceof wE?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof _E?bE(e,t):e instanceof xE?IE(e,t):function(e,t){var n=kE(e,t),r=SE(n)+SE(e.gt);return $x(n)&&$x(e.gt)?pE(r):dE(e.yt,r)}(e,t)}function gE(e,t,n){return e instanceof _E?bE(e,t):e instanceof xE?IE(e,t):n}function kE(e,t){return e instanceof EE?$x(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var wE=function(e){vt(n,e);var t=kt(n);function n(){return G(this,n),t.apply(this,arguments)}return $(n)}(yE),_E=function(e){vt(n,e);var t=kt(n);function n(e){var r;return G(this,n),(r=t.call(this)).elements=e,r}return $(n)}(yE);function bE(e,t){var n,r=TE(t),i=ft(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return zx(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var xE=function(e){vt(n,e);var t=kt(n);function n(e){var r;return G(this,n),(r=t.call(this)).elements=e,r}return $(n)}(yE);function IE(e,t){var n,r=TE(t),i=ft(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!zx(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var EE=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this)).yt=e,i.gt=r,i}return $(n)}(yE);function SE(e){return Lx(e.integerValue||e.doubleValue)}function TE(e){return Jx(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var CE=$((function e(t,n){G(this,e),this.field=t,this.transform=n}));var NE=$((function e(t,n){G(this,e),this.version=t,this.transformResults=n})),AE=function(){function e(t,n){G(this,e),this.updateTime=t,this.exists=n}return $(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function RE(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var PE=$((function e(){G(this,e)}));function DE(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new KE(e.key,AE.none()):new UE(e.key,e.data,AE.none());var n,r=e.data,i=UI.empty(),a=new OI($b.comparator),o=ft(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new VE(e.key,i,new FI(a.toArray()),AE.none())}function OE(e,t,n){e instanceof UE?function(e,t,n){var r=e.value.clone(),i=jE(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof VE?function(e,t,n){if(RE(e.precondition,t)){var r=jE(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(qE(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function LE(e,t,n,r){return e instanceof UE?function(e,t,n,r){if(!RE(e.precondition,t))return n;var i=e.value.clone(),a=BE(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof VE?function(e,t,n,r){if(!RE(e.precondition,t))return n;var i=BE(e.fieldTransforms,r,t),a=t.data;return a.setAll(qE(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return RE(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ME(e,t){var n,r=null,i=ft(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=kE(a.transform,o||null);null!=u&&(null===r&&(r=UI.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function FE(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&zb(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof _E&&t instanceof _E||e instanceof xE&&t instanceof xE?zb(e.elements,t.elements,zx):e instanceof EE&&t instanceof EE?zx(e.gt,t.gt):e instanceof wE&&t instanceof wE}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var UE=function(e){vt(n,e);var t=kt(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return G(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return $(n,[{key:"getFieldMask",value:function(){return null}}]),n}(PE),VE=function(e){vt(n,e);var t=kt(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return G(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return $(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(PE);function qE(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function jE(e,t,n){var r=new Map;Tb(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,gE(o,u,n[i]))}return r}function BE(e,t,n){var r,i=new Map,a=ft(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,mE(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var zE,WE,KE=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return $(n,[{key:"getFieldMask",value:function(){return null}}]),n}(PE),HE=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return $(n,[{key:"getFieldMask",value:function(){return null}}]),n}(PE),GE=$((function e(t){G(this,e),this.count=t}));function QE(e){switch(e){default:return Sb();case Nb.CANCELLED:case Nb.UNKNOWN:case Nb.DEADLINE_EXCEEDED:case Nb.RESOURCE_EXHAUSTED:case Nb.INTERNAL:case Nb.UNAVAILABLE:case Nb.UNAUTHENTICATED:return!1;case Nb.INVALID_ARGUMENT:case Nb.NOT_FOUND:case Nb.ALREADY_EXISTS:case Nb.PERMISSION_DENIED:case Nb.FAILED_PRECONDITION:case Nb.ABORTED:case Nb.OUT_OF_RANGE:case Nb.UNIMPLEMENTED:case Nb.DATA_LOSS:return!0}}function YE(e){if(void 0===e)return xb("GRPC error has no .code"),Nb.UNKNOWN;switch(e){case zE.OK:return Nb.OK;case zE.CANCELLED:return Nb.CANCELLED;case zE.UNKNOWN:return Nb.UNKNOWN;case zE.DEADLINE_EXCEEDED:return Nb.DEADLINE_EXCEEDED;case zE.RESOURCE_EXHAUSTED:return Nb.RESOURCE_EXHAUSTED;case zE.INTERNAL:return Nb.INTERNAL;case zE.UNAVAILABLE:return Nb.UNAVAILABLE;case zE.UNAUTHENTICATED:return Nb.UNAUTHENTICATED;case zE.INVALID_ARGUMENT:return Nb.INVALID_ARGUMENT;case zE.NOT_FOUND:return Nb.NOT_FOUND;case zE.ALREADY_EXISTS:return Nb.ALREADY_EXISTS;case zE.PERMISSION_DENIED:return Nb.PERMISSION_DENIED;case zE.FAILED_PRECONDITION:return Nb.FAILED_PRECONDITION;case zE.ABORTED:return Nb.ABORTED;case zE.OUT_OF_RANGE:return Nb.OUT_OF_RANGE;case zE.UNIMPLEMENTED:return Nb.UNIMPLEMENTED;case zE.DATA_LOSS:return Nb.DATA_LOSS;default:return Sb()}}(WE=zE||(zE={}))[WE.OK=0]="OK",WE[WE.CANCELLED=1]="CANCELLED",WE[WE.UNKNOWN=2]="UNKNOWN",WE[WE.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",WE[WE.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",WE[WE.NOT_FOUND=5]="NOT_FOUND",WE[WE.ALREADY_EXISTS=6]="ALREADY_EXISTS",WE[WE.PERMISSION_DENIED=7]="PERMISSION_DENIED",WE[WE.UNAUTHENTICATED=16]="UNAUTHENTICATED",WE[WE.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",WE[WE.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",WE[WE.ABORTED=10]="ABORTED",WE[WE.OUT_OF_RANGE=11]="OUT_OF_RANGE",WE[WE.UNIMPLEMENTED=12]="UNIMPLEMENTED",WE[WE.INTERNAL=13]="INTERNAL",WE[WE.UNAVAILABLE=14]="UNAVAILABLE",WE[WE.DATA_LOSS=15]="DATA_LOSS";var $E=function(){function e(t,n){G(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return $(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=ft(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Tx(this.inner,(function(t,n){var r,i=ft(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Cx(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),JE=new RI(Jb.comparator);function XE(){return JE}var ZE=new RI(Jb.comparator);function eS(){for(var e=ZE,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function tS(e){var t=ZE;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function nS(){return iS()}function rS(){return iS()}function iS(){return new $E((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var aS=new RI(Jb.comparator),oS=new OI(Jb.comparator);function uS(){for(var e=oS,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var sS=new OI(Bb);function cS(){return sS}var lS=function(){function e(t,n,r,i,a){G(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return $(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,hS.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Hb.min(),i,cS(),XE(),uS())}}]),e}(),hS=function(){function e(t,n,r,i,a){G(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return $(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,uS(),uS(),uS())}}]),e}(),fS=$((function e(t,n,r,i){G(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i})),dS=$((function e(t,n){G(this,e),this.targetId=t,this.Et=n})),pS=$((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Px.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;G(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),vS=function(){function e(){G(this,e),this.At=0,this.Rt=gS(),this.bt=Px.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}return $(e,[{key:"current",get:function(){return this.Pt}},{key:"resumeToken",get:function(){return this.bt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.vt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}},{key:"Ct",value:function(){var e=uS(),t=uS(),n=uS();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Sb()}})),new hS(this.bt,this.Pt,e,t,n)}},{key:"xt",value:function(){this.vt=!1,this.Rt=gS()}},{key:"Nt",value:function(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.vt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"Mt",value:function(){this.At-=1}},{key:"Ft",value:function(){this.vt=!0,this.Pt=!0}}]),e}(),yS=function(){function e(t){G(this,e),this.$t=t,this.Bt=new Map,this.Lt=XE(),this.qt=mS(),this.Ut=new OI(Bb)}return $(e,[{key:"Kt",value:function(e){var t,n=ft(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(u){n.e(u)}finally{n.f()}var i,a=ft(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"jt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Wt(n);switch(e.state){case 0:t.zt(n)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||t.removeTarget(n);break;case 3:t.zt(n)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:t.zt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:Sb()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.zt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t=e.targetId,n=e.Et.count,r=this.Yt(t);if(r){var i=r.target;if(KI(i))if(0===n){var a=new Jb(i.path);this.Qt(t,a,qI.newNoDocument(a,Hb.min()))}else Tb(1===n);else this.Xt(t)!==n&&(this.Ht(t),this.Ut=this.Ut.add(t))}}},{key:"Zt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&KI(a.target)){var o=new Jb(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,qI.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=uS();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new lS(e,n,this.Ut,this.Lt,r);return this.Lt=XE(),this.qt=mS(),this.Ut=new OI(Bb),i}},{key:"Gt",value:function(e,t){if(this.zt(e)){var n=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.zt(e)){var r=this.Wt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Xt",value:function(e){var t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.Wt(e).Ot()}},{key:"Wt",value:function(e){var t=this.Bt.get(e);return t||(t=new vS,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new OI(Bb),this.qt=this.qt.insert(e,t)),t}},{key:"zt",value:function(e){var t=null!==this.Yt(e);return t||bb("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new vS),this.$t.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}]),e}();function mS(){return new RI(Jb.comparator)}function gS(){return new RI(Jb.comparator)}var kS={asc:"ASCENDING",desc:"DESCENDING"},wS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_S={and:"AND",or:"OR"},bS=$((function e(t,n){G(this,e),this.databaseId=t,this.wt=n}));function xS(e,t){return e.wt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function IS(e,t){return e.wt?t.toBase64():t.toUint8Array()}function ES(e,t){return xS(e,t.toTimestamp())}function SS(e){return Tb(!!e),Hb.fromTimestamp(function(e){var t=Ox(e);return new Kb(t.seconds,t.nanos)}(e))}function TS(e,t){return function(e){return new Qb(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function CS(e){var t=Qb.fromString(e);return Tb(JS(t)),t}function NS(e,t){return TS(e.databaseId,t.path)}function AS(e,t){var n=CS(t);if(n.get(1)!==e.databaseId.projectId)throw new Ab(Nb.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ab(Nb.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Jb(OS(n))}function RS(e,t){return TS(e.databaseId,t)}function PS(e){var t=CS(e);return 4===t.length?Qb.emptyPath():OS(t)}function DS(e){return new Qb(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function OS(e){return Tb(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function LS(e,t,n){return{name:NS(e,t),fields:n.value.mapValue.fields}}function MS(e,t,n){var r=AS(e,t.name),i=SS(t.updateTime),a=t.createTime?SS(t.createTime):Hb.min(),o=new UI({mapValue:{fields:t.fields}}),u=qI.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function FS(e,t){return"found"in t?function(e,t){Tb(!!t.found),t.found.name,t.found.updateTime;var n=AS(e,t.found.name),r=SS(t.found.updateTime),i=t.found.createTime?SS(t.found.createTime):Hb.min(),a=new UI({mapValue:{fields:t.found.fields}});return qI.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Tb(!!t.missing),Tb(!!t.readTime);var n=AS(e,t.missing),r=SS(t.readTime);return qI.newNoDocument(n,r)}(e,t):Sb()}function US(e,t){var n;if(t instanceof UE)n={update:LS(e,t.key,t.value)};else if(t instanceof KE)n={delete:NS(e,t.key)};else if(t instanceof VE)n={update:LS(e,t.key,t.data),updateMask:$S(t.fieldMask)};else{if(!(t instanceof HE))return Sb();n={verify:NS(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof wE)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof _E)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof xE)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof EE)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Sb()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ES(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Sb()}(e,t.precondition)),n}function VS(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?AE.updateTime(SS(e.updateTime)):void 0!==e.exists?AE.exists(e.exists):AE.none()}(t.currentDocument):AE.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Tb("REQUEST_TIME"===t.setToServerValue),n=new wE;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new _E(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new xE(i)}else"increment"in t?n=new EE(e,t.increment):Sb();var a=$b.fromServerFormat(t.fieldPath);return new CE(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=AS(e,t.update.name),a=new UI({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new FI(t.map((function(e){return $b.fromServerFormat(e)})))}(t.updateMask);return new VE(i,a,o,n,r)}return new UE(i,a,n,r)}if(t.delete){var u=AS(e,t.delete);return new KE(u,n)}if(t.verify){var s=AS(e,t.verify);return new HE(s,n)}return Sb()}function qS(e,t){return{documents:[RS(e,t.path)]}}function jS(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=RS(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=RS(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return YS(fI.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:GS(e.field),direction:WS(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.wt||Nx(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function BS(e){var t=PS(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Tb(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=zS(e);return t instanceof fI&&vI(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new NI(QS(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Nx(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new uI(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new uI(n,t)}(n.endAt)),$I(t,i,u,o,s,"F",c,l)}function zS(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=QS(e.unaryFilter.field);return hI.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=QS(e.unaryFilter.field);return hI.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=QS(e.unaryFilter.field);return hI.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=QS(e.unaryFilter.field);return hI.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Sb()}}(e):void 0!==e.fieldFilter?function(e){return hI.create(QS(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Sb()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fI.create(e.compositeFilter.filters.map((function(e){return zS(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Sb()}}(e.compositeFilter.op))}(e):Sb()}function WS(e){return kS[e]}function KS(e){return wS[e]}function HS(e){return _S[e]}function GS(e){return{fieldPath:e.canonicalString()}}function QS(e){return $b.fromServerFormat(e.fieldPath)}function YS(e){return e instanceof hI?function(e){if("=="===e.op){if(Zx(e.value))return{unaryFilter:{field:GS(e.field),op:"IS_NAN"}};if(Xx(e.value))return{unaryFilter:{field:GS(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Zx(e.value))return{unaryFilter:{field:GS(e.field),op:"IS_NOT_NAN"}};if(Xx(e.value))return{unaryFilter:{field:GS(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:GS(e.field),op:KS(e.op),value:e.value}}}(e):e instanceof fI?function(e){var t=e.getFilters().map((function(e){return YS(e)}));return 1===t.length?t[0]:{compositeFilter:{op:HS(e.op),filters:t}}}(e):Sb()}function $S(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function JS(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function XS(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=eT(t)),t=ZS(e.get(n),t);return eT(t)}function ZS(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function eT(e){return e+"\x01\x01"}function tT(e){var t=e.length;if(Tb(t>=2),2===t)return Tb("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Qb.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Sb(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Sb()}a=o+2}return new Qb(r)}var nT=["userId","batchId"];function rT(e,t){return[e,XS(t)]}function iT(e,t,n){return[e,XS(t),n]}var aT={},oT=["prefixPath","collectionGroup","readTime","documentId"],uT=["prefixPath","collectionGroup","documentId"],sT=["collectionGroup","readTime","prefixPath","documentId"],cT=["canonicalId","targetId"],lT=["targetId","path"],hT=["path","targetId"],fT=["collectionId","parent"],dT=["indexId","uid"],pT=["uid","sequenceNumber"],vT=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yT=["indexId","uid","orderedDocumentKey"],mT=["userId","collectionPath","documentId"],gT=["userId","collectionPath","largestBatchId"],kT=["userId","collectionGroup","largestBatchId"],wT=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),_T=[].concat(wn(wT),["documentOverlays"]),bT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xT=bT,IT=[].concat(xT,["indexConfiguration","indexState","indexEntries"]),ET=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this)).se=e,i.currentSequenceNumber=r,i}return $(n)}(sx);function ST(e,t){var n=Cb(e);return dx.M(n.se,t)}var TT=function(){function e(t,n,r,i){G(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return $(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&OE(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=ft(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=LE(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=ft(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=LE(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=rS();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=DE(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Hb.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),uS())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&zb(this.mutations,e.mutations,(function(e,t){return FE(e,t)}))&&zb(this.baseMutations,e.baseMutations,(function(e,t){return FE(e,t)}))}}]),e}(),CT=function(){function e(t,n,r,i){G(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return $(e,null,[{key:"from",value:function(t,n,r){Tb(t.mutations.length===r.length);for(var i=aS,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),NT=function(){function e(t,n){G(this,e),this.largestBatchId=t,this.mutation=n}return $(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),AT=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Hb.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Hb.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Px.EMPTY_BYTE_STRING;G(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return $(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),RT=$((function e(t){G(this,e),this.ie=t}));function PT(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:DT(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:NS(e,t.key),fields:t.data.value.mapValue.fields,updateTime:xS(e,t.version.toTimestamp()),createTime:xS(e,t.createTime.toTimestamp())}}(e.ie,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:OT(t.version)};else{if(!t.isUnknownDocument())return Sb();r.unknownDocument={path:n.path.toArray(),version:OT(t.version)}}return r}function DT(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function OT(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function LT(e){var t=new Kb(e.seconds,e.nanoseconds);return Hb.fromTimestamp(t)}function MT(e,t){for(var n=(t.baseMutations||[]).map((function(t){return VS(e.ie,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return VS(e.ie,t)})),u=Kb.fromMillis(t.localWriteTimeMs);return new TT(t.batchId,u,n,o)}function FT(e){var t,n,r=LT(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?LT(e.lastLimboFreeSnapshotVersion):Hb.min();return void 0!==e.query.documents?(Tb(1===(n=e.query).documents.length),t=rE(JI(PS(n.documents[0])))):t=function(e){return rE(BS(e))}(e.query),new AT(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Px.fromBase64String(e.resumeToken))}function UT(e,t){var n,r=OT(t.snapshotVersion),i=OT(t.lastLimboFreeSnapshotVersion);n=KI(t.target)?qS(e.ie,t.target):jS(e.ie,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:zI(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function VT(e){var t=BS({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?aE(t,t.limit,"L"):t}function qT(e,t){return new NT(t.largestBatchId,VS(e.ie,t.overlayMutation))}function jT(e,t){var n=t.path.lastSegment();return[e,XS(t.path.popLast()),n]}function BT(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:OT(r.readTime),documentKey:XS(r.documentKey.path),largestBatchId:r.largestBatchId}}var zT=function(){function e(){G(this,e)}return $(e,[{key:"getBundleMetadata",value:function(e,t){return WT(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:LT(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return WT(e).put({bundleId:(n=t).id,createTime:OT(SS(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return KT(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:VT(t.bundledQuery),readTime:LT(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return KT(e).put(function(e){return{name:e.name,readTime:OT(SS(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function WT(e){return ST(e,"bundles")}function KT(e){return ST(e,"namedQueries")}var HT=function(){function e(t,n){G(this,e),this.yt=t,this.userId=n}return $(e,[{key:"getOverlay",value:function(e,t){var n=this;return GT(e).get(jT(this.userId,t)).next((function(e){return e?qT(n.yt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=nS();return hx.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new NT(t,a);i.push(r.oe(e,o))})),hx.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(XS(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(GT(e).Y("collectionPathOverlayIndex",i))})),hx.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=nS(),a=XS(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return GT(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=ft(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=qT(r.yt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=nS(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return GT(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=qT(a.yt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"oe",value:function(e,t){return GT(e).put(function(e,t,n){var r=c(jT(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:US(e.ie,n.mutation)}}(this.yt,this.userId,t))}}],[{key:"re",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function GT(e){return ST(e,"documentOverlays")}var QT=function(){function e(){G(this,e)}return $(e,[{key:"ue",value:function(e,t){this.ce(e,t),t.ae()}},{key:"ce",value:function(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Lx(e.integerValue));else if("doubleValue"in e){var n=Lx(e.doubleValue);isNaN(n)?this.he(t,13):(this.he(t,15),Ax(n)?t.le(0):t.le(n))}else if("timestampValue"in e){var r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe("".concat(r.seconds||"")),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Mx(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.he(t,45),t.le(i.latitude||0),t.le(i.longitude||0)}else"mapValue"in e?nI(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):Sb()}},{key:"de",value:function(e,t){this.he(t,25),this.pe(e,t)}},{key:"pe",value:function(e,t){t.fe(e)}},{key:"ge",value:function(e,t){var n=e.fields||{};this.he(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.de(a,t),this.ce(n[a],t)}}},{key:"ye",value:function(e,t){var n=e.values||[];this.he(t,50);var r,i=ft(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ce(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"me",value:function(e,t){var n=this;this.he(t,37),Jb.fromName(e).path.forEach((function(e){n.he(t,60),n.pe(e,t)}))}},{key:"he",value:function(e,t){e.le(t)}},{key:"_e",value:function(e){e.le(2)}}]),e}();function YT(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function $T(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=YT(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}QT.Ie=new QT;var JT=function(){function e(){G(this,e),this.buffer=new Uint8Array(1024),this.position=0}return $(e,[{key:"Te",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ee(n.value),n=t.next();this.Ae()}},{key:"Re",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.be(n.value),n=t.next();this.Pe()}},{key:"ve",value:function(e){var t,n=ft(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ee(i);else if(i<2048)this.Ee(960|i>>>6),this.Ee(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ee(480|i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i);else{var a=r.codePointAt(0);this.Ee(240|a>>>18),this.Ee(128|63&a>>>12),this.Ee(128|63&a>>>6),this.Ee(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ae()}},{key:"Ve",value:function(e){var t,n=ft(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{var a=r.codePointAt(0);this.be(240|a>>>18),this.be(128|63&a>>>12),this.be(128|63&a>>>6),this.be(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Pe()}},{key:"Se",value:function(e){var t=this.De(e),n=$T(t);this.Ce(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"xe",value:function(e){var t=this.De(e),n=$T(t);this.Ce(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"Oe",value:function(){this.Me(255),this.Me(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Fe",value:function(){return this.buffer.slice(0,this.position)}},{key:"De",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ee",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}},{key:"be",value:function(e){var t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}},{key:"Ae",value:function(){this.ke(0),this.ke(1)}},{key:"Pe",value:function(){this.Me(0),this.Me(1)}},{key:"ke",value:function(e){this.Ce(1),this.buffer[this.position++]=e}},{key:"Me",value:function(e){this.Ce(1),this.buffer[this.position++]=~e}},{key:"Ce",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),XT=function(){function e(t){G(this,e),this.$e=t}return $(e,[{key:"we",value:function(e){this.$e.Te(e)}},{key:"fe",value:function(e){this.$e.ve(e)}},{key:"le",value:function(e){this.$e.Se(e)}},{key:"ae",value:function(){this.$e.Ne()}}]),e}(),ZT=function(){function e(t){G(this,e),this.$e=t}return $(e,[{key:"we",value:function(e){this.$e.Re(e)}},{key:"fe",value:function(e){this.$e.Ve(e)}},{key:"le",value:function(e){this.$e.xe(e)}},{key:"ae",value:function(){this.$e.Oe()}}]),e}(),eC=function(){function e(){G(this,e),this.$e=new JT,this.Be=new XT(this.$e),this.Le=new ZT(this.$e)}return $(e,[{key:"seed",value:function(e){this.$e.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Be:this.Le}},{key:"Fe",value:function(){return this.$e.Fe()}},{key:"reset",value:function(){this.$e.reset()}}]),e}(),tC=function(){function e(t,n,r,i){G(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return $(e,[{key:"Ue",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function nC(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=rC(e.arrayValue,t.arrayValue))?n:0!==(n=rC(e.directionalValue,t.directionalValue))?n:Jb.comparator(e.documentKey,t.documentKey)}function rC(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var iC=function(){function e(t){G(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ke=t.orderBy,this.Ge=[];var n,r=ft(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Qe=i:this.Ge.push(i)}}catch(a){r.e(a)}finally{r.f()}}return $(e,[{key:"je",value:function(e){Tb(e.collectionGroup===this.collectionId);var t=Zb(e);if(void 0!==t&&!this.We(t))return!1;for(var n=ex(e),r=0,i=0;r<n.length&&this.We(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Qe){var a=n[r];if(!this.ze(this.Qe,a)||!this.He(this.Ke[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ke.length||!this.He(this.Ke[i++],o))return!1}return!0}},{key:"We",value:function(e){var t,n=ft(this.Ge);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.ze(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"ze",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"He",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function aC(e){var t,n;if(Tb(e instanceof hI||e instanceof fI),e instanceof hI){if(e instanceof SI){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return hI.create(e.field,"==",t)})))||[];return fI.create(r,"or")}return e}var i=e.filters.map((function(e){return aC(e)}));return fI.create(i,e.op)}function oC(e){if(0===e.getFilters().length)return[];var t=lC(aC(e));return Tb(cC(t)),uC(t)||sC(t)?[t]:t.getFilters()}function uC(e){return e instanceof hI}function sC(e){return e instanceof fI&&vI(e)}function cC(e){return uC(e)||sC(e)||function(e){if(e instanceof fI&&pI(e)){var t,n=ft(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!uC(r)&&!sC(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function lC(e){if(Tb(e instanceof hI||e instanceof fI),e instanceof hI)return e;if(1===e.filters.length)return lC(e.filters[0]);var t=e.filters.map((function(e){return lC(e)})),n=fI.create(t,e.op);return cC(n=dC(n))?n:(Tb(n instanceof fI),Tb(dI(n)),Tb(n.filters.length>1),n.filters.reduce((function(e,t){return hC(e,t)})))}function hC(e,t){var n;return Tb(e instanceof hI||e instanceof fI),Tb(t instanceof hI||t instanceof fI),n=e instanceof hI?t instanceof hI?function(e,t){return fI.create([e,t],"and")}(e,t):fC(e,t):t instanceof hI?fC(t,e):function(e,t){if(Tb(e.filters.length>0&&t.filters.length>0),dI(e)&&dI(t))return kI(e,t.getFilters());var n=pI(e)?e:t,r=pI(e)?t:e,i=n.filters.map((function(e){return hC(e,r)}));return fI.create(i,"or")}(e,t),dC(n)}function fC(e,t){if(dI(t))return kI(t,e.getFilters());var n=t.filters.map((function(t){return hC(e,t)}));return fI.create(n,"or")}function dC(e){if(Tb(e instanceof hI||e instanceof fI),e instanceof hI)return e;var t=e.getFilters();if(1===t.length)return dC(t[0]);if(yI(e))return e;var n=t.map((function(e){return dC(e)})),r=[];return n.forEach((function(t){t instanceof hI?r.push(t):t instanceof fI&&(t.op===e.op?r.push.apply(r,wn(t.filters)):r.push(t))})),1===r.length?r[0]:fI.create(r,e.op)}var pC=function(){function e(){G(this,e),this.Je=new vC}return $(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Je.add(t),hx.resolve()}},{key:"getCollectionParents",value:function(e,t){return hx.resolve(this.Je.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return hx.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return hx.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return hx.resolve(null)}},{key:"getIndexType",value:function(e,t){return hx.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return hx.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return hx.resolve(null)}},{key:"getMinOffset",value:function(e,t){return hx.resolve(ax.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return hx.resolve(ax.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return hx.resolve()}},{key:"updateIndexEntries",value:function(e,t){return hx.resolve()}}]),e}(),vC=function(){function e(){G(this,e),this.index={}}return $(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new OI(Qb.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new OI(Qb.comparator)).toArray()}}]),e}(),yC=new Uint8Array(0),mC=function(){function e(t,n){G(this,e),this.user=t,this.databaseId=n,this.Ye=new vC,this.Xe=new $E((function(e){return zI(e)}),(function(e,t){return WI(e,t)})),this.uid=t.uid||""}return $(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ye.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ye.add(t)}));var a={collectionId:r,parent:XS(i)};return gC(e).put(a)}return hx.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Wb(t),""],!1,!0);return gC(e).W(r).next((function(e){var r,i=ft(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(tT(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=wC(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=_C(e);return a.next((function(e){o.put(BT(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=wC(e),r=_C(e),i=kC(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=kC(e),i=!0,a=new Map;return hx.forEach(this.Ze(t),(function(t){return n.tn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=uS(),o=[];return hx.forEach(a,(function(i,a){var u;bb("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(zI(t)));var s=function(e,t){var n=Zb(t);if(void 0===n)return null;var r,i=ft(HI(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=ft(ex(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=ft(HI(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=ft(ex(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?GI(e,o.fieldPath,e.startAt):QI(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new uI(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=ft(ex(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?QI(e,o.fieldPath,e.endAt):GI(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new uI(r,i)}(a,i),f=n.en(i,a,l),d=n.en(i,a,h),p=n.nn(i,a,c),v=n.sn(i.indexId,s,f,l.inclusive,d,h.inclusive,p);return hx.forEach(v,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=Jb.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return hx.resolve(null)}))}},{key:"Ze",value:function(e){var t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:oC(fI.create(e.filters,"and")).map((function(t){return BI(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.Xe.set(e,t),t)}},{key:"sn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],h=function(s){var h=t?u.rn(t[s/c]):yC,f=u.on(e,h,n[s%c],r),d=u.un(e,h,i[s%c],a),p=o.map((function(t){return u.on(e,h,t,!0)}));l.push.apply(l,wn(u.createRange(f,d,p)))},f=0;f<s;++f)h(f);return l}},{key:"on",value:function(e,t,n,r){var i=new tC(e,Jb.empty(),t,n);return r?i:i.Ue()}},{key:"un",value:function(e,t,n,r){var i=new tC(e,Jb.empty(),t,n);return r?i.Ue():i}},{key:"tn",value:function(e,t){var n=new iC(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=ft(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.je(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.Ze(t);return hx.forEach(i,(function(t){return n.tn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new OI($b.comparator),r=!1,i=ft(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=ft(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(h){o.e(h)}finally{o.f()}}}catch(h){i.e(h)}finally{i.f()}var s,c=ft(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(h){c.e(h)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"cn",value:function(e,t){var n,r=new eC,i=ft(ex(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.qe(a.kind);QT.Ie.ue(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Fe()}},{key:"rn",value:function(e){var t=new eC;return QT.Ie.ue(e,t.qe(0)),t.Fe()}},{key:"an",value:function(e,t){var n=new eC;return QT.Ie.ue(Yx(this.databaseId,t),n.qe(function(e){var t=ex(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Fe()}},{key:"nn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new eC);var i,a=0,o=ft(ex(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=ft(r);try{for(l.s();!(u=l.n()).done;){var h=u.value;if(this.hn(t,s.fieldPath)&&Jx(c))r=this.ln(r,s,c);else{var f=h.qe(s.kind);QT.Ie.ue(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.fn(r)}},{key:"en",value:function(e,t,n){return this.nn(e,t,n.position)}},{key:"fn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Fe();return t}},{key:"ln",value:function(e,t,n){var r,i=wn(e),a=[],o=ft(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=ft(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=new eC;h.seed(l.Fe()),QT.Ie.ue(s,h.qe(t.kind)),a.push(h)}}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"hn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof hI&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=wC(e),i=_C(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return hx.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new nx(t.sequenceNumber,new ax(LT(t.readTime),new Jb(tT(t.documentKey)),t.largestBatchId)):nx.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new tx($b.fromServerFormat(n),r)}));return new Xb(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Bb(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=wC(e),a=_C(e);return this.dn(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return hx.forEach(t,(function(t){return a.put(BT(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return hx.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?hx.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),hx.forEach(a,(function(r){return n._n(e,t,r).next((function(t){var a=n.wn(i,r);return t.isEqual(a)?hx.resolve():n.mn(e,i,r,t,a)}))}))}))}))}},{key:"gn",value:function(e,t,n,r){return kC(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.an(n,t.key),documentKey:t.key.path.toArray()})}},{key:"yn",value:function(e,t,n,r){return kC(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.an(n,t.key),t.key.path.toArray()])}},{key:"_n",value:function(e,t,n){var r=kC(e),i=new OI(nC);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.an(n,t)])},(function(e,r){i=i.add(new tC(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"wn",value:function(e,t){var n=new OI(nC),r=this.cn(t,e);if(null==r)return n;var i=Zb(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Jx(a)){var o,u=ft(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new tC(t.indexId,e.key,this.rn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new tC(t.indexId,e.key,yC,r));return n}},{key:"mn",value:function(e,t,n,r,i){var a=this;bb("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=MI(a),s=MI(o);u||s;){var c=!1,l=!1;if(u&&s){var h=n(u,s);h<0?l=!0:h>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=MI(o)):l?(i(u),u=MI(a)):(u=MI(a),s=MI(o))}}(r,i,nC,(function(r){o.push(a.gn(e,t,n,r))}),(function(r){o.push(a.yn(e,t,n,r))})),hx.waitFor(o)}},{key:"dn",value:function(e){var t=1;return _C(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return nC(e,t)})).filter((function(e,t,n){return!t||0!==nC(e,n[t-1])}));var r=[];r.push(e);var i,a=ft(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=nC(o,e),s=nC(o,t);if(0===u)r[0]=e.Ue();else if(u>0&&s<0)r.push(o),r.push(o.Ue());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.pn(r[l],r[l+1]))return[];var h=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,yC,[]],f=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,yC,[]];c.push(IDBKeyRange.bound(h,f))}return c}},{key:"pn",value:function(e,t){return nC(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(bC)}},{key:"getMinOffset",value:function(e,t){var n=this;return hx.mapArray(this.Ze(t),(function(t){return n.tn(e,t).next((function(e){return e||Sb()}))})).next(bC)}}]),e}();function gC(e){return ST(e,"collectionParents")}function kC(e){return ST(e,"indexEntries")}function wC(e){return ST(e,"indexConfiguration")}function _C(e){return ST(e,"indexState")}function bC(e){Tb(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;ox(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ax(t.readTime,t.documentKey,n)}var xC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},IC=function(){function e(t,n,r){G(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return $(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function EC(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Tb(1===u)})));var c,l=[],h=ft(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=iT(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(p){h.e(p)}finally{h.f()}return hx.waitFor(a).next((function(){return l}))}function SC(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Sb();t=e.noDocument}return JSON.stringify(t).length}IC.DEFAULT_COLLECTION_PERCENTILE=10,IC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,IC.DEFAULT=new IC(41943040,IC.DEFAULT_COLLECTION_PERCENTILE,IC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),IC.DISABLED=new IC(-1,0,0);var TC=function(){function e(t,n,r,i){G(this,e),this.userId=t,this.yt=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return $(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return NC(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=AC(e),o=NC(e);return o.add({}).next((function(u){Tb("number"==typeof u);var s,c=new TT(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return US(e.ie,t)})),i=n.mutations.map((function(t){return US(e.ie,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.yt,i.userId,c),h=[],f=new OI((function(e,t){return Bb(e.canonicalString(),t.canonicalString())})),d=ft(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=iT(i.userId,p.key.path,u);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(a.put(v,aT))}}catch(y){d.e(y)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.In[u]=c.keys()})),hx.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return NC(e).get(t).next((function(e){return e?(Tb(e.userId===n.userId),MT(n.yt,e)):null}))}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?hx.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return NC(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Tb(t.batchId>=r),a=MT(n.yt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return NC(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return NC(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return MT(t.yt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=rT(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return AC(e).Z({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],h=u[2],f=tT(l);if(s===n.userId&&t.path.isEqual(f))return NC(e).get(h).next((function(e){if(!e)throw Sb();Tb(e.userId===n.userId),a.push(MT(n.yt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new OI(Bb),i=[];return t.forEach((function(t){var a=rT(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=AC(e).Z({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],h=tT(s);u===n.userId&&t.path.isEqual(h)?r=r.add(l):a.done()}));i.push(u)})),hx.waitFor(i).next((function(){return n.En(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=rT(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new OI(Bb);return AC(e).Z({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],h=o[2],f=tT(l);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(h)):a.done()})).next((function(){return n.En(e,u)}))}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(NC(e).get(t).next((function(e){if(null===e)throw Sb();Tb(e.userId===n.userId),r.push(MT(n.yt,e))})))})),hx.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return EC(e.se,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.An(t.batchId)})),hx.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return hx.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return AC(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=tT(e[1]);i.push(a)}else r.done()})).next((function(){Tb(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return CC(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return RC(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"re",value:function(t,n,r,i){return Tb(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function CC(e,t,n){var r=rT(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return AC(e).Z({range:a,X:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function NC(e){return ST(e,"mutations")}function AC(e){return ST(e,"documentMutations")}function RC(e){return ST(e,"mutationQueues")}var PC=function(){function e(t){G(this,e),this.bn=t}return $(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),DC=function(){function e(t,n){G(this,e),this.referenceDelegate=t,this.yt=n}return $(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next((function(n){var r=new PC(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next((function(e){return Hb.fromTimestamp(new Kb(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next((function(){return n.Vn(e).next((function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return OC(e).delete(t.targetId)})).next((function(){return n.Vn(e)})).next((function(t){return Tb(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return OC(e).Z((function(o,u){var s=FT(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return hx.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return OC(e).Z((function(e,n){var r=FT(n);t(r)}))}},{key:"Vn",value:function(e){return LC(e).get("targetGlobalKey").next((function(e){return Tb(null!==e),e}))}},{key:"Sn",value:function(e,t){return LC(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return OC(e).put(UT(this.yt,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=zI(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return OC(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=FT(n);WI(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=MC(e);return t.forEach((function(t){var o=XS(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),hx.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=MC(e);return hx.forEach(t,(function(t){var a=XS(t.path);return hx.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=MC(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=MC(e),i=uS();return r.Z({range:n,X:!0},(function(e,t,n){var r=tT(e[1]),a=new Jb(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=XS(t.path),r=IDBKeyRange.bound([n],[Wb(n)],!1,!0),i=0;return MC(e).Z({index:"documentTargetsIndex",X:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ne",value:function(e,t){return OC(e).get(t).next((function(e){return e?FT(e):null}))}}]),e}();function OC(e){return ST(e,"targets")}function LC(e){return ST(e,"targetGlobal")}function MC(e){return ST(e,"targetDocuments")}function FC(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=Bb(r,o);return 0===s?Bb(i,u):s}var UC=function(){function e(t){G(this,e),this.xn=t,this.buffer=new OI(FC),this.Nn=0}return $(e,[{key:"kn",value:function(){return++this.Nn}},{key:"On",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();FC(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),VC=function(){function e(t,n,r){G(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Mn=null}return $(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}},{key:"started",get:function(){return null!==this.Mn}},{key:"Fn",value:function(e){var t=this;bb("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Mn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!yx(e.t0)){e.next=12;break}bb("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,cx(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),qC=function(){function e(t,n){G(this,e),this.$n=t,this.params=n}return $(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return hx.resolve(xx.at);var r=new UC(t);return this.$n.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.$n.Ln(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(bb("LruGarbageCollector","Garbage collection skipped; disabled"),hx.resolve(xC)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(bb("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),xC):n.qn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"qn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(bb("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),_b()<=En.DEBUG&&bb("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),hx.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),jC=function(){function e(t,n){G(this,e),this.db=t,this.garbageCollector=function(e,t){return new qC(e,t)}(this,n)}return $(e,[{key:"Bn",value:function(e){var t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Un",value:function(e){var t=0;return this.Ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return BC(e,n)}},{key:"removeReference",value:function(e,t,n){return BC(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return BC(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return RC(e).tt((function(r){return CC(e,r,t).next((function(e){return e&&(n=!0),hx.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Kn(e,(function(o,u){if(u<=t){var s=n.Gn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Hb.min()),MC(e).delete([0,XS(o.path)])}))}));i.push(s)}})).next((function(){return hx.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return BC(e,t)}},{key:"Kn",value:function(e,t){var n,r=MC(e),i=xx.at;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==xx.at&&t(new Jb(tT(n)),i),i=s,n=u):i=xx.at})).next((function(){i!==xx.at&&t(new Jb(tT(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function BC(e,t){return MC(e).put(function(e,t){return{targetId:0,path:XS(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var zC=function(){function e(){G(this,e),this.changes=new $E((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return $(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,qI.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?hx.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),WC=function(){function e(t){G(this,e),this.yt=t}return $(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return QC(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return QC(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],DT(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=qI.newInvalidDocument(t);return QC(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(YC(t))},(function(e,i){r=n.jn(t,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:qI.newInvalidDocument(t)};return QC(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(YC(t))},(function(e,i){r={document:n.jn(t,i),size:SC(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=XE();return this.zn(e,t,(function(e,t){var i=n.jn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r=XE(),i=new RI(Jb.comparator);return this.zn(e,t,(function(e,t){var a=n.jn(e,t);r=r.insert(e,a),i=i.insert(e,SC(t))})).next((function(){return{documents:r,Jn:i}}))}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return hx.resolve();var r=new OI(JC);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(YC(r.first()),YC(r.last())),a=r.getIterator(),o=a.getNext();return QC(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Jb.fromSegments([].concat(wn(t.prefixPath),[t.collectionGroup,t.documentId]));o&&JC(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(YC(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),DT(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return QC(e).W(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=XE(),i=ft(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.jn(Jb.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=XE(),o=$C(t,n),u=$C(t,ax.max());return QC(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.jn(Jb.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new HC(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return GC(e).get("remoteDocumentGlobalKey").next((function(e){return Tb(!!e),e}))}},{key:"Qn",value:function(e,t){return GC(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=MS(e.ie,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Jb.fromSegments(t.noDocument.path),i=LT(t.noDocument.readTime);n=qI.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Sb();var a=Jb.fromSegments(t.unknownDocument.path),o=LT(t.unknownDocument.version);n=qI.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Kb(e[0],e[1]);return Hb.fromTimestamp(t)}(t.readTime)),n}(this.yt,t);if(!n.isNoDocument()||!n.version.isEqual(Hb.min()))return n}return qI.newInvalidDocument(e)}}]),e}();function KC(e){return new WC(e)}var HC=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this)).Yn=e,i.trackRemovals=r,i.Xn=new $E((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return $(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new OI((function(e,t){return Bb(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Xn.get(a);if(n.push(t.Yn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=PT(t.Yn.yt,o);i=i.add(a.path.popLast());var c=SC(s);r+=c-u.size,n.push(t.Yn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=PT(t.Yn.yt,o.convertToNoDocument(Hb.min()));n.push(t.Yn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Yn.updateMetadata(e,r)),hx.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next((function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next((function(e){var t=e.documents;return e.Jn.forEach((function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(zC);function GC(e){return ST(e,"remoteDocumentGlobal")}function QC(e){return ST(e,"remoteDocumentsV14")}function YC(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function $C(e,t){var n=t.documentKey.path.toArray();return[e,DT(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function JC(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Bb(n[a],r[a]))return i;return(i=Bb(n.length,r.length))||((i=Bb(n[n.length-2],r[r.length-2]))||Bb(n[n.length-1],r[r.length-1]))}var XC=$((function e(t,n){G(this,e),this.overlayedDocument=t,this.mutatedFields=n})),ZC=function(){function e(t,n,r,i){G(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return $(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&LE(r.mutation,e,FI.empty(),Kb.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,uS()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uS(),i=nS();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=eS();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=nS();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,uS())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=XE(),a=iS(),o=iS();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof VE)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),LE(o.mutation,t,o.mutation.getFieldMask(),Kb.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new XC(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=iS(),i=new RI((function(e,t){return e-t})),a=uS();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=ft(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||FI.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||uS()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=rS();c.forEach((function(e){if(!a.has(e)){var n=DE(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return hx.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Jb.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):hx.resolve(nS()),u=-1,s=a;return o.next((function(t){return hx.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?hx.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,uS())})).next((function(e){return{batchId:u,changes:tS(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Jb(t)).next((function(e){var t=eS();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=eS();return this.indexManager.getCollectionParents(e,i).next((function(o){return hx.forEach(o,(function(o){var u=function(e,t){return new YI(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,qI.newInvalidDocument(n)))}));var n=eS();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&LE(a.mutation,i,FI.empty(),Kb.now()),cE(t,i)&&(n=n.insert(r,i))})),n}))}}]),e}(),eN=function(){function e(t){G(this,e),this.yt=t,this.Zn=new Map,this.ts=new Map}return $(e,[{key:"getBundleMetadata",value:function(e,t){return hx.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:SS(n.createTime)}),hx.resolve()}},{key:"getNamedQuery",value:function(e,t){return hx.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:VT(e.bundledQuery),readTime:SS(e.readTime)}}(t)),hx.resolve()}}]),e}(),tN=function(){function e(){G(this,e),this.overlays=new RI(Jb.comparator),this.es=new Map}return $(e,[{key:"getOverlay",value:function(e,t){return hx.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=nS();return hx.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.oe(e,t,i)})),hx.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),hx.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=nS(),i=t.length+1,a=new Jb(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return hx.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new RI((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=nS(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=nS(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return hx.resolve(s)}},{key:"oe",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new NT(t,n));var a=this.es.get(t);void 0===a&&(a=uS(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),nN=function(){function e(){G(this,e),this.ns=new OI(rN.ss),this.rs=new OI(rN.os)}return $(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new rN(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new rN(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new Jb(new Qb([])),r=new rN(n,e),i=new rN(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new Jb(new Qb([])),n=new rN(t,e),r=new rN(t,e+1),i=uS();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new rN(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),rN=function(){function e(t,n){G(this,e),this.key=t,this._s=n}return $(e,null,[{key:"ss",value:function(e,t){return Jb.comparator(e.key,t.key)||Bb(e._s,t._s)}},{key:"os",value:function(e,t){return Bb(e._s,t._s)||Jb.comparator(e.key,t.key)}}]),e}(),iN=function(){function e(t,n){G(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new OI(rN.ss)}return $(e,[{key:"checkEmpty",value:function(e){return hx.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new TT(i,t,n,r);this.mutationQueue.push(a);var o,u=ft(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.gs=this.gs.add(new rN(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return hx.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return hx.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return hx.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return hx.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return hx.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new rN(t,0),i=new rN(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),hx.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new OI(Bb);return t.forEach((function(e){var t=new rN(e,0),i=new rN(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),hx.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Jb.isDocumentKey(i)||(i=i.child(""));var a=new rN(new Jb(i),0),o=new OI(Bb);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),hx.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Tb(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return hx.forEach(t.mutations,(function(i){var a=new rN(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new rN(t,0),r=this.gs.firstAfterOrEqual(n);return hx.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,hx.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),aN=function(){function e(t){G(this,e),this.Es=t,this.docs=new RI(Jb.comparator),this.size=0}return $(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return hx.resolve(n?n.document.mutableCopy():qI.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=XE();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():qI.newInvalidDocument(e))})),hx.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=XE(),i=new Jb(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||ox(ix(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return hx.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Sb()}},{key:"As",value:function(e,t){return hx.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new oN(this)}},{key:"getSize",value:function(e){return hx.resolve(this.size)}}]),e}(),oN=function(e){vt(n,e);var t=kt(n);function n(e){var r;return G(this,n),(r=t.call(this)).Yn=e,r}return $(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),hx.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(zC),uN=function(){function e(t){G(this,e),this.persistence=t,this.Rs=new $E((function(e){return zI(e)}),WI),this.lastRemoteSnapshotVersion=Hb.min(),this.highestTargetId=0,this.bs=0,this.Ps=new nN,this.targetCount=0,this.vs=PC.Pn()}return $(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),hx.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return hx.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return hx.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),hx.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),hx.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new PC(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,hx.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),hx.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,hx.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),hx.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return hx.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return hx.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),hx.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),hx.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),hx.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return hx.resolve(n)}},{key:"containsKey",value:function(e,t){return hx.resolve(this.Ps.containsKey(t))}}]),e}(),sN=function(){function e(t,n){var r=this;G(this,e),this.Vs={},this.overlays={},this.Ss=new xx(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new uN(this),this.indexManager=new pC,this.remoteDocumentCache=new aN((function(e){return r.referenceDelegate.xs(e)})),this.yt=new RT(n),this.Ns=new eN(this.yt)}return $(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new tN,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new iN(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;bb("MemoryPersistence","Starting transaction:",e);var i=new cN(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return hx.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),cN=function(e){vt(n,e);var t=kt(n);function n(e){var r;return G(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return $(n)}(sx),lN=function(){function e(t){G(this,e),this.persistence=t,this.Fs=new nN,this.$s=null}return $(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw Sb()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),hx.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),hx.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),hx.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return hx.forEach(this.Ls,(function(r){var i=Jb.fromPath(r);return t.qs(e,i).next((function(e){e||n.removeEntry(i,Hb.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.qs(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"qs",value:function(e,t){var n=this;return hx.or([function(){return hx.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),hN=function(){function e(t){G(this,e),this.yt=t}return $(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new fx("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nT,{unique:!0}),e.createObjectStore("documentMutations")}(e),fN(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=hx.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),fN(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Hb.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nT,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return hx.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Us(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Gs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.js(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:mT});t.createIndex("collectionPathOverlayIndex",gT,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",kT,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:oT});t.createIndex("documentKeyIndex",uT),t.createIndex("collectionGroupIndex",sT)}(e)})).next((function(){return i.Ws(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.zs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:dT}).createIndex("sequenceNumberIndex",pT,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:vT}).createIndex("documentKeyIndex",yT,{unique:!1})}(e)}))),o}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=SC(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Us",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return hx.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return hx.forEach(r,(function(r){Tb(r.userId===n.userId);var i=MT(t.yt,r);return EC(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new Qb(n),o=function(e){return[0,XS(e)]}(a);r.push(t.get(o).next((function(n){return n?hx.resolve():function(n){return t.put({targetId:0,path:XS(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return hx.waitFor(r)}))}))}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:fT});var n=t.store("collectionParents"),r=new vC,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:XS(i)})}};return t.store("remoteDocuments").Z({X:!0},(function(e,t){var n=new Qb(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({X:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],tT(r));return i(a.popLast())}))}))}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=FT(r),a=UT(t.yt,i);return n.put(a)}))}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Jb(Qb.fromString(i.document.name).popFirst(5)):i.noDocument?Jb.fromSegments(i.noDocument.path):i.unknownDocument?Jb.fromSegments(i.unknownDocument.path):Sb()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return hx.waitFor(r)}))}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=KC(this.yt),a=new sN(lN.Bs,this.yt.ie);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:uS();MT(n.yt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),hx.forEach(r,(function(e,r){var o=new gb(r),u=HT.re(n.yt,o),s=a.getIndexManager(o),c=TC.re(o,n.yt,s,a.referenceDelegate);return new ZC(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new ET(t,xx.at),e).next()}))}))}}]),e}();function fN(e){e.createObjectStore("targetDocuments",{keyPath:lT}).createIndex("documentTargetsIndex",hT,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",cT,{unique:!0}),e.createObjectStore("targetGlobal")}var dN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pN=function(){function e(t,n,r,i,a,o,u,s,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(G(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=a,this.window=o,this.document=u,this.Js=c,this.Ys=l,this.Xs=h,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new Ab(Nb.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jC(this,i),this.ii=n+"main",this.yt=new RT(s),this.ri=new dx(this.ii,this.Xs,new hN(this.yt)),this.Cs=new DC(this.referenceDelegate,this.yt),this.remoteDocumentCache=KC(this.yt),this.Ns=new zT,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&xb("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return $(e,[{key:"start",value:function(){var e=this;return this.ui().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Ab(Nb.FAILED_PRECONDITION,dN);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Cs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ss=new xx(t,e.Js)})).then((function(){e.Ds=!0})).catch((function(t){return e.ri&&e.ri.close(),Promise.reject(t)}))}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=v(d().mark((function n(r){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=v(d().mark((function t(n){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return yN(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable((function(){return e.si(!1)})))}))})).next((function(){return e.di(t)})).next((function(n){return e.isPrimary&&!n?e._i(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(yx(t))return bb("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return bb("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable((function(){return e.si(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return vN(e).get("owner").next((function(e){return hx.resolve(t.mi(e))}))}},{key:"gi",value:function(e){return yN(e).delete(this.clientId)}},{key:"yi",value:function(){var e=v(d().mark((function e(){var t,n,r,i,a=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=6;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=ST(e,"clientMetadata");return t.W().next((function(e){var n=a.Ii(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return hx.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.oi){n=ft(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.oi.removeItem(this.Ti(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ui().then((function(){return e.yi()})).then((function(){return e.hi()}))}))}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?hx.resolve(!0):vN(e).get("owner").next((function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new Ab(Nb.FAILED_PRECONDITION,dN);return!1}}return!(!t.networkEnabled||!t.inForeground)||yN(e).W().next((function(e){return void 0===t.Ii(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&bb("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=v(d().mark((function e(){var t=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new ET(e,xx.at);return t._i(n).next((function(){return t.gi(n)}))}));case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter((function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)}))}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return yN(t).W().next((function(t){return e.Ii(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ds}},{key:"getMutationQueue",value:function(e,t){return TC.re(e,this.yt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new mC(e,this.yt.ie.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return HT.re(this.yt,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;bb("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Xs)?IT:14===i?xT:13===i?bT:12===i?_T:11===i?wT:void Sb();return this.ri.runTransaction(e,o,u,(function(i){return a=new ET(i,r.Ss?r.Ss.next():xx.at),"readwrite-primary"===t?r.fi(a).next((function(e){return!!e||r.di(a)})).next((function(t){if(!t)throw xb("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable((function(){return r.si(!1)})),new Ab(Nb.FAILED_PRECONDITION,ux);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Vi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Vi",value:function(e){var t=this;return vN(e).get("owner").next((function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Ab(Nb.FAILED_PRECONDITION,dN)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vN(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=vN(e);return n.get("owner").next((function(e){return t.mi(e)?(bb("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):hx.resolve()}))}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(xb("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()}))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),!Lt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return bb("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return xb("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(Tg){xb("Failed to set zombie client id.",Tg)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(Tg){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return dx.C()}}]),e}();function vN(e){return ST(e,"owner")}function yN(e){return ST(e,"clientMetadata")}function mN(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var gN=function(){function e(t,n,r,i){G(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return $(e,null,[{key:"Ci",value:function(t,n){var r,i=uS(),a=uS(),o=ft(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),kN=function(){function e(){G(this,e),this.xi=!1}return $(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(XI(t))return hx.resolve(null);var r=rE(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=aE(t,null,"F"),r=rE(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=uS.apply(void 0,wn(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,aE(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return XI(t)||r.isEqual(Hb.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(_b()<=En.DEBUG&&bb("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),sE(t)),i.Bi(e,o,t,rx(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new OI(hE(e));return t.forEach((function(t,r){cE(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return _b()<=En.DEBUG&&bb("QueryEngine","Using full collection scan to execute query:",sE(t)),this.Ni.getDocumentsMatchingQuery(e,t,ax.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),wN=function(){function e(t,n,r,i){G(this,e),this.persistence=t,this.Li=n,this.yt=i,this.qi=new RI(Bb),this.Ui=new $E((function(e){return zI(e)}),WI),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return $(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZC(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qi)}))}}]),e}();function _N(e,t,n,r){return new wN(e,t,n,r)}function bN(e,t){return xN.apply(this,arguments)}function xN(){return xN=v(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cb(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=uS(),s=ft(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,h=ft(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;u=u.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=ft(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=ft(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),xN.apply(this,arguments)}function IN(e,t){var n=Cb(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=hx.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Tb(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=uS(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function EN(e){var t=Cb(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function SN(e,t){var n=Cb(e),r=t.snapshotVersion,i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Px.EMPTY_BYTE_STRING,Hb.min()).withLastLimboFreeSnapshotVersion(Hb.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var u=XE(),s=uS();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(TN(e,a,t.documentUpdates).next((function(e){u=e.Wi,s=e.zi}))),!r.isEqual(Hb.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return hx.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.qi=i,e}))}function TN(e,t,n){var r=uS(),i=uS();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=XE();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Hb.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):bb("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function CN(e,t){var n=Cb(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function NN(e,t){var n=Cb(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,hx.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new AT(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qi=n.qi.insert(e.targetId,e),n.Ui.set(t,e.targetId)),e}))}function AN(e,t,n){return RN.apply(this,arguments)}function RN(){return RN=v(d().mark((function e(t,n,r){var i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Cb(t),a=i.qi.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),yx(e.t1)){e.next=12;break}throw e.t1;case 12:bb("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qi=i.qi.remove(n),i.Ui.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),RN.apply(this,arguments)}function PN(e,t,n){var r=Cb(e),i=Hb.min(),a=uS();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Cb(e),i=r.Ui.get(n);return void 0!==i?hx.resolve(r.qi.get(i)):r.Cs.getTargetData(t,n)}(r,e,rE(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:Hb.min(),n?a:uS())})).next((function(e){return LN(r,lE(t),e),{documents:e,Hi:a}}))}))}function DN(e,t){var n=Cb(e),r=Cb(n.Cs),i=n.qi.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ne(e,t).next((function(e){return e?e.target:null}))}))}function ON(e,t){var n=Cb(e),r=n.Ki.get(t)||Hb.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Gi.getAllFromCollectionGroup(e,t,rx(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return LN(n,t,e),e}))}function LN(e,t,n){var r=e.Ki.get(t)||Hb.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}function MN(e,t,n,r){return FN.apply(this,arguments)}function FN(){return FN=v(d().mark((function e(t,n,r,i){var a,o,u,s,c,l,h,f,p,v;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Cb(t),o=uS(),u=XE(),s=ft(r);try{for(s.s();!(c=s.n()).done;)l=c.value,h=n.Ji(l.metadata.name),l.document&&(o=o.add(h)),(f=n.Yi(l)).setReadTime(n.Xi(l.metadata.readTime)),u=u.insert(h,f)}catch(d){s.e(d)}finally{s.f()}return p=a.Gi.newChangeBuffer({trackRemovals:!0}),e.next=7,NN(a,function(e){return rE(JI(Qb.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return TN(e,p,u).next((function(t){return p.apply(e),t})).next((function(t){return a.Cs.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.Cs.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)})).next((function(){return t.Wi}))}))})));case 9:case"end":return e.stop()}}),e)}))),FN.apply(this,arguments)}function UN(e,t){return VN.apply(this,arguments)}function VN(){return VN=v(d().mark((function e(t,n){var r,i,a,o=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:uS(),e.next=3,NN(t,rE(VT(n.bundledQuery)));case 3:return i=e.sent,a=Cb(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=SS(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ns.saveNamedQuery(e,n);var o=i.withResumeToken(Px.EMPTY_BYTE_STRING,t);return a.qi=a.qi.insert(o.targetId,o),a.Cs.updateTargetData(e,o).next((function(){return a.Cs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Cs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ns.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),VN.apply(this,arguments)}function qN(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function jN(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function BN(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var zN=function(){function e(t,n,r,i){G(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return $(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Ab(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(xb("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),WN=function(){function e(t,n,r){G(this,e),this.targetId=t,this.state=n,this.error=r}return $(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ab(i.error.code,i.error.message))),a?new e(t,i.state,r):(xb("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),KN=function(){function e(t,n){G(this,e),this.clientId=t,this.activeTargetIds=n}return $(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=cS(),o=0;i&&o<r.activeTargetIds.length;++o)i=Rx(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(xb("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),HN=function(){function e(t,n){G(this,e),this.clientId=t,this.onlineState=n}return $(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(xb("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),GN=function(){function e(){G(this,e),this.activeTargetIds=cS()}return $(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),QN=function(){function e(t,n,r,i,a){G(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new RI(Bb),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=qN(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new GN),this.lr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return $(e,[{key:"start",value:function(){var e=v(d().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h,f=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=ft(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.sr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(qN(this.persistenceKey,i)))&&(o=KN.Zi(i,a))&&(this.ur=this.ur.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.gr(),(u=this.storage.getItem(this.wr))&&(s=this.yr(u))&&this.pr(s),c=ft(this.cr);try{for(c.s();!(l=c.n()).done;)h=l.value,this.rr(h)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(BN(this.persistenceKey,e));if(n){var r=WN.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(BN(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Er(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return bb("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){bb("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){bb("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(bb("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void xb("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(v(d().mark((function e(){var r,i,a,o,u,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(a));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(u));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}s=function(e){var t=xx.at;if(null!=e)try{var n=JSON.parse(e);Tb("number"==typeof n),t=n}catch(e){xb("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==xx.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Mr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ar",get:function(){return this.ur.get(this.sr)}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new zN(this.currentUser,e,t,n),i=jN(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=jN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=BN(this.persistenceKey,e),i=new WN(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return KN.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return zN.Zi(new gb(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return WN.Zi(r,t)}},{key:"yr",value:function(e){return HN.Zi(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:bb("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Br(o,u).then((function(){n.ur=r}))}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=cS();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),YN=function(){function e(){G(this,e),this.Lr=new GN,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return $(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new GN,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),$N=function(){function e(){G(this,e)}return $(e,[{key:"Ur",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),JN=function(){function e(){var t=this;G(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return $(e,[{key:"Ur",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){bb("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=ft(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){bb("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=ft(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),XN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},ZN=function(){function e(t){G(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return $(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),eA=function(e){vt(n,e);var t=kt(n);function n(e){var r;return G(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return $(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new yb;o.setWithCredentials(!0),o.listenOnce(hb.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case lb.NO_ERROR:var t=o.getResponseJson();bb("Connection","XHR received:",JSON.stringify(t)),i(t);break;case lb.TIMEOUT:bb("Connection",'RPC "'+e+'" timed out'),a(new Ab(Nb.DEADLINE_EXCEEDED,"Request time out"));break;case lb.HTTP_ERROR:var n=o.getStatus();if(bb("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Nb).indexOf(t)>=0?t:Nb.UNKNOWN}(u.status);a(new Ab(s,u.message))}else a(new Ab(Nb.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Ab(Nb.UNAVAILABLE,"Connection failed."));break;default:Sb()}}finally{bb("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=sb(),a=cb(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new pb({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var u=r.join("");bb("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,h=new ZN({Hr:function(e){l?bb("Connection","Not sending because WebChannel is closed:",e):(c||(bb("Connection","Opening WebChannel transport."),s.open(),c=!0),bb("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(s,vb.EventType.OPEN,(function(){l||bb("Connection","WebChannel transport opened.")})),f(s,vb.EventType.CLOSE,(function(){l||(l=!0,bb("Connection","WebChannel transport closed"),h.io())})),f(s,vb.EventType.ERROR,(function(e){l||(l=!0,Ib("Connection","WebChannel transport errored:",e),h.io(new Ab(Nb.UNAVAILABLE,"The operation could not be completed")))})),f(s,vb.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Tb(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){bb("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=zE[e];if(void 0!==t)return YE(t)}(a),u=i.message;void 0===o&&(o=Nb.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,h.io(new Ab(o,u)),s.close()}else bb("Connection","WebChannel received:",n),h.ro(n)}})),f(a,fb.STAT_EVENT,(function(e){e.stat===db.PROXY?bb("Connection","Detected buffering proxy"):e.stat===db.NOPROXY&&bb("Connection","Detected no buffering proxy")})),setTimeout((function(){h.so()}),0),h}}]),n}(function(){function e(t){G(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return $(e,[{key:"co",get:function(){return!1}},{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);bb("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return bb("RestConnection","Received: ",e),e}),(function(t){throw Ib("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+kb,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=XN[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function tA(){return"undefined"!=typeof window?window:null}function nA(){return"undefined"!=typeof document?document:null}function rA(e){return new bS(e,!0)}var iA=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;G(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return $(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&bb("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),aA=function(){function e(t,n,r,i,a,o,u,s){G(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new iA(t,n)}return $(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"qo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.qo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===Nb.RESOURCE_EXHAUSTED?(xb(n.toString()),xb("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===Nb.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Uo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new Ab(Nb.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.xo.Ro(v(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return bb("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(bb("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),oA=function(e){vt(n,e);var t=kt(n);function n(e,r,i,a,o,u){var s;return G(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).yt=o,s}return $(n,[{key:"jo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Sb()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.wt?(Tb(void 0===t||"string"==typeof t),Px.fromBase64String(t||"")):(Tb(void 0===t||t instanceof Uint8Array),Px.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Nb.UNKNOWN:YE(e.code);return new Ab(t,e.message||"")}(o);n=new pS(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=AS(e,s.document.name),l=SS(s.document.updateTime),h=s.document.createTime?SS(s.document.createTime):Hb.min(),f=new UI({mapValue:{fields:s.document.fields}}),d=qI.newFoundDocument(c,l,h,f),p=s.targetIds||[],v=s.removedTargetIds||[];n=new fS(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=AS(e,y.document),g=y.readTime?SS(y.readTime):Hb.min(),k=qI.newNoDocument(m,g),w=y.removedTargetIds||[];n=new fS([],w,k.key,k)}else if("documentRemove"in t){t.documentRemove;var _=t.documentRemove;_.document;var b=AS(e,_.document),x=_.removedTargetIds||[];n=new fS([],x,b,null)}else{if(!("filter"in t))return Sb();t.filter;var I=t.filter;I.targetId;var E=I.count||0,S=new GE(E),T=I.targetId;n=new dS(T,S)}return n}(this.yt,e),n=function(e){if(!("targetChange"in e))return Hb.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Hb.min():t.readTime?SS(t.readTime):Hb.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=DS(this.yt),t.addTarget=function(e,t){var n,r=t.target;return(n=KI(r)?{documents:qS(e,r)}:{query:jS(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=IS(e,t.resumeToken):t.snapshotVersion.compareTo(Hb.min())>0&&(n.readTime=xS(e,t.snapshotVersion.toTimestamp())),n}(this.yt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Sb()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.yt,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=DS(this.yt),t.removeTarget=e,this.Bo(t)}}]),n}(aA),uA=function(e){vt(n,e);var t=kt(n);function n(e,r,i,a,o,u){var s;return G(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).yt=o,s.Jo=!1,s}return $(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,Yr(yt(n.prototype),"start",this).call(this)}},{key:"Uo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Tb(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(Tb(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?SS(e.updateTime):SS(t);return n.isEqual(Hb.min())&&(n=SS(t)),new NE(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=SS(e.commitTime);return this.listener.Zo(n,t)}return Tb(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=DS(this.yt),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return US(t.yt,e)}))};this.Bo(n)}}]),n}(aA),sA=function(e){vt(n,e);var t=kt(n);function n(e,r,i,a){var o;return G(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.yt=a,o.nu=!1,o}return $(n,[{key:"su",value:function(){if(this.nu)throw new Ab(Nb.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.connection.ao(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Nb.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Ab(Nb.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=c(a,2),u=o[0],s=o[1];return i.connection._o(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Nb.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Ab(Nb.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return $((function e(){G(this,e)}))}());var cA=function(){function e(t,n){G(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return $(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(xb(t),this.ou=!1):bb("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),lA=$((function e(t,n,r,i,a){var o=this;G(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur((function(e){r.enqueueAndForget(v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=_A(o),!e.t0){e.next=5;break}return bb("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Cb(t))._u.add(4),e.next=4,dA(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,hA(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new cA(r,i)}));function hA(e){return fA.apply(this,arguments)}function fA(){return fA=v(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_A(t)){e.next=18;break}n=ft(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),fA.apply(this,arguments)}function dA(e){return pA.apply(this,arguments)}function pA(){return pA=v(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ft(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),pA.apply(this,arguments)}function vA(e,t){var n=Cb(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),wA(n)?kA(n):$A(n).ko()&&mA(n,t))}function yA(e,t){var n=Cb(e),r=$A(n);n.du.delete(t),r.ko()&&gA(n,t),0===n.du.size&&(r.ko()?r.Fo():_A(n)&&n.gu.set("Unknown"))}function mA(e,t){e.yu.Ot(t.targetId),$A(e).zo(t)}function gA(e,t){e.yu.Ot(t),$A(e).Ho(t)}function kA(e){e.yu=new yS({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.du.get(t)||null}}),$A(e).start(),e.gu.uu()}function wA(e){return _A(e)&&!$A(e).No()&&e.du.size>0}function _A(e){return 0===Cb(e)._u.size}function bA(e){e.yu=void 0}function xA(e){return IA.apply(this,arguments)}function IA(){return IA=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){mA(t,e)}));case 1:case"end":return e.stop()}}),e)}))),IA.apply(this,arguments)}function EA(e,t){return SA.apply(this,arguments)}function SA(){return SA=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:bA(t),wA(t)?(t.gu.hu(n),kA(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),SA.apply(this,arguments)}function TA(e,t,n){return CA.apply(this,arguments)}function CA(){return CA=v(d().mark((function e(t,n,r){var i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof pS&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=v(d().mark((function e(t,n){var r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=ft(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),bb("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,NA(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof fS?t.yu.Kt(n):n instanceof dS?t.yu.Jt(n):t.yu.jt(n),r.isEqual(Hb.min())){e.next=29;break}return e.prev=14,e.next=17,EN(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.Zt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(Px.EMPTY_BYTE_STRING,n.snapshotVersion)),gA(e,t);var r=new AT(n.target,t,1,n.sequenceNumber);mA(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),bb("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,NA(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),CA.apply(this,arguments)}function NA(e,t,n){return AA.apply(this,arguments)}function AA(){return AA=v(d().mark((function e(t,n,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(yx(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,dA(t);case 5:t.gu.set("Offline"),r||(r=function(){return EN(t.localStore)}),t.asyncQueue.enqueueRetryable(v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bb("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,hA(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),AA.apply(this,arguments)}function RA(e,t){return t().catch((function(n){return NA(e,n,t)}))}function PA(e){return DA.apply(this,arguments)}function DA(){return DA=v(d().mark((function e(t){var n,r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Cb(t),r=JA(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!OA(n)){e.next=19;break}return e.prev=3,e.next=6,CN(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,LA(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,NA(n,e.t0);case 17:e.next=2;break;case 19:MA(n)&&FA(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),DA.apply(this,arguments)}function OA(e){return _A(e)&&e.fu.length<10}function LA(e,t){e.fu.push(t);var n=JA(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function MA(e){return _A(e)&&!JA(e).No()&&e.fu.length>0}function FA(e){JA(e).start()}function UA(e){return VA.apply(this,arguments)}function VA(){return VA=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:JA(t).eu();case 1:case"end":return e.stop()}}),e)}))),VA.apply(this,arguments)}function qA(e){return jA.apply(this,arguments)}function jA(){return jA=v(d().mark((function e(t){var n,r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=JA(t),r=ft(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),jA.apply(this,arguments)}function BA(e,t,n){return zA.apply(this,arguments)}function zA(){return zA=v(d().mark((function e(t,n,r){var i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=CT.from(i,n,r),e.next=3,RA(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,PA(t);case 5:case"end":return e.stop()}}),e)}))),zA.apply(this,arguments)}function WA(e,t){return KA.apply(this,arguments)}function KA(){return KA=v(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&JA(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=v(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!QE(i=n.code)||i===Nb.ABORTED){e.next=7;break}return r=t.fu.shift(),JA(t).Mo(),e.next=5,RA(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,PA(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:MA(t)&&FA(t);case 5:case"end":return e.stop()}}),e)}))),KA.apply(this,arguments)}function HA(e,t){return GA.apply(this,arguments)}function GA(){return GA=v(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Cb(t)).asyncQueue.verifyOperationInProgress(),bb("RemoteStore","RemoteStore received new credentials"),i=_A(r),r._u.add(3),e.next=6,dA(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,hA(r);case 12:case"end":return e.stop()}}),e)}))),GA.apply(this,arguments)}function QA(e,t){return YA.apply(this,arguments)}function YA(){return YA=v(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Cb(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,hA(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,dA(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),YA.apply(this,arguments)}function $A(e){return e.pu||(e.pu=function(e,t,n){var r=Cb(e);return r.su(),new oA(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:xA.bind(null,e),Zr:EA.bind(null,e),Wo:TA.bind(null,e)}),e.wu.push(function(){var t=v(d().mark((function t(n){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Mo(),wA(e)?kA(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:bA(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function JA(e){return e.Iu||(e.Iu=function(e,t,n){var r=Cb(e);return r.su(),new uA(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:UA.bind(null,e),Zr:WA.bind(null,e),tu:qA.bind(null,e),Zo:BA.bind(null,e)}),e.wu.push(function(){var t=v(d().mark((function t(n){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Mo(),t.next=4,PA(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(bb("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var XA=function(){function e(t,n,r,i,a){G(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Rb,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return $(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ab(Nb.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function ZA(e,t){if(xb("AsyncQueue","".concat(t,": ").concat(e)),yx(e))return new Ab(Nb.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var eR=function(){function e(t){G(this,e),this.comparator=t?function(e,n){return t(e,n)||Jb.comparator(e.key,n.key)}:function(e,t){return Jb.comparator(e.key,t.key)},this.keyedMap=eS(),this.sortedSet=new RI(this.comparator)}return $(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),tR=function(){function e(){G(this,e),this.Tu=new RI(Jb.comparator)}return $(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Sb():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),nR=function(){function e(t,n,r,i,a,o,u,s,c){G(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return $(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,eR.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),rR=$((function e(){G(this,e),this.Au=void 0,this.listeners=[]})),iR=$((function e(){G(this,e),this.queries=new $E((function(e){return uE(e)}),oE),this.onlineState="Unknown",this.Ru=new Set}));function aR(e,t){return oR.apply(this,arguments)}function oR(){return oR=v(d().mark((function e(t,n){var r,i,a,o,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Cb(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new rR),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=ZA(e.t0,"Initialization of query '".concat(sE(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&hR(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),oR.apply(this,arguments)}function uR(e,t){return sR.apply(this,arguments)}function sR(){return sR=v(d().mark((function e(t,n){var r,i,a,o,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Cb(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),sR.apply(this,arguments)}function cR(e,t){var n,r=Cb(e),i=!1,a=ft(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=ft(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Pu(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}s.Au=o}}}catch(h){a.e(h)}finally{a.f()}i&&hR(r)}function lR(e,t,n){var r=Cb(e),i=r.queries.get(t);if(i){var a,o=ft(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function hR(e){e.Ru.forEach((function(e){e.next()}))}var fR=function(){function e(t,n,r){G(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return $(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=ft(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new nR(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=nR.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}]),e}(),dR=function(){function e(t,n){G(this,e),this.ku=t,this.byteLength=n}return $(e,[{key:"Ou",value:function(){return"metadata"in this.ku}}]),e}(),pR=function(){function e(t){G(this,e),this.yt=t}return $(e,[{key:"Ji",value:function(e){return AS(this.yt,e)}},{key:"Yi",value:function(e){return e.metadata.exists?MS(this.yt,e.document,!1):qI.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return SS(e)}}]),e}(),vR=function(){function e(t,n,r){G(this,e),this.Mu=t,this.localStore=n,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=yR(t)}return $(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;var n=Qb.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new pR(this.yt),i=ft(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Ji(a.metadata.name),s=ft(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||uS()).add(u);n.set(c,l)}}catch(h){s.e(h)}finally{s.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=v(d().mark((function e(){var t,n,r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MN(this.localStore,new pR(this.yt),this.documents,this.Mu.id);case 2:t=e.sent,n=this.$u(this.documents),r=ft(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,UN(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function yR(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var mR=$((function e(t){G(this,e),this.key=t})),gR=$((function e(t){G(this,e),this.key=t})),kR=function(){function e(t,n){G(this,e),this.query=t,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=uS(),this.mutatedKeys=uS(),this.Gu=hE(t),this.Qu=new eR(this.Gu)}return $(e,[{key:"ju",get:function(){return this.qu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new tR,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=cE(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Hu(l,h)||(r.track({type:2,doc:h}),p=!0,(s&&n.Gu(h,s)>0||c&&n.Gu(h,c)<0)&&(u=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Sb()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.Uu;return this.Uu=u,0!==a.length||s?{snapshot:new nR(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new tR,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.qu=t.qu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.qu=t.qu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=uS(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new gR(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new mR(e))})),n}},{key:"tc",value:function(e){this.qu=e.Hi,this.Ku=uS();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return nR.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}]),e}(),wR=$((function e(t,n,r){G(this,e),this.query=t,this.targetId=n,this.view=r})),_R=$((function e(t){G(this,e),this.key=t,this.nc=!1})),bR=function(){function e(t,n,r,i,a,o){G(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new $E((function(e){return uE(e)}),oE),this.rc=new Map,this.oc=new Set,this.uc=new RI(Jb.comparator),this.cc=new Map,this.ac=new nN,this.hc={},this.lc=new Map,this.fc=PC.vn(),this.onlineState="Unknown",this.dc=void 0}return $(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function xR(e,t){return IR.apply(this,arguments)}function IR(){return IR=v(d().mark((function e(t,n){var r,i,a,o,u,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yP(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,NN(r.localStore,rE(n));case 8:return u=e.sent,r.isPrimaryClient&&vA(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,ER(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),IR.apply(this,arguments)}function ER(e,t,n,r,i){return SR.apply(this,arguments)}function SR(){return SR=v(d().mark((function e(t,n,r,i,a){var o,u,s,c,l,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=v(d().mark((function e(t,n,r,i){var a,o,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,PN(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(HR(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,PN(t.localStore,n,!0);case 3:return o=e.sent,u=new kR(n,o.Hi),s=u.Wu(o.documents),c=hS.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),HR(t,r,l.Xu),h=new wR(n,r,u),e.abrupt("return",(t.ic.set(n,h),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),SR.apply(this,arguments)}function TR(e,t){return CR.apply(this,arguments)}function CR(){return CR=v(d().mark((function e(t,n){var r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Cb(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter((function(e){return!oE(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,AN(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),yA(r.remoteStore,i.targetId),WR(r,i.targetId)})).catch(cx);case 9:e.next=14;break;case 11:return WR(r,i.targetId),e.next=14,AN(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),CR.apply(this,arguments)}function NR(e,t,n){return AR.apply(this,arguments)}function AR(){return AR=v(d().mark((function e(t,n,r){var i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=mP(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Cb(e),a=Kb.now(),o=t.reduce((function(e,t){return e.add(t.key)}),uS());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=XE(),s=uS();return i.Gi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=ft(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=ME(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new VE(c.key,l,VI(l.value.mapValue),AE.exists(!0)))}}catch(h){s.e(h)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:tS(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new RI(Bb)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,YR(i,a.changes);case 9:return e.next=11,PA(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=ZA(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),AR.apply(this,arguments)}function RR(e,t){return PR.apply(this,arguments)}function PR(){return PR=v(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cb(t),e.prev=1,e.next=4,SN(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&(Tb(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?Tb(n.nc):e.removedDocuments.size>0&&(Tb(n.nc),n.nc=!1))})),e.next=8,YR(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,cx(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),PR.apply(this,arguments)}function DR(e,t,n){var r=Cb(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Cb(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=ft(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&hR(n)}(r.eventManager,t),i.length&&r.sc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function OR(e,t,n){return LR.apply(this,arguments)}function LR(){return LR=v(d().mark((function e(t,n,r){var i,a,o,u,s,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Cb(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new RI(Jb.comparator)).insert(o,qI.newNoDocument(o,Hb.min())),s=uS().add(o),c=new lS(Hb.min(),new Map,new OI(Bb),u,s),e.next=9,RR(i,c);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),QR(i),e.next=16;break;case 14:return e.next=16,AN(i.localStore,n,!1).then((function(){return WR(i,n,r)})).catch(cx);case 16:case"end":return e.stop()}}),e)}))),LR.apply(this,arguments)}function MR(e,t){return FR.apply(this,arguments)}function FR(){return FR=v(d().mark((function e(t,n){var r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cb(t),i=n.batch.batchId,e.prev=1,e.next=4,IN(r.localStore,n);case 4:return a=e.sent,zR(r,i,null),BR(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,YR(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,cx(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),FR.apply(this,arguments)}function UR(e,t,n){return VR.apply(this,arguments)}function VR(){return VR=v(d().mark((function e(t,n,r){var i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Cb(t),e.prev=1,e.next=4,function(e,t){var n=Cb(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Tb(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,zR(i,n,r),BR(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,YR(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,cx(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),VR.apply(this,arguments)}function qR(e,t){return jR.apply(this,arguments)}function jR(){return jR=v(d().mark((function e(t,n){var r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _A((r=Cb(t)).remoteStore)||bb("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Cb(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.lc.get(i)||[]).push(n),r.lc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=ZA(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),jR.apply(this,arguments)}function BR(e,t){(e.lc.get(t)||[]).forEach((function(e){e.resolve()})),e.lc.delete(t)}function zR(e,t,n){var r=Cb(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function WR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=ft(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||KR(e,t)}))}function KR(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(yA(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),QR(e))}function HR(e,t,n){var r,i=ft(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof mR?(e.ac.addReference(a.key,t),GR(e,a)):a instanceof gR?(bb("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||KR(e,a.key)):Sb()}}catch(o){i.e(o)}finally{i.f()}}function GR(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(bb("SyncEngine","New document in limbo: "+n),e.oc.add(r),QR(e))}function QR(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new Jb(Qb.fromString(t)),r=e.fc.next();e.cc.set(r,new _R(n)),e.uc=e.uc.insert(n,r),vA(e.remoteStore,new AT(rE(JI(n.path)),r,2,xx.at))}}function YR(e,t,n){return $R.apply(this,arguments)}function $R(){return $R=v(d().mark((function e(t,n,r){var i,a,o,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Cb(t),a=[],o=[],u=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){u.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=gN.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sc.Wo(a),e.next=9,function(){var e=v(d().mark((function e(t,n){var r,i,a,o,u,s,c,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cb(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return hx.forEach(n,(function(t){return hx.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return hx.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),yx(e.t0)){e.next=10;break}throw e.t0;case 10:bb("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=ft(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.qi.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.qi=r.qi.insert(u,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),$R.apply(this,arguments)}function JR(e,t){return XR.apply(this,arguments)}function XR(){return XR=v(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Cb(t)).currentUser.isEqual(n)){e.next=11;break}return bb("SyncEngine","User change. New user:",n.toKey()),e.next=5,bN(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new Ab(Nb.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,YR(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),XR.apply(this,arguments)}function ZR(e,t){var n=Cb(e),r=n.cc.get(t);if(r&&r.nc)return uS().add(r.key);var i=uS(),a=n.rc.get(t);if(!a)return i;var o,u=ft(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ic.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function eP(e,t){return tP.apply(this,arguments)}function tP(){return tP=v(d().mark((function e(t,n){var r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cb(t),e.next=3,PN(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.tc(i),e.abrupt("return",(r.isPrimaryClient&&HR(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),tP.apply(this,arguments)}function nP(e,t){return rP.apply(this,arguments)}function rP(){return rP=v(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cb(t),e.abrupt("return",ON(r.localStore,n).then((function(e){return YR(r,e)})));case 2:case"end":return e.stop()}}),e)}))),rP.apply(this,arguments)}function iP(e,t,n,r){return aP.apply(this,arguments)}function aP(){return aP=v(d().mark((function e(t,n,r,i){var a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Cb(t),e.next=3,function(e,t){var n=Cb(e),r=Cb(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Tn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):hx.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,PA(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(zR(a,n,i||null),BR(a,n),function(e,t){Cb(Cb(e).mutationQueue).An(t)}(a.localStore,n)):Sb();case 11:return e.next=13,YR(a,o);case 13:e.next=16;break;case 15:bb("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),aP.apply(this,arguments)}function oP(e,t){return uP.apply(this,arguments)}function uP(){return uP=v(d().mark((function e(t,n){var r,i,a,o,u,s,c,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(yP(r=Cb(t)),mP(r),!0!==n||!0===r.dc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,sP(r,i.toArray());case 5:return a=e.sent,r.dc=!0,e.next=9,QA(r.remoteStore,!0);case 9:o=ft(a);try{for(o.s();!(u=o.n()).done;)s=u.value,vA(r.remoteStore,s)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.dc){e.next=25;break}return c=[],l=Promise.resolve(),r.rc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return WR(r,t),AN(r.localStore,t,!0)})),yA(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,sP(r,c);case 21:return function(e){var t=Cb(e);t.cc.forEach((function(e,n){yA(t.remoteStore,n)})),t.ac.fs(),t.cc=new Map,t.uc=new RI(Jb.comparator)}(r),r.dc=!1,e.next=25,QA(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),uP.apply(this,arguments)}function sP(e,t,n){return cP.apply(this,arguments)}function cP(){return cP=v(d().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f,p,v,y,m,g;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Cb(t),a=[],o=[],u=ft(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(h=i.rc.get(c))||0===h.length){e.next=34;break}return e.next=11,NN(i.localStore,rE(h[0]));case 11:l=e.sent,f=ft(h),e.prev=13,f.s();case 15:if((p=f.n()).done){e.next=24;break}return v=p.value,y=i.ic.get(v),e.next=20,eP(i,y);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,DN(i.localStore,c);case 36:return g=e.sent,e.next=39,NN(i.localStore,g);case 39:return l=e.sent,e.next=42,ER(i,lP(g),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sc.Wo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),cP.apply(this,arguments)}function lP(e){return $I(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function hP(e){var t=Cb(e);return Cb(Cb(t.localStore).persistence).vi()}function fP(e,t,n,r){return dP.apply(this,arguments)}function dP(){return dP=v(d().mark((function e(t,n,r,i){var a,o,u,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Cb(t)).dc){e.next=3;break}return e.abrupt("return",void bb("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.rc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,ON(a.localStore,lE(o[0]));case 10:return u=e.sent,s=lS.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Px.EMPTY_BYTE_STRING),e.next=14,YR(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,AN(a.localStore,n,!0);case 17:return WR(a,n,i),e.abrupt("break",20);case 19:Sb();case 20:case"end":return e.stop()}}),e)}))),dP.apply(this,arguments)}function pP(e,t,n){return vP.apply(this,arguments)}function vP(){return vP=v(d().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=yP(t)).dc){e.next=45;break}a=ft(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.rc.has(u)){e.next=10;break}return bb("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,DN(i.localStore,u);case 12:return s=e.sent,e.next=15,NN(i.localStore,s);case 15:return c=e.sent,e.next=18,ER(i,lP(s),c.targetId,!1,c.resumeToken);case 18:vA(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=ft(r),e.prev=30,f=d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.rc.has(t),!e.t0){e.next=5;break}return e.next=5,AN(i.localStore,t,!1).then((function(){yA(i.remoteStore,t),WR(i,t)})).catch(cx);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),vP.apply(this,arguments)}function yP(e){var t=Cb(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=RR.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=OR.bind(null,t),t.sc.Wo=cR.bind(null,t.eventManager),t.sc.wc=lR.bind(null,t.eventManager),t}function mP(e){var t=Cb(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=MR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=UR.bind(null,t),t}function gP(e,t,n){var r=Cb(e);(function(){var e=v(d().mark((function e(t,n,r){var i,a,o,u,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Cb(e),r=SS(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ns.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(yR(i)),a=new vR(i,t.localStore,n.yt),e.next=15,n.mc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.mc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,YR(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=Cb(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ns.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Ib("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var kP=function(){function e(){G(this,e),this.synchronizeTabs=!1}return $(e,[{key:"initialize",value:function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yt=rA(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return _N(this.persistence,new kN,e.initialUser,this.yt)}},{key:"yc",value:function(e){return new sN(lN.Bs,this.yt)}},{key:"gc",value:function(e){return new YN}},{key:"terminate",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),wP=function(e){vt(n,e);var t=kt(n);function n(e,r,i){var a;return G(this,n),(a=t.call(this)).Ac=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return $(n,[{key:"initialize",value:function(){var e=v(d().mark((function e(t){var r=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yr(yt(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ac.initialize(this,t);case 4:return e.next=6,mP(this.Ac.syncEngine);case 6:return e.next=8,PA(this.Ac.remoteStore);case 8:return e.next=10,this.persistence.li((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){return _N(this.persistence,new kN,e.initialUser,this.yt)}},{key:"Tc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new VC(n,e.asyncQueue,t)}},{key:"Ec",value:function(e,t){var n=new bx(t,this.persistence);return new _x(e.asyncQueue,n)}},{key:"yc",value:function(e){var t=mN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?IC.withCacheSize(this.cacheSizeBytes):IC.DEFAULT;return new pN(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,tA(),nA(),this.yt,this.sharedClientState,!!this.forceOwnership)}},{key:"gc",value:function(e){return new YN}}]),n}(kP),_P=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this,e,r,!1)).Ac=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return $(n,[{key:"initialize",value:function(){var e=v(d().mark((function e(t){var r,i=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yr(yt(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ac.syncEngine,e.t0=this.sharedClientState instanceof QN,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:iP.bind(null,r),$r:fP.bind(null,r),Br:pP.bind(null,r),vi:hP.bind(null,r),Mr:nP.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oP(i.Ac.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"gc",value:function(e){var t=tA();if(!QN.C(t))throw new Ab(Nb.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=mN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new QN(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(wP),bP=function(){function e(){G(this,e)}return $(e,[{key:"initialize",value:function(){var e=v(d().mark((function e(t,n){var r=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return DR(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=JR.bind(null,this.syncEngine),e.next=12,QA(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new iR}},{key:"createDatastore",value:function(e){var t,n=rA(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new eA(t));return function(e,t,n,r){return new sA(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return DR(o.syncEngine,e,0)},a=JN.C()?new JN:new $N,new lA(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new bR(e,t,n,r,i,a);return o&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Cb(t),bb("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,dA(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function xP(e,t,n){if(!n)throw new Ab(Nb.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function IP(e,t,n,r){if(!0===t&&!0===r)throw new Ab(Nb.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function EP(e){if(!Jb.isDocumentKey(e))throw new Ab(Nb.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function SP(e){if(Jb.isDocumentKey(e))throw new Ab(Nb.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function TP(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Sb()}function CP(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ab(Nb.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=TP(e);throw new Ab(Nb.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function NP(e,t){if(t<=0)throw new Ab(Nb.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var AP=new Map,RP=function(){function e(t){var n;if(G(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Ab(Nb.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ab(Nb.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,IP("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return $(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),PP=function(){function e(t,n,r,i){G(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RP({}),this._settingsFrozen=!1}return $(e,[{key:"app",get:function(){if(!this._app)throw new Ab(Nb.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Ab(Nb.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RP(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Db;switch(e.type){case"gapi":var t=e.client;return new Fb(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ab(Nb.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=AP.get(e);t&&(bb("ComponentProvider","Removing Datastore"),AP.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function DP(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=CP(e,PP))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Ib("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=gb.MOCK_USER;else{o=Kt(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Ab(Nb.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new gb(s)}e._authCredentials=new Ob(new Pb(o,u))}}var OP=function(){function e(t,n,r){G(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return $(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new MP(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),LP=function(){function e(t,n,r){G(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return $(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),MP=function(e){vt(n,e);var t=kt(n);function n(e,r,i){var a;return G(this,n),(a=t.call(this,e,r,JI(i)))._path=i,a.type="collection",a}return $(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new OP(this.firestore,null,new Jb(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(LP);function FP(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=gn(e),xP("collection","path",t),e instanceof PP){var a=Qb.fromString.apply(Qb,[t].concat(r));return SP(a),new MP(e,null,a)}if(!(e instanceof OP||e instanceof MP))throw new Ab(Nb.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Qb.fromString.apply(Qb,[t].concat(r)));return SP(o),new MP(e.firestore,null,o)}function UP(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=gn(e),1===arguments.length&&(t=jb.R()),xP("doc","path",t),e instanceof PP){var a=Qb.fromString.apply(Qb,[t].concat(r));return EP(a),new OP(e,null,new Jb(a))}if(!(e instanceof OP||e instanceof MP))throw new Ab(Nb.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Qb.fromString.apply(Qb,[t].concat(r)));return EP(o),new OP(e.firestore,e instanceof MP?e.converter:null,new Jb(o))}function VP(e,t){return e=gn(e),t=gn(t),(e instanceof OP||e instanceof MP)&&(t instanceof OP||t instanceof MP)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function qP(e,t){return e=gn(e),t=gn(t),e instanceof LP&&t instanceof LP&&e.firestore===t.firestore&&oE(e._query,t._query)&&e.converter===t.converter}function jP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return v(d().mark((function r(){var i;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var BP=function(){function e(t){G(this,e),this.observer=t,this.muted=!1}return $(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):xb("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),zP=function(){function e(t,n){var r=this;G(this,e),this.Pc=t,this.yt=n,this.metadata=new Rb,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.ku.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ku))))}),(function(e){return r.metadata.reject(e)}))}return $(e,[{key:"close",value:function(){return this.Pc.cancel()}},{key:"getMetadata",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mc",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Vc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){var e=v(d().mark((function e(){var t,n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Sc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.vc.decode(t),r=Number(n),isNaN(r)&&this.Dc("length string (".concat(n,") is not valid number")),e.next=9,this.Cc(r);case 9:return i=e.sent,e.abrupt("return",new dR(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Sc",value:function(){var e=v(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.xc()<0)){e.next=7;break}return e.next=3,this.Nc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.xc())<0&&this.Dc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Nc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Dc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.vc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dc",value:function(e){throw this.Pc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Nc",value:function(){var e=v(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Pc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),WP=function(){function e(t){G(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return $(e,[{key:"lookup",value:function(){var e=v(d().mark((function e(t){var n,r=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Ab(Nb.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=v(d().mark((function e(t,n){var r,i,a,o,u,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cb(t),i=DS(r.yt)+"/documents",a={documents:n.map((function(e){return NS(r.yt,e)}))},e.next=5,r._o("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=FS(r.yt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Tb(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new KE(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=v(d().mark((function e(){var t,n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Jb.fromPath(t);n.mutations.push(new HE(r,n.precondition(r)))})),e.next=7,function(){var e=v(d().mark((function e(t,n){var r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cb(t),i=DS(r.yt)+"/documents",a={writes:n.map((function(e){return US(r.yt,e)}))},e.next=3,r.ao("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Sb();t=Hb.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Ab(Nb.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Hb.min())?AE.exists(!1):AE.updateTime(t):AE.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Hb.min()))throw new Ab(Nb.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return AE.updateTime(t)}return AE.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),KP=function(){function e(t,n,r,i,a){G(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new iA(this.asyncQueue,"transaction_retry")}return $(e,[{key:"run",value:function(){this.kc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.xo.Ro(v(d().mark((function t(){var n,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new WP(e.datastore),(r=e.Mc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Fc(t)}))}))})).catch((function(t){e.Fc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!Nx(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Fc",value:function(e){var t=this;this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"$c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!QE(t)}return!1}}]),e}(),HP=function(){function e(t,n,r,i){var a=this;G(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=gb.UNAUTHENTICATED,this.clientId=jb.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bb("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return bb("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return $(e,[{key:"getConfiguration",value:function(){var e=v(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Ab(Nb.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Rb;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(v(d().mark((function n(){var r;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=ZA(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function GP(e,t){return QP.apply(this,arguments)}function QP(){return QP=v(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),bb("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,bN(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),QP.apply(this,arguments)}function YP(e,t){return $P.apply(this,arguments)}function $P(){return $P=v(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,JP(t);case 3:return r=e.sent,bb("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return HA(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return HA(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),$P.apply(this,arguments)}function JP(e){return XP.apply(this,arguments)}function XP(){return XP=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return bb("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,GP(t,new kP);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),XP.apply(this,arguments)}function ZP(e){return eD.apply(this,arguments)}function eD(){return eD=v(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return bb("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,YP(t,new bP);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),eD.apply(this,arguments)}function tD(e){return JP(e).then((function(e){return e.persistence}))}function nD(e){return JP(e).then((function(e){return e.localStore}))}function rD(e){return ZP(e).then((function(e){return e.remoteStore}))}function iD(e){return ZP(e).then((function(e){return e.syncEngine}))}function aD(e){return ZP(e).then((function(e){return e.datastore}))}function oD(e){return uD.apply(this,arguments)}function uD(){return uD=v(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ZP(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=xR.bind(null,n.syncEngine),r.onUnlisten=TR.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),uD.apply(this,arguments)}function sD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Rb;return e.asyncQueue.enqueueAndForget(v(d().mark((function i(){return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new BP({next:function(a){t.enqueueAndForget((function(){return uR(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Ab(Nb.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Ab(Nb.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new fR(JI(n.path),a,{includeMetadataChanges:!0,Nu:!0});return aR(e,o)},i.next=3,oD(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function cD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Rb;return e.asyncQueue.enqueueAndForget(v(d().mark((function i(){return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new BP({next:function(n){t.enqueueAndForget((function(){return uR(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Ab(Nb.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new fR(n,a,{includeMetadataChanges:!0,Nu:!0});return aR(e,o)},i.next=3,oD(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var lD=function(){function e(){var t=this;G(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new iA(this,"async_queue_retry"),this.Wc=function(){var e=nA();e&&bb("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.Po()};var n=nA();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return $(e,[{key:"isShuttingDown",get:function(){return this.qc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;var t=nA();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.qc)return new Promise((function(){}));var n=new Rb;return this.Hc((function(){return t.qc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=v(d().mark((function e(){var t=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),yx(e.t0)){e.next=12;break}throw e.t0;case 12:bb("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.xo.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){t.Kc=e,t.Gc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw xb("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=XA.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.Uc.push(i),i}},{key:"zc",value:function(){this.Kc&&Sb()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=v(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=ft(this.Uc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.Uc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=ft(t.Uc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}]),e}();function hD(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=ft(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var fD=function(){function e(){G(this,e),this._progressObserver={},this._taskCompletionResolver=new Rb,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return $(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),dD=function(e){vt(n,e);var t=kt(n);function n(e,r,i,a){var o;return G(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new lD,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return $(n,[{key:"_terminate",value:function(){return this._firestoreClient||vD(this),this._firestoreClient.terminate()}}]),n}(PP);function pD(e){return e._firestoreClient||vD(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function vD(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Ix(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new HP(e._authCredentials,e._appCheckCredentials,e._queue,r)}function yD(e,t,n){var r=new Rb;return e.asyncQueue.enqueue(v(d().mark((function i(){var a;return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,GP(e,n);case 3:return i.next=5,YP(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Nb.FAILED_PRECONDITION||e.code===Nb.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:Ib("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function mD(e){return function(e){return e.asyncQueue.enqueue(v(d().mark((function t(){var n,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tD(e);case 2:return n=t.sent,t.next=5,rD(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Cb(e);return t._u.delete(0),hA(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(pD(e=CP(e,dD)))}function gD(e){return function(e){return e.asyncQueue.enqueue(v(d().mark((function t(){var n,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tD(e);case 2:return n=t.sent,t.next=5,rD(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Cb(t))._u.add(0),e.next=4,dA(n);case 4:n.gu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(pD(e=CP(e,dD)))}function kD(e,t){var n=pD(e=CP(e,dD)),r=new fD;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new zP(e,t)}(function(e,t){if(e instanceof Uint8Array)return jP(e,t);if(e instanceof ArrayBuffer)return jP(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,rA(t));e.asyncQueue.enqueueAndForget(v(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=gP,t.next=3,iD(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function wD(e,t){return function(e,t){return e.asyncQueue.enqueue(v(d().mark((function n(){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Cb(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ns.getNamedQuery(e,t)}))},n.next=3,nD(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(pD(e=CP(e,dD)),t).then((function(t){return t?new LP(e,null,t.query):null}))}function _D(e){if(e._initialized||e._terminated)throw new Ab(Nb.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var bD=function(){function e(t){G(this,e),this._byteString=t}return $(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Px.fromBase64String(t))}catch(t){throw new Ab(Nb.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Px.fromUint8Array(t))}}]),e}(),xD=function(){function e(){G(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Ab(Nb.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $b(n)}return $(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var ID=$((function e(t){G(this,e),this._methodName=t})),ED=function(){function e(t,n){if(G(this,e),!isFinite(t)||t<-90||t>90)throw new Ab(Nb.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ab(Nb.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return $(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Bb(this._lat,e._lat)||Bb(this._long,e._long)}}]),e}(),SD=/^__.*__$/,TD=function(){function e(t,n,r){G(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return $(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new VE(e,this.data,this.fieldMask,t,this.fieldTransforms):new UE(e,this.data,t,this.fieldTransforms)}}]),e}(),CD=function(){function e(t,n,r){G(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return $(e,[{key:"toMutation",value:function(e,t){return new VE(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function ND(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Sb()}}var AD=function(){function e(t,n,r,i,a,o){G(this,e),this.settings=t,this.databaseId=n,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return $(e,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return $D(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(ND(this.sa)&&SD.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}]),e}(),RD=function(){function e(t,n,r){G(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.yt=r||rA(t)}return $(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new AD({sa:e,methodName:t,fa:n,path:$b.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}]),e}();function PD(e){var t=e._freezeSettings(),n=rA(e._databaseId);return new RD(e._databaseId,!!t.ignoreUndefinedProperties,n)}function DD(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);HD("Data must be an object, but it was:",o,r);var u,s,c=WD(r,o);if(a.merge)u=new FI(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=ft(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=GD(t,d,n);if(!o.contains(p))throw new Ab(Nb.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));JD(h,p)||h.push(p)}}catch(v){f.e(v)}finally{f.f()}u=new FI(h),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new TD(new UI(c),u,s)}var OD=function(e){vt(n,e);var t=kt(n);function n(){return G(this,n),t.apply(this,arguments)}return $(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.sa)throw 1===e.sa?e.ha("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ha("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(ID);function LD(e,t,n){return new AD({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.yt,t.ignoreUndefinedProperties)}var MD=function(e){vt(n,e);var t=kt(n);function n(){return G(this,n),t.apply(this,arguments)}return $(n,[{key:"_toFieldTransform",value:function(e){return new CE(e.path,new wE)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(ID),FD=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this,e))._a=r,i}return $(n,[{key:"_toFieldTransform",value:function(e){var t=LD(this,e,!0),n=this._a.map((function(e){return zD(e,t)})),r=new _E(n);return new CE(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ID),UD=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this,e))._a=r,i}return $(n,[{key:"_toFieldTransform",value:function(e){var t=LD(this,e,!0),n=this._a.map((function(e){return zD(e,t)})),r=new xE(n);return new CE(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ID),VD=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this,e)).wa=r,i}return $(n,[{key:"_toFieldTransform",value:function(e){var t=new EE(e.yt,vE(e.yt,this.wa));return new CE(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ID);function qD(e,t,n,r){var i=e.da(1,t,n);HD("Data must be an object, but it was:",i,r);var a=[],o=UI.empty();Tx(r,(function(e,r){var u=YD(t,e,n);r=gn(r);var s=i.ca(u);if(r instanceof OD)a.push(u);else{var c=zD(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new FI(a);return new CD(o,u,i.fieldTransforms)}function jD(e,t,n,r,i,a){var o=e.da(1,t,n),u=[GD(t,r,n)],s=[i];if(a.length%2!=0)throw new Ab(Nb.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(GD(t,a[c])),s.push(a[c+1]);for(var l=[],h=UI.empty(),f=u.length-1;f>=0;--f)if(!JD(l,u[f])){var d=u[f],p=s[f];p=gn(p);var v=o.ca(d);if(p instanceof OD)l.push(d);else{var y=zD(p,v);null!=y&&(l.push(d),h.set(d,y))}}var m=new FI(l);return new CD(h,m,o.fieldTransforms)}function BD(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return zD(n,e.da(r?4:3,t))}function zD(e,t){if(KD(e=gn(e)))return HD("Unsupported field value:",t,e),WD(e,t);if(e instanceof ID)return function(e,t){if(!ND(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=ft(e);try{for(a.s();!(n=a.n()).done;){var o=zD(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=gn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return vE(t.yt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Kb.fromDate(e);return{timestampValue:xS(t.yt,n)}}if(e instanceof Kb){var r=new Kb(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:xS(t.yt,r)}}if(e instanceof ED)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof bD)return{bytesValue:IS(t.yt,e._byteString)};if(e instanceof OP){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:TS(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(TP(e)))}(e,t)}function WD(e,t){var n={};return Cx(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Tx(e,(function(e,r){var i=zD(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function KD(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Kb||e instanceof ED||e instanceof bD||e instanceof OP||e instanceof ID)}function HD(e,t,n){if(!KD(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=TP(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function GD(e,t,n){if((t=gn(t))instanceof xD)return t._internalPath;if("string"==typeof t)return YD(e,t);throw $D("Field path arguments must be of type string or ",e,!1,void 0,n)}var QD=new RegExp("[~\\*/\\[\\]]");function YD(e,t,n){if(t.search(QD)>=0)throw $D("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return wt(xD,wn(t.split(".")))._internalPath}catch(r){throw $D("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function $D(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Ab(Nb.INVALID_ARGUMENT,u+e+s)}function JD(e,t){return e.some((function(e){return e.isEqual(t)}))}var XD=function(){function e(t,n,r,i,a){G(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return $(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new OP(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new ZD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(eO("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),ZD=function(e){vt(n,e);var t=kt(n);function n(){return G(this,n),t.apply(this,arguments)}return $(n,[{key:"data",value:function(){return Yr(yt(n.prototype),"data",this).call(this)}}]),n}(XD);function eO(e,t){return"string"==typeof t?YD(e,t):t instanceof xD?t._internalPath:t._delegate._internalPath}function tO(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ab(Nb.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var nO=$((function e(){G(this,e)})),rO=function(e){vt(n,e);var t=kt(n);function n(){return G(this,n),t.apply(this,arguments)}return $(n)}(nO);function iO(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof nO&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof oO})).length,n=e.filter((function(e){return e instanceof aO})).length;if(t>1||t>0&&n>0)throw new Ab(Nb.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=ft(n);try{for(u.s();!(o=u.n()).done;){var s=o.value;e=s._apply(e)}}catch(c){u.e(c)}finally{u.f()}return e}var aO=function(e){vt(n,e);var t=kt(n);function n(e,r,i){var a;return G(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return $(n,[{key:"_apply",value:function(e){var t=this._parse(e);return gO(e._query,t),new LP(e.firestore,e.converter,iE(e._query,t))}},{key:"_parse",value:function(e){var t=PD(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Ab(Nb.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){mO(o,a);var s,c=[],l=ft(o);try{for(l.s();!(s=l.n()).done;){var h=s.value;c.push(yO(r,e,h))}}catch(f){l.e(f)}finally{l.f()}u={arrayValue:{values:c}}}else u=yO(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||mO(o,a),u=BD(n,"where",o,"in"===a||"not-in"===a);return hI.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(rO);var oO=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return $(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:fI.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=ft(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;gO(r,a),r=iE(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new LP(e.firestore,e.converter,iE(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(nO);var uO=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return $(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Ab(Nb.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ab(Nb.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new NI(t,n);return function(e,t){if(null===ZI(e)){var n=eE(e);null!==n&&kO(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new LP(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new YI(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(rO);var sO=function(e){vt(n,e);var t=kt(n);function n(e,r,i){var a;return G(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return $(n,[{key:"_apply",value:function(e){return new LP(e.firestore,e.converter,aE(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(rO);var cO=function(e){vt(n,e);var t=kt(n);function n(e,r,i){var a;return G(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return $(n,[{key:"_apply",value:function(e){var t=vO(e,this.type,this._docOrFields,this._inclusive);return new LP(e.firestore,e.converter,function(e,t){return new YI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(rO);function lO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cO._create("startAt",t,!0)}function hO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cO._create("startAfter",t,!1)}var fO=function(e){vt(n,e);var t=kt(n);function n(e,r,i){var a;return G(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return $(n,[{key:"_apply",value:function(e){var t=vO(e,this.type,this._docOrFields,this._inclusive);return new LP(e.firestore,e.converter,function(e,t){return new YI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(rO);function dO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fO._create("endBefore",t,!1)}function pO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fO._create("endAt",t,!0)}function vO(e,t,n,r){if(n[0]=gn(n[0]),n[0]instanceof XD)return function(e,t,n,r,i){if(!r)throw new Ab(Nb.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=ft(nE(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Yx(t,r.key));else{var c=r.data.field(s.field);if(Fx(c))throw new Ab(Nb.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Ab(Nb.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){u.e(h)}finally{u.f()}return new uI(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=PD(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Ab(Nb.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Ab(Nb.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!tE(e)&&-1!==c.indexOf("/"))throw new Ab(Nb.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Qb.fromString(c));if(!Jb.isDocumentKey(l))throw new Ab(Nb.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new Jb(l);u.push(Yx(t,h))}else{var f=BD(n,r,c);u.push(f)}}return new uI(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function yO(e,t,n){if("string"==typeof(n=gn(n))){if(""===n)throw new Ab(Nb.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tE(t)&&-1!==n.indexOf("/"))throw new Ab(Nb.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Qb.fromString(n));if(!Jb.isDocumentKey(r))throw new Ab(Nb.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Yx(e,new Jb(r))}if(n instanceof OP)return Yx(e,n._key);throw new Ab(Nb.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(TP(n),"."))}function mO(e,t){if(!Array.isArray(e)||0===e.length)throw new Ab(Nb.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Ab(Nb.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function gO(e,t){if(t.isInequality()){var n=eE(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Ab(Nb.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=ZI(e);null!==i&&kO(e,r,i)}var a=function(e,t){var n,r=ft(e);try{for(r.s();!(n=r.n()).done;){var i,a=ft(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Ab(Nb.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Ab(Nb.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function kO(e,t,n){if(!n.isEqual(t))throw new Ab(Nb.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var wO=function(){function e(){G(this,e)}return $(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Bx(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lx(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mx(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Sb()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Tx(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new ED(Lx(e.latitude),Lx(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Ux(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Vx(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ox(e);return new Kb(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Qb.fromString(e);Tb(JS(n));var r=new Ex(n.get(1),n.get(3)),i=new Jb(n.popFirst(5));return r.isEqual(t)||xb("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function _O(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var bO=function(e){vt(n,e);var t=kt(n);function n(e){var r;return G(this,n),(r=t.call(this)).firestore=e,r}return $(n,[{key:"convertBytes",value:function(e){return new bD(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new OP(this.firestore,null,t)}}]),n}(wO),xO=function(){function e(t,n){G(this,e),this.hasPendingWrites=t,this.fromCache=n}return $(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),IO=function(e){vt(n,e);var t=kt(n);function n(e,r,i,a,o,u){var s;return G(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return $(n,[{key:"exists",value:function(){return Yr(yt(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new EO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(eO("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(XD),EO=function(e){vt(n,e);var t=kt(n);function n(){return G(this,n),t.apply(this,arguments)}return $(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Yr(yt(n.prototype),"data",this).call(this,e)}}]),n}(IO),SO=function(){function e(t,n,r,i){G(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new xO(i.hasPendingWrites,i.fromCache),this.query=r}return $(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new EO(n._firestore,n._userDataWriter,r.key,r,new xO(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ab(Nb.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new EO(e._firestore,e._userDataWriter,t.doc.key,t.doc,new xO(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new EO(e._firestore,e._userDataWriter,t.doc.key,t.doc,new xO(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:TO(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function TO(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Sb()}}function CO(e,t){return e instanceof IO&&t instanceof IO?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof SO&&t instanceof SO&&e._firestore===t._firestore&&qP(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var NO=function(e){vt(n,e);var t=kt(n);function n(e){var r;return G(this,n),(r=t.call(this)).firestore=e,r}return $(n,[{key:"convertBytes",value:function(e){return new bD(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new OP(this.firestore,null,t)}}]),n}(wO);function AO(e){e=CP(e,OP);var t=CP(e.firestore,dD),n=pD(t),r=new NO(t);return function(e,t){var n=new Rb;return e.asyncQueue.enqueueAndForget(v(d().mark((function r(){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=v(d().mark((function e(t,n,r){var i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Cb(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Ab(Nb.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=ZA(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,nD(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new IO(t,r,e._key,n,new xO(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function RO(e){e=CP(e,LP);var t=CP(e.firestore,dD),n=pD(t),r=new NO(t);return function(e,t){var n=new Rb;return e.asyncQueue.enqueueAndForget(v(d().mark((function r(){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=v(d().mark((function e(t,n,r){var i,a,o,u,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,PN(t,n,!0);case 3:i=e.sent,a=new kR(n,i.Hi),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=ZA(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,nD(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new SO(t,r,e,n)}))}function PO(e,t,n){e=CP(e,OP);var r=CP(e.firestore,dD),i=_O(e.converter,t,n);return MO(r,[DD(PD(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,AE.none())])}function DO(e,t,n){e=CP(e,OP);for(var r=CP(e.firestore,dD),i=PD(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return MO(r,[("string"==typeof(t=gn(t))||t instanceof xD?jD(i,"updateDoc",e._key,t,n,o):qD(i,"updateDoc",e._key,t)).toMutation(e._key,AE.exists(!0))])}function OO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=gn(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||hD(n[s])||(u=n[s],s++);var c,l,h,f={includeMetadataChanges:u.includeMetadataChanges};if(hD(n[s])){var p=n[s];n[s]=null===(i=p.next)||void 0===i?void 0:i.bind(p),n[s+1]=null===(a=p.error)||void 0===a?void 0:a.bind(p),n[s+2]=null===(o=p.complete)||void 0===o?void 0:o.bind(p)}if(e instanceof OP)l=CP(e.firestore,dD),h=JI(e._key.path),c={next:function(t){n[s]&&n[s](FO(l,e,t))},error:n[s+1],complete:n[s+2]};else{var y=CP(e,LP);l=CP(y.firestore,dD),h=y._query;var m=new NO(l);c={next:function(e){n[s]&&n[s](new SO(l,m,y,e))},error:n[s+1],complete:n[s+2]},tO(e._query)}return function(e,t,n,r){var i=new BP(r),a=new fR(t,i,n);return e.asyncQueue.enqueueAndForget(v(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=aR,t.next=3,oD(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(v(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=uR,t.next=3,oD(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(pD(l),h,f,c)}function LO(e,t){return function(e,t){var n=new BP(t);return e.asyncQueue.enqueueAndForget(v(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Cb(e).Ru.add(t),t.next()},t.next=3,oD(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget(v(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Cb(e).Ru.delete(t)},t.next=3,oD(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(pD(e=CP(e,dD)),hD(t)?t:{next:t})}function MO(e,t){return function(e,t){var n=new Rb;return e.asyncQueue.enqueueAndForget(v(d().mark((function r(){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=NR,r.next=3,iD(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(pD(e),t)}function FO(e,t,n){var r=n.docs.get(t._key),i=new NO(e);return new IO(e,i,t._key,r,new xO(n.hasPendingWrites,n.fromCache),t.converter)}var UO={maxAttempts:5},VO=function(){function e(t,n){G(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=PD(t)}return $(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=qO(e,this._firestore),i=_O(r.converter,t,n),a=DD(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,AE.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=qO(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=gn(t))||t instanceof xD?jD(this._dataReader,"WriteBatch.update",i._key,t,n,o):qD(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,AE.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=qO(e,this._firestore);return this._mutations=this._mutations.concat(new KE(t._key,AE.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Ab(Nb.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function qO(e,t){if((e=gn(e)).firestore!==t)throw new Ab(Nb.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var jO=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this,e,r))._firestore=e,i}return $(n,[{key:"get",value:function(e){var t=this,r=qO(e,this._firestore),i=new NO(this._firestore);return Yr(yt(n.prototype),"get",this).call(this,e).then((function(e){return new IO(t._firestore,i,r._key,e._document,new xO(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){G(this,e),this._firestore=t,this._transaction=n,this._dataReader=PD(t)}return $(e,[{key:"get",value:function(e){var t=this,n=qO(e,this._firestore),r=new bO(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Sb();var i=e[0];if(i.isFoundDocument())return new XD(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new XD(t._firestore,r,n._key,null,n.converter);throw Sb()}))}},{key:"set",value:function(e,t,n){var r=qO(e,this._firestore),i=_O(r.converter,t,n),a=DD(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=qO(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=gn(t))||t instanceof xD?jD(this._dataReader,"Transaction.update",i._key,t,n,o):qD(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=qO(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function BO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new FD("arrayUnion",t)}function zO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new UD("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){kb=e}(yr),cr(new _n("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new dD(new Lb(e.getProvider("auth-internal")),new Vb(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ab(Nb.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ex(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),br(mb,"3.8.0",e),br(mb,"3.8.0","esm2017")}();function WO(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ab("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function KO(){if("undefined"===typeof Uint8Array)throw new Ab("unimplemented","Uint8Arrays are not available in this environment.")}function HO(){if("undefined"==typeof atob)throw new Ab("unimplemented","Blobs are unavailable in Firestore in this environment.")}var GO=function(){function e(t){G(this,e),this._delegate=t}return $(e,[{key:"toBase64",value:function(){return HO(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return KO(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return HO(),new e(bD.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return KO(),new e(bD.fromUint8Array(t))}}]),e}();function QO(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=ft(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var YO=function(){function e(){G(this,e)}return $(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){_D(e=CP(e,dD));var n=pD(e),r=e._freezeSettings(),i=new bP;return yD(n,i,new wP(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){_D(e=CP(e,dD));var t=pD(e),n=e._freezeSettings(),r=new bP;return yD(t,r,new _P(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Ab(Nb.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Rb;return e._queue.enqueueAndForgetEvenWhileRestricted(v(d().mark((function n(){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=v(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dx.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,dx.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(mN(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),$O=function(){function e(t,n,r){var i=this;G(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Ex||(this._appCompat=t)}return $(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Ib("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};DP(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return mD(this._delegate)}},{key:"disableNetwork",value:function(){return gD(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&IP("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Rb;return e.asyncQueue.enqueueAndForget(v(d().mark((function n(){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=qR,n.next=3,iD(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(pD(e=CP(e,dD)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return LO(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Ab("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new lL(this,FP(this._delegate,e))}catch(t){throw nL(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new tL(this,UP(this._delegate,e))}catch(t){throw nL(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new uL(this,function(e,t){if(e=CP(e,PP),xP("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ab(Nb.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new LP(e,null,function(e){return new YI(Qb.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw nL(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=CP(e,dD);var r=Object.assign(Object.assign({},UO),n);return function(e){if(e.maxAttempts<1)throw new Ab(Nb.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Rb;return e.asyncQueue.enqueueAndForget(v(d().mark((function i(){var a;return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,aD(e);case 2:a=i.sent,new KP(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(pD(e),(function(n){return t(new jO(e,n))}),r)}(this._delegate,(function(n){return e(new XO(t,n))}))}},{key:"batch",value:function(){var e=this;return pD(this._delegate),new ZO(new VO(this._delegate,(function(t){return MO(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return kD(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return wD(this._delegate,e).then((function(e){return e?new uL(t,e):null}))}}]),e}(),JO=function(e){vt(n,e);var t=kt(n);function n(e){var r;return G(this,n),(r=t.call(this)).firestore=e,r}return $(n,[{key:"convertBytes",value:function(e){return new GO(new bD(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return tL.forKey(t,this.firestore,null)}}]),n}(wO);var XO=function(){function e(t,n){G(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new JO(t)}return $(e,[{key:"get",value:function(e){var t=this,n=hL(e);return this._delegate.get(n).then((function(e){return new aL(t._firestore,new IO(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=hL(e);return n?(WO("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=hL(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=hL(e);return this._delegate.delete(t),this}}]),e}(),ZO=function(){function e(t){G(this,e),this._delegate=t}return $(e,[{key:"set",value:function(e,t,n){var r=hL(e);return n?(WO("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=hL(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=hL(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),eL=function(){function e(t,n,r){G(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return $(e,[{key:"fromFirestore",value:function(e,t){var n=new EO(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new oL(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new JO(t),n),i.set(n,a)),a}}]),e}();eL.INSTANCES=new WeakMap;var tL=function(){function e(t,n){G(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new JO(t)}return $(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new lL(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new lL(this.firestore,FP(this._delegate,e))}catch(t){throw nL(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=gn(e))instanceof OP&&VP(this._delegate,e)}},{key:"set",value:function(e,t){t=WO("DocumentReference.set",t);try{return t?PO(this._delegate,e,t):PO(this._delegate,e)}catch(n){throw nL(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?DO(this._delegate,e):DO.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw nL(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return MO(CP(e.firestore,dD),[new KE(e._key,AE.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=rL(n),a=iL(n,(function(t){return new aL(e.firestore,new IO(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return OO(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?AO(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=CP(e,OP);var t=CP(e.firestore,dD);return sD(pD(t),e._key,{source:"server"}).then((function(n){return FO(t,e,n)}))}(this._delegate):function(e){e=CP(e,OP);var t=CP(e.firestore,dD);return sD(pD(t),e._key).then((function(n){return FO(t,e,n)}))}(this._delegate),t.then((function(e){return new aL(n.firestore,new IO(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(eL.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Ab("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new OP(n._delegate,r,new Jb(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new OP(n._delegate,r,t))}}]),e}();function nL(e,t,n){return e.message=e.message.replace(t,n),e}function rL(e){var t,n=ft(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!QO(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function iL(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=QO(e[0])?e[0]:QO(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var aL=function(){function e(t,n){G(this,e),this._firestore=t,this._delegate=n}return $(e,[{key:"ref",get:function(){return new tL(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return CO(this._delegate,e._delegate)}}]),e}(),oL=function(e){vt(n,e);var t=kt(n);function n(){return G(this,n),t.apply(this,arguments)}return $(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Sb()}(void 0!==t),t}}]),n}(aL),uL=function(){function e(t,n){G(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new JO(t)}return $(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,iO(this._delegate,function(e,t,n){var r=t,i=eO("where",e);return aO._create(i,r,n)}(t,n,r)))}catch(i){throw nL(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,iO(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=eO("orderBy",e);return uO._create(r,n)}(t,n)))}catch(r){throw nL(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,iO(this._delegate,function(e){return NP("limit",e),sO._create("limit",e,"F")}(t)))}catch(n){throw nL(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,iO(this._delegate,function(e){return NP("limitToLast",e),sO._create("limitToLast",e,"L")}(t)))}catch(n){throw nL(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,iO(this._delegate,lO.apply(void 0,arguments)))}catch(t){throw nL(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,iO(this._delegate,hO.apply(void 0,arguments)))}catch(t){throw nL(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,iO(this._delegate,dO.apply(void 0,arguments)))}catch(t){throw nL(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,iO(this._delegate,pO.apply(void 0,arguments)))}catch(t){throw nL(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return qP(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?RO(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=CP(e,LP);var t=CP(e.firestore,dD),n=pD(t),r=new NO(t);return cD(n,e._query,{source:"server"}).then((function(n){return new SO(t,r,e,n)}))}(this._delegate):function(e){e=CP(e,LP);var t=CP(e.firestore,dD),n=pD(t),r=new NO(t);return tO(e._query),cD(n,e._query).then((function(n){return new SO(t,r,e,n)}))}(this._delegate),t.then((function(e){return new cL(n.firestore,new SO(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=rL(n),a=iL(n,(function(t){return new cL(e.firestore,new SO(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return OO(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(eL.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),sL=function(){function e(t,n){G(this,e),this._firestore=t,this._delegate=n}return $(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new oL(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),cL=function(){function e(t,n){G(this,e),this._firestore=t,this._delegate=n}return $(e,[{key:"query",get:function(){return new uL(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new oL(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new sL(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new oL(n._firestore,r))}))}},{key:"isEqual",value:function(e){return CO(this._delegate,e._delegate)}}]),e}(),lL=function(e){vt(n,e);var t=kt(n);function n(e,r){var i;return G(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return $(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new tL(this.firestore,e):null}},{key:"doc",value:function(e){try{return new tL(this.firestore,void 0===e?UP(this._delegate):UP(this._delegate,e))}catch(t){throw nL(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=CP(e.firestore,dD),r=UP(e),i=_O(e.converter,t);return MO(n,[DD(PD(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,AE.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new tL(t.firestore,e)}))}},{key:"isEqual",value:function(e){return VP(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(eL.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(uL);function hL(e){return CP(e,OP)}var fL=function(){function e(){G(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=wt(xD,n)}return $(e,[{key:"isEqual",value:function(e){return(e=gn(e))instanceof xD&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e($b.keyField().canonicalString())}}]),e}(),dL=function(){function e(t){G(this,e),this._delegate=t}return $(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new MD("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new OD("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=BO.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=zO.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new VD("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),pL={Firestore:$O,GeoPoint:ED,Timestamp:Kb,Blob:GO,Transaction:XO,WriteBatch:ZO,DocumentReference:tL,DocumentSnapshot:aL,Query:uL,QueryDocumentSnapshot:oL,QuerySnapshot:cL,CollectionReference:lL,FieldPath:fL,FieldValue:dL,setLogLevel:function(e){!function(e){wb.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new _n("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},pL)))}(e,(function(e,t){return new $O(e,t,new YO)})),e.registerVersion("@firebase/firestore-compat","0.3.0")}(Hr);Hr.initializeApp({apiKey:"AIzaSyDNVdSLuHr4wNkeqVHFQ4M97rXPym7M2KM",authDomain:"netflix-clone9449.firebaseapp.com",projectId:"netflix-clone9449",storageBucket:"netflix-clone9449.appspot.com",messagingSenderId:"152763610202",appId:"1:152763610202:web:83a5ea58ce004a40fe1463"}).firestore();var vL=Hr.auth();var yL;function mL(){return mL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mL.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(yL||(yL={}));var gL,kL="popstate";function wL(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function _L(e){return{usr:e.state,key:e.key}}function bL(e,t,n,r){return void 0===n&&(n=null),mL({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?IL(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function xL(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function IL(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function EL(e){var t="undefined"!==typeof window&&"undefined"!==typeof window.location&&"null"!==window.location.origin?window.location.origin:window.location.href,n="string"===typeof e?e:xL(e);return wL(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}function SL(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,u=i.v5Compat,s=void 0!==u&&u,c=o.history,l=yL.Pop,h=null;function f(){l=yL.Pop,h&&h({action:l,location:d.location})}var d={get action(){return l},get location(){return e(o,c)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(kL,f),h=e,function(){o.removeEventListener(kL,f),h=null}},createHref:function(e){return t(o,e)},encodeLocation:function(e){var t=EL("string"===typeof e?e:xL(e));return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=yL.Push;var r=bL(d.location,e,t);n&&n(r,e);var i=_L(r),a=d.createHref(r);try{c.pushState(i,"",a)}catch(Ch){o.location.assign(a)}s&&h&&h({action:l,location:d.location})},replace:function(e,t){l=yL.Replace;var r=bL(d.location,e,t);n&&n(r,e);var i=_L(r),a=d.createHref(r);c.replaceState(i,"",a),s&&h&&h({action:l,location:d.location})},go:function(e){return c.go(e)}};return d}function TL(e,t,n){void 0===n&&(n="/");var r=ML(("string"===typeof t?IL(t):t).pathname||"/",n);if(null==r)return null;var i=CL(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=DL(i[o],LL(r));return a}function CL(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(wL(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=UL([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(wL(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),CL(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:PL(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=ft(NL(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function NL(e){var t=e.split("/");if(0===t.length)return[];var n=Gr(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var u=NL(i.join("/")),s=[];return s.push.apply(s,wn(u.map((function(e){return""===e?o:[o,e].join("/")})))),a&&s.push.apply(s,wn(u)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(gL||(gL={}));var AL=/^:\w+$/,RL=function(e){return"*"===e};function PL(e,t){var n=e.split("/"),r=n.length;return n.some(RL)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!RL(e)})).reduce((function(e,t){return e+(AL.test(t)?3:""===t?1:10)}),r)}function DL(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=OL({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var h=u.route;a.push({params:r,pathname:UL([i,l.pathname]),pathnameBase:VL(UL([i,l.pathnameBase])),route:h}),"/"!==l.pathnameBase&&(i=UL([i,l.pathnameBase]))}return a}function OL(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);FL("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),l=o.slice(1),h=a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(Ch){return FL(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+Ch+")."),e}}(l[n]||"",t),e}),{});return{params:h,pathname:u,pathnameBase:s,pattern:e}}function LL(e){try{return decodeURI(e)}catch(Ch){return FL(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Ch+")."),e}}function ML(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function FL(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}var UL=function(e){return e.join("/").replace(/\/\/+/g,"/")},VL=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},qL=function(e){vt(n,e);var t=kt(n);function n(){return G(this,n),t.apply(this,arguments)}return $(n)}(_t(Error));var jL=$((function e(t,n,r,i){G(this,e),void 0===i&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}));function BL(e){return e instanceof jL}var zL=["post","put","patch","delete"],WL=(new Set(zL),["get"].concat(zL));new Set(WL),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;function KL(){return KL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KL.apply(this,arguments)}var HL="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},GL=t.useState,QL=t.useEffect,YL=t.useLayoutEffect,$L=t.useDebugValue;function JL(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!HL(n,r)}catch(Ch){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,r.useSyncExternalStore;var XL=t.createContext(null);var ZL=t.createContext(null);var eM=t.createContext(null);var tM=t.createContext(null);var nM=t.createContext(null);var rM=t.createContext(null);var iM=t.createContext({outlet:null,matches:[]});var aM=t.createContext(null);function oM(){return null!=t.useContext(rM)}function uM(){return oM()||wL(!1),t.useContext(rM).location}function sM(){var e=function(){var e,n=t.useContext(aM),r=pM(lM.UseRouteError),i=vM(lM.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=BL(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unhandled Thrown Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",t.createElement("code",{style:o},"errorElement")," props on\xa0",t.createElement("code",{style:o},"<Route>")))}var cM,lM,hM=function(e){vt(r,e);var n=kt(r);function r(e){var t;return G(this,r),(t=n.call(this,e)).state={location:e.location,error:e.error},t}return $(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(iM.Provider,{value:this.props.routeContext},t.createElement(aM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),r}(t.Component);function fM(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(XL);return a&&r.route.errorElement&&(a._deepestRenderedBoundaryId=r.route.id),t.createElement(iM.Provider,{value:n},i)}function dM(e,n,r){if(void 0===n&&(n=[]),null==e){if(null==r||!r.errors)return null;e=r.matches}var i=e,a=null==r?void 0:r.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||wL(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(e,o,u){var s=o.route.id?null==a?void 0:a[o.route.id]:null,c=r?o.route.errorElement||t.createElement(sM,null):null,l=n.concat(i.slice(0,u+1)),h=function(){return t.createElement(fM,{match:o,routeContext:{outlet:e,matches:l}},s?c:void 0!==o.route.element?o.route.element:e)};return r&&(o.route.errorElement||0===u)?t.createElement(hM,{location:r.location,component:c,error:s,children:h(),routeContext:{outlet:null,matches:l}}):h()}),null)}function pM(e){var n=t.useContext(eM);return n||wL(!1),n}function vM(e){var n=function(e){var n=t.useContext(iM);return n||wL(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||wL(!1),r.route.id}!function(e){e.UseRevalidator="useRevalidator"}(cM||(cM={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(lM||(lM={}));var yM;function mM(e){wL(!1)}function gM(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?yL.Pop:u,c=e.navigator,l=e.static,h=void 0!==l&&l;oM()&&wL(!1);var f=r.replace(/^\/*/,"/"),d=t.useMemo((function(){return{basename:f,navigator:c,static:h}}),[f,c,h]);"string"===typeof o&&(o=IL(o));var p=o,v=p.pathname,y=void 0===v?"/":v,m=p.search,g=void 0===m?"":m,k=p.hash,w=void 0===k?"":k,_=p.state,b=void 0===_?null:_,x=p.key,I=void 0===x?"default":x,E=t.useMemo((function(){var e=ML(y,f);return null==e?null:{pathname:e,search:g,hash:w,state:b,key:I}}),[f,y,g,w,b,I]);return null==E?null:t.createElement(nM.Provider,{value:d},t.createElement(rM.Provider,{children:a,value:{location:E,navigationType:s}}))}function kM(e){var n=e.children,r=e.location,i=t.useContext(ZL);return function(e,n){oM()||wL(!1);var r,i=t.useContext(nM).navigator,a=t.useContext(eM),o=t.useContext(iM).matches,u=o[o.length-1],s=u?u.params:{},c=(u&&u.pathname,u?u.pathnameBase:"/"),l=(u&&u.route,uM());if(n){var h,f="string"===typeof n?IL(n):n;"/"===c||(null==(h=f.pathname)?void 0:h.startsWith(c))||wL(!1),r=f}else r=l;var d=r.pathname||"/",p=TL(e,{pathname:"/"===c?d:d.slice(c.length)||"/"}),v=dM(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:UL([c,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:UL([c,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,a||void 0);return n&&v?t.createElement(rM.Provider,{value:{location:KL({pathname:"/",search:"",hash:"",state:null,key:"default"},r),navigationType:yL.Pop}},v):v}(i&&!n?i.router.routes:_M(n),r)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(yM||(yM={}));var wM=new Promise((function(){}));t.Component;function _M(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e))if(e.type!==t.Fragment){e.type!==mM&&wL(!1),e.props.index&&e.props.children&&wL(!1);var a=[].concat(wn(n),[i]),o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(o.children=_M(e.props.children,a)),r.push(o)}else r.push.apply(r,_M(e.props.children,n))})),r}function bM(e){var n,r=e.basename,i=e.children,a=e.window,o=t.useRef();null==o.current&&(o.current=(void 0===(n={window:a,v5Compat:!0})&&(n={}),SL((function(e,t){var n=e.location;return bL("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:xL(t)}),null,n)));var u=o.current,s=c(t.useState({action:u.action,location:u.location}),2),l=s[0],h=s[1];return t.useLayoutEffect((function(){return u.listen(h)}),[u]),t.createElement(gM,{basename:r,children:i,location:l.location,navigationType:l.action,navigator:u})}var xM,IM;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(xM||(xM={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(IM||(IM={}));var EM=function(){return(0,t.useEffect)((function(){return vL.onAuthStateChanged((function(e){e&&console.log(e)}))}),[]),(0,l.jsx)("div",{className:"app",children:(0,l.jsx)(bM,{children:(0,l.jsx)(kM,{children:(0,l.jsx)(mM,{path:"/",element:(0,l.jsx)(lt,{})})})})})},SM=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};i.createRoot(document.getElementById("root")).render((0,l.jsx)(t.StrictMode,{children:(0,l.jsx)(EM,{})})),SM()}()}();
//# sourceMappingURL=main.7a5f5818.js.map